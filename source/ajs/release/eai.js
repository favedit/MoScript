MO.EEaiChapter=new function(){this.Chart="chart";this.Cockpit="cockpit";return this};MO.EEaiConstant=new function(){this.DefaultCountry="china";this.LogicService="eai.logic.service";this.ServiceHost="eai.host.service";this.Resource="eai.resource";return this};MO.EEaiRate=new function(){this.Line=0;this.Map=1;this.Investment=2;this.InvestmentRange=3;return this};
MO.EEaiScene=new function(){this.Group="group";this.GroupReport="group.report";this.Company="company";this.Country="country";this.ChartTotal="chart.total";this.ChartHistory="chart.history";this.ChartCustomer="chart.customer";this.ChartMarketer="chart.marketer";this.ChartDepartment="chart.department";this.ChartLive="chart.live";this.ChartWorld="chart.world";this.ChartSales="chart.sales";this.ChartIndustry="chart.industry";this.ChartInvestment="chart.investment";this.ChartPerformence="chart.performence";
this.ChartCustomer="chart.customer";this.ChartCustomerInvestment3d="chart.customer.investment.3d";this.ChartCustomerSphere="chart.customer.sphere";this.ChartMarketerCustomer="chart.marketer.customer";this.ChartMarketerMarketer="chart.marketer.marketer";this.ChartMarketerManage="chart.marketer.manage";this.ChartDepartmentCustomer="chart.department.customer";this.ChartDepartmentMarketer="chart.department.marketer";this.ChartDepartmentDepartment="chart.department.department";this.ChartStatisticsMarketer=
"chart.statistics.marketer";this.ChartPerformenceMarketer="chart.performence.marketer";this.ChartMarketerProduct="chart.marketer.product";this.Cockpit="cockpit";this.ChartShow1019="chart.show.1019";this.ChartShow1022="chart.show.1022";this.ChartShow1022MktCtm="chart.show.1022MktCtm";this.ChartSesameFinancial="chart.sesame.financial";return this};MO.Eai=new function(){this.Canvas=this.Application=null;return this};
MO.FEaiCardResource=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.String)]);a._cityCode=MO.Class.register(a,[new MO.AGetter("_cityCode"),new MO.APersistence("_cityCode",MO.EDataType.String)]);return a};
MO.FEaiCardResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule);a._cards=MO.Class.register(a,new MO.AGetter("_cards"));a.construct=MO.FEaiCardResourceModule_construct;a.find=MO.FEaiCardResourceModule_find;a.findCityCode=MO.FEaiCardResourceModule_findCityCode;a.findCityCode2=MO.FEaiCardResourceModule_findCityCode2;a.findCityCode4=MO.FEaiCardResourceModule_findCityCode4;a.unserialize=MO.FEaiCardResourceModule_unserialize;a.dispose=MO.FEaiCardResourceModule_dispose;return a};
MO.FEaiCardResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._cards=new MO.TDictionary};MO.FEaiCardResourceModule_find=function(a){return this._cards.get(a)};MO.FEaiCardResourceModule_findCityCode=function(a){var b=null;(a=this._cards.get(a))&&(b=a.cityCode());return b};MO.FEaiCardResourceModule_findCityCode2=function(a){a=a.substring(0,2);if(2==a.length){for(var b=this._cards,c=b.count(),d=0;d<c;d++){var e=b.value(d);if(0==e.code().indexOf(a))return e.cityCode()}return null}};
MO.FEaiCardResourceModule_findCityCode4=function(a){a=a.substring(0,4);if(4==a.length){for(var b=this._cards,c=b.count(),d=0;d<c;d++){var e=b.value(d);if(0==e.code().indexOf(a))return e.cityCode()}return null}};MO.FEaiCardResourceModule_unserialize=function(a){for(var b=this._cards,c=a.readInt32(),d=0;d<c;d++){var e=MO.Class.create(MO.FEaiCardResource);e.unserialize(a);b.set(e.code(),e)}};MO.FEaiCardResourceModule_dispose=function(){this._cards=MO.Lang.Object.dispose(this._cards);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiCityResource=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._provinceCode=MO.Class.register(a,[new MO.AGetter("_provinceCode"),new MO.APersistence("_provinceCode",MO.EDataType.String)]);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._level=MO.Class.register(a,[new MO.AGetter("_level"),new MO.APersistence("_level",
MO.EDataType.Uint16)]);a._location=MO.Class.register(a,[new MO.AGetter("_location"),new MO.APersistence("_location",MO.EDataType.Struct,MO.SPoint2)]);return a};
MO.FEaiCityResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule);a._resourceConsole=MO.Class.register(a,new MO.AGetSet("_resourceConsole"));a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a.construct=MO.FEaiCityResourceModule_construct;a.find=MO.FEaiCityResourceModule_find;a.findByCard=MO.FEaiCityResourceModule_findByCard;a.unserialize=MO.FEaiCityResourceModule_unserialize;a.dispose=MO.FEaiCityResourceModule_dispose;return a};
MO.FEaiCityResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._citys=new MO.TDictionary};MO.FEaiCityResourceModule_find=function(a){return this._citys.get(a)};MO.FEaiCityResourceModule_findByCard=function(a){var b=null,c=null;if(a){var d=this._resourceConsole.cardModule();(c=d.findCityCode(a))||(c=d.findCityCode4(a));c||(c=d.findCityCode2(a));c&&(b=this._citys.get(c))}return b};
MO.FEaiCityResourceModule_unserialize=function(a){for(var b=this._citys,c=a.readInt32(),d=0;d<c;d++){var e=MO.Class.create(MO.FEaiCityResource);e.unserialize(a);b.set(e.code(),e)}};MO.FEaiCityResourceModule_dispose=function(){this._citys=MO.Lang.Object.dispose(this._citys);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiDepartmentResource=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._fullLabel=MO.Class.register(a,[new MO.AGetter("_fullLabel"),new MO.APersistence("_fullLabel",MO.EDataType.String)]);return a};
MO.FEaiDepartmentResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule,MO.MPersistence);a._departments=MO.Class.register(a,[new MO.AGetter("_departments"),new MO.APersistence("_departments",MO.EDataType.Objects,MO.FEaiDepartmentResource)]);a.construct=MO.FEaiDepartmentResourceModule_construct;a.find=MO.FEaiDepartmentResourceModule_find;a.findByFullLabel=MO.FEaiDepartmentResourceModule_findByFullLabel;a.dispose=MO.FEaiDepartmentResourceModule_dispose;return a};
MO.FEaiDepartmentResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._departments=new MO.TObjects};MO.FEaiDepartmentResourceModule_find=function(a){return this._departments.get(a)};MO.FEaiDepartmentResourceModule_findByFullLabel=function(a){for(var b=this._departments,c=b.count(),d=0;d<c;d++){var e=b.at(d);if(e.fullLabel()==a)return e}return null};
MO.FEaiDepartmentResourceModule_dispose=function(){this._departments=MO.Lang.Object.dispose(this._departments);this.__base.FEaiResourceModule.dispose.call(this)};MO.FEaiHistoryCityResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a._investmentDay=MO.Class.register(a,new MO.AGetSet("_investmentDay"));a._investmentTotal=MO.Class.register(a,new MO.AGetSet("_investmentTotal"));a.unserialize=MO.FEaiHistoryCityResource_unserialize;return a};
MO.FEaiHistoryCityResource_unserialize=function(a){this._code=a.readUint16();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat()};
MO.FEaiHistoryDateResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetter("_code"));a._investmentDay=MO.Class.register(a,new MO.AGetter("_investmentDay"));a._investmentTotal=MO.Class.register(a,new MO.AGetter("_investmentTotal"));a._provinces=MO.Class.register(a,new MO.AGetter("_provinces"));a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a.construct=MO.FEaiHistoryDateResource_construct;a.unserialize=MO.FEaiHistoryDateResource_unserialize;a.dispose=
MO.FEaiHistoryDateResource_dispose;return a};MO.FEaiHistoryDateResource_construct=function(){this.__base.FObject.construct.call(this);this._provinces=new MO.TDictionary;this._citys=new MO.TDictionary};
MO.FEaiHistoryDateResource_unserialize=function(a){this._code=a.readString();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat();for(var b=this._provinces,c=a.readInt32(),d=0;d<c;d++){var e=MO.Class.create(MO.FEaiHistoryProvinceResource);e.unserialize(a);b.set(e.code(),e)}b=this._citys;c=a.readInt32();for(d=0;d<c;d++)e=MO.Class.create(MO.FEaiHistoryCityResource),e.unserialize(a),b.set(e.code(),e)};
MO.FEaiHistoryDateResource_dispose=function(){this._provinces=MO.Lang.Object.dispose(this._provinces);this._citys=MO.Lang.Object.dispose(this._citys);this.__base.FObject.dispose.call(this)};
MO.FEaiHistoryMilestoneResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a._investmentTotal=MO.Class.register(a,new MO.AGetSet("_investmentTotal"));a._dayCount=MO.Class.register(a,new MO.AGetSet("_dayCount"));a._companyCount=MO.Class.register(a,new MO.AGetSet("_companyCount"));a._staffCount=MO.Class.register(a,new MO.AGetSet("_staffCount"));a.unserialize=MO.FEaiHistoryMilestoneResource_unserialize;return a};
MO.FEaiHistoryMilestoneResource_unserialize=function(a){this._code=a.readString();this._investmentTotal=a.readFloat();this._dayCount=a.readUint16();this._companyCount=a.readUint16();this._staffCount=a.readUint16()};
MO.FEaiHistoryProvinceResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a._investmentDay=MO.Class.register(a,new MO.AGetSet("_investmentDay"));a._investmentTotal=MO.Class.register(a,new MO.AGetSet("_investmentTotal"));a.unserialize=MO.FEaiHistoryProvinceResource_unserialize;return a};MO.FEaiHistoryProvinceResource_unserialize=function(a){this._code=a.readUint16();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat()};
MO.FEaiHistoryResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule,MO.MListener);a._investmentDay=MO.Class.register(a,new MO.AGetter("_investmentDay"));a._investmentTotal=MO.Class.register(a,new MO.AGetter("_investmentTotal"));a._investmentProvinceDay=MO.Class.register(a,new MO.AGetter("_investmentProvinceDay"));a._investmentProvinceTotal=MO.Class.register(a,new MO.AGetter("_investmentProvinceTotal"));a._investmentCityDay=MO.Class.register(a,new MO.AGetter("_investmentCityDay"));
a._investmentCityTotal=MO.Class.register(a,new MO.AGetter("_investmentCityTotal"));a._provinces=MO.Class.register(a,new MO.AGetter("_provinces"));a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a._milestones=MO.Class.register(a,new MO.AGetter("_milestones"));a._dates=MO.Class.register(a,new MO.AGetter("_dates"));a._listenersLoad=MO.Class.register(a,new MO.AListener("_listenersLoad",MO.EEvent.Load));a.onLoad=MO.FEaiHistoryResourceModule_onLoad;a.construct=MO.FEaiHistoryResourceModule_construct;
a.unserialize=MO.FEaiHistoryResourceModule_unserialize;a.load=MO.FEaiHistoryResourceModule_load;a.dispose=MO.FEaiHistoryResourceModule_dispose;return a};MO.FEaiHistoryResourceModule_onLoad=function(a){a=a.content;var b=MO.Class.create(MO.FDataView);b.setEndianCd(!0);b.link(a);this.unserialize(b);b.dispose();a=new MO.SEvent;this.processLoadListener(a);a.dispose()};
MO.FEaiHistoryResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._provinces=new MO.TDictionary;this._citys=new MO.TDictionary;this._milestones=new MO.TDictionary;this._dates=new MO.TDictionary};
MO.FEaiHistoryResourceModule_unserialize=function(a){this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat();this._investmentProvinceDay=a.readFloat();this._investmentProvinceTotal=a.readFloat();this._investmentCityDay=a.readFloat();this._investmentCityTotal=a.readFloat();var b=this._provinces;b.clear();for(var c=a.readInt32(),d=0;d<c;d++){var e=MO.Class.create(MO.FEaiHistoryProvinceResource);e.unserialize(a);b.set(e.code(),e)}b=this._citys;b.clear();c=a.readInt32();for(d=0;d<c;d++)e=
MO.Class.create(MO.FEaiHistoryCityResource),e.unserialize(a),b.set(e.code(),e);b=this._milestones;b.clear();c=a.readInt32();for(d=0;d<c;d++)e=MO.Class.create(MO.FEaiHistoryMilestoneResource),e.unserialize(a),b.set(e.code(),e);b=this._dates;b.clear();c=a.readInt32();for(d=0;d<c;d++)e=MO.Class.create(MO.FEaiHistoryDateResource),e.unserialize(a),b.set(e.code(),e)};
MO.FEaiHistoryResourceModule_load=function(){var a="{eai.resource}/investment.dat?date="+MO.Lang.Date.format(),a=MO.Console.find(MO.FEnvironmentConsole).parse(a);MO.Console.find(MO.FHttpConsole).send(a).addLoadListener(this,this.onLoad)};MO.FEaiHistoryResourceModule_dispose=function(){this._provinces=MO.Lang.Object.dispose(this._provinces);this._citys=MO.Lang.Object.dispose(this._citys);this._milestones=MO.Lang.Object.dispose(this._milestones);this._dates=MO.Lang.Object.dispose(this._dates);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiMapBoundaryData=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.ME3dBoundaryPolygon);a.construct=MO.FEaiMapBoundaryData_construct;a.unserialize=MO.FEaiMapBoundaryData_unserialize;a.dispose=MO.FEaiMapBoundaryData_dispose;return a};MO.FEaiMapBoundaryData_construct=function(){this.__base.FObject.construct.call(this);this.__base.ME3dBoundaryPolygon.construct.call(this)};
MO.FEaiMapBoundaryData_unserialize=function(a){for(var b=0,c=this._positionCount=a.readInt32(),d=this._positions=new Float32Array(2*c),e=0;e<c;e++)d[b++]=a.readFloat(),d[b++]=a.readFloat();b=this._indexCount=a.readInt32();c=this._indexes=new Uint16Array(b);for(e=0;e<b;e++)c[e]=a.readUint16()};MO.FEaiMapBoundaryData_dispose=function(){this.__base.ME3dBoundaryPolygon.dispose.call(this);this.__base.FObject.dispose.call(this)};
MO.FEaiMapCountryData=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a._label=MO.Class.register(a,new MO.AGetSet("_label"));a._boundaries=MO.Class.register(a,new MO.AGetter("_boundaries"));a._provinces=MO.Class.register(a,new MO.AGetter("_provinces"));a.construct=MO.FEaiMapCountryData_construct;a.unserialize=MO.FEaiMapCountryData_unserialize;a.dispose=MO.FEaiMapCountryData_dispose;return a};
MO.FEaiMapCountryData_construct=function(){this.__base.FObject.construct.call(this);this._boundaries=new MO.TObjects;this._provinces=new MO.TDictionary};
MO.FEaiMapCountryData_unserialize=function(a){this._code=a.readString();this._label=a.readString();var b=a.readInt32();if(0<b)for(var c=this._boundaries,d=0;d<b;d++){var e=MO.Class.create(MO.FEaiMapBoundaryData);e.unserialize(a);c.push(e)}b=a.readInt32();if(0<b)for(c=this._provinces,d=0;d<b;d++)e=MO.Class.create(MO.FEaiMapProvinceData),e.unserialize(a),c.set(e.code(),e)};
MO.FEaiMapCountryData_dispose=function(){this._boundaries=MO.Lang.Object.dispose(this._boundaries);this._provinces=MO.Lang.Object.dispose(this._provinces);this.__base.FObject.dispose.call(this)};MO.FEaiMapCountryResource=function(a){a=MO.Class.inherits(this,a,MO.FResourcePackage);a._data=MO.Class.register(a,new MO.AGetter("_data"));a.construct=MO.FEaiMapCountryResource_construct;a.unserialize=MO.FEaiMapCountryResource_unserialize;a.dispose=MO.FEaiMapCountryResource_dispose;return a};
MO.FEaiMapCountryResource_construct=function(){this.__base.FResourcePackage.construct.call(this);this._data=MO.Class.create(MO.FEaiMapCountryData)};MO.FEaiMapCountryResource_unserialize=function(a){this._data.unserialize(a)};MO.FEaiMapCountryResource_dispose=function(){this._data=MO.Lang.Object.dispose(this._data);this.__base.FResourcePackage.dispose.call(this)};
MO.FEaiMapProvinceData=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a._boundaries=MO.Class.register(a,new MO.AGetter("_boundaries"));a.construct=MO.FEaiMapProvinceData_construct;a.unserialize=MO.FEaiMapProvinceData_unserialize;a.dispose=MO.FEaiMapProvinceData_dispose;return a};MO.FEaiMapProvinceData_construct=function(){this.__base.FObject.construct.call(this);this._boundaries=new MO.TObjects};
MO.FEaiMapProvinceData_unserialize=function(a){this._code=a.readUint16();var b=a.readInt32();if(0<b)for(var c=this._boundaries,d=0;d<b;d++){var e=MO.Class.create(MO.FEaiMapBoundaryData);e.unserialize(a);c.push(e)}};MO.FEaiMapProvinceData_dispose=function(){this._boundaries=MO.Lang.Object.dispose(this._boundaries);this.__base.FObject.dispose.call(this)};
MO.FEaiMapResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule);a._world=MO.Class.register(a,new MO.AGetter("_world"));a._countries=MO.Class.register(a,new MO.AGetter("_countries"));a.construct=MO.FEaiMapResourceModule_construct;a.findCountryByCode=MO.FEaiMapResourceModule_findCountryByCode;a.loadCountry=MO.FEaiMapResourceModule_loadCountry;a.loadWorld=MO.FEaiMapResourceModule_loadWorld;a.dispose=MO.FEaiMapResourceModule_dispose;return a};
MO.FEaiMapResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._countries=new MO.TDictionary};MO.FEaiMapResourceModule_findCountryByCode=function(a){return this._countries.get(a)};MO.FEaiMapResourceModule_loadCountry=function(a){var b=this._countries,c=MO.Class.create(MO.FEaiMapCountryResource);c.setCode(a);c.setUri("{eai.resource}-{device.type}/map/country/"+a+".dat");c.load();b.set(a,c);return c};
MO.FEaiMapResourceModule_loadWorld=function(){var a=this._world=MO.Class.create(MO.FEaiMapWorldResource);a.load();return a};MO.FEaiMapResourceModule_dispose=function(){this._world=MO.Lang.Object.dispose(this._world);this._countries=MO.Lang.Object.dispose(this._countries,!0);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiMapWorldData=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._countries=MO.Class.register(a,new MO.AGetter("_countries"));a.construct=MO.FEaiMapWorldData_construct;a.unserialize=MO.FEaiMapWorldData_unserialize;a.dispose=MO.FEaiMapWorldData_dispose;return a};MO.FEaiMapWorldData_construct=function(){this.__base.FObject.construct.call(this);this._countries=new MO.TObjects};
MO.FEaiMapWorldData_unserialize=function(a){var b=a.readInt32();if(0<b)for(var c=this._countries,d=0;d<b;d++){var e=MO.Class.create(MO.FEaiMapCountryData);e.unserialize(a);c.push(e)}};MO.FEaiMapWorldData_dispose=function(){this._countries=MO.Lang.Object.dispose(this._countries);this.__base.FObject.dispose.call(this)};
MO.FEaiMapWorldResource=function(a){a=MO.Class.inherits(this,a,MO.FResourcePackage);a._uri="{eai.resource}-{device.type}/map/world.dat";a._data=MO.Class.register(a,new MO.AGetter("_data"));a.construct=MO.FEaiMapWorldResource_construct;a.unserialize=MO.FEaiMapWorldResource_unserialize;a.dispose=MO.FEaiMapWorldResource_dispose;return a};MO.FEaiMapWorldResource_construct=function(){this.__base.FResourcePackage.construct.call(this);this._data=MO.Class.create(MO.FEaiMapWorldData)};
MO.FEaiMapWorldResource_unserialize=function(a){this._data.unserialize(a)};MO.FEaiMapWorldResource_dispose=function(){this._data=MO.Lang.Object.dispose(this._data);this.__base.FResourcePackage.dispose.call(this)};
MO.FEaiProvinceResource=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.Uint16)]);a._name=MO.Class.register(a,[new MO.AGetter("_name"),new MO.APersistence("_name",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._typeCd=MO.Class.register(a,[new MO.AGetter("_typeCd"),new MO.APersistence("_typeCd",MO.EDataType.String)]);
a._displayOrder=MO.Class.register(a,[new MO.AGetter("_displayOrder"),new MO.APersistence("_displayOrder",MO.EDataType.Uint16)]);return a};
MO.FEaiProvinceResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule);a._provinceCodes=MO.Class.register(a,new MO.AGetter("_provinceCodes"));a._provinceNames=MO.Class.register(a,new MO.AGetter("_provinceNames"));a.construct=MO.FEaiProvinceResourceModule_construct;a.findByCode=MO.FEaiProvinceResourceModule_findByCode;a.findByName=MO.FEaiProvinceResourceModule_findByName;a.unserialize=MO.FEaiProvinceResourceModule_unserialize;a.dispose=MO.FEaiProvinceResourceModule_dispose;return a};
MO.FEaiProvinceResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._provinceCodes=new MO.TDictionary;this._provinceNames=new MO.TDictionary};MO.FEaiProvinceResourceModule_findByCode=function(a){return this._provinceCodes.get(a)};MO.FEaiProvinceResourceModule_findByName=function(a){return this._provinceNames.get(a)};
MO.FEaiProvinceResourceModule_unserialize=function(a){for(var b=this._provinceCodes,c=this._provinceNames,d=a.readInt32(),e=0;e<d;e++){var f=MO.Class.create(MO.FEaiProvinceResource);f.unserialize(a);b.set(f.code(),f);c.set(f.name(),f)}};MO.FEaiProvinceResourceModule_dispose=function(){this._provinceCodes=MO.Lang.Object.dispose(this._provinceCodes);this._provinceNames=MO.Lang.Object.dispose(this._provinceNames);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiRateResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._count=MO.Class.register(a,new MO.AGetter("_count"));a._colors=MO.Class.register(a,new MO.AGetter("_colors"));a.construct=MO.FEaiRateResource_construct;a.find=MO.FEaiRateResource_find;a.findRate=MO.FEaiRateResource_findRate;a.unserialize=MO.FEaiRateResource_unserialize;a.dispose=MO.FEaiRateResource_dispose;return a};MO.FEaiRateResource_construct=function(){this.__base.FObject.construct.call(this)};
MO.FEaiRateResource_find=function(a){a=parseInt(a);0>a&&(a=0);a>=this._count&&(a=this._count-1);return this._colors[a]};MO.FEaiRateResource_findRate=function(a){return this.find(a*this._count)};MO.FEaiRateResource_unserialize=function(a){for(var b=this._count=a.readInt32(),c=this._colors=new Uint32Array(b),d=0;d<b;d++)c[d]=a.readUint32()};MO.FEaiRateResource_dispose=function(){this._colors=null;this.__base.FObject.dispose.call(this)};
MO.FEaiRateResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiResourceModule);a._rates=MO.Class.register(a,new MO.AGetter("_rates"));a.construct=MO.FEaiRateResourceModule_construct;a.find=MO.FEaiRateResourceModule_find;a.unserialize=MO.FEaiRateResourceModule_unserialize;a.dispose=MO.FEaiRateResourceModule_dispose;return a};MO.FEaiRateResourceModule_construct=function(){this.__base.FEaiResourceModule.construct.call(this);this._rates=new MO.TObjects};MO.FEaiRateResourceModule_find=function(a){return this._rates.get(a)};
MO.FEaiRateResourceModule_unserialize=function(a){for(var b=this._count=a.readInt32(),c=0;c<b;c++){var d=MO.Class.create(MO.FEaiRateResource);d.unserialize(a);this._rates.push(d)}};MO.FEaiRateResourceModule_dispose=function(){this._rates=MO.Lang.Object.dispose(this._rates);this.__base.FEaiResourceModule.dispose.call(this)};
MO.FEaiResource=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetter("_code"));a.unserialize=MO.FEaiResource_unserialize;a.processLoad=MO.FEaiResource_processLoad;return a};MO.FEaiResource_unserialize=function(a){this._code=a.readUint16()};MO.FEaiResource_processLoad=function(){this._code=input.readUint16();this._cityCode=input.readUint16()};
MO.FEaiResourceConsole=function(a){a=MO.Class.inherits(this,a,MO.FConsole,MO.MPersistenceAble,MO.MListener);a._scopeCd=MO.EScope.Global;a._rateModule=MO.Class.register(a,new MO.AGetter("_rateModule"));a._provinceModule=MO.Class.register(a,new MO.AGetter("_provinceModule"));a._cityModule=MO.Class.register(a,new MO.AGetter("_cityModule"));a._cardModule=MO.Class.register(a,new MO.AGetter("_cardModule"));a._departmentModule=MO.Class.register(a,new MO.AGetter("_departmentModule"));a._historyModule=MO.Class.register(a,
new MO.AGetter("_historyModule"));a._mapModule=MO.Class.register(a,new MO.AGetter("_mapModule"));a._loadListeners=MO.Class.register(a,new MO.AListener("_loadListeners",MO.EEvent.Load));a._looper=null;a._thread=null;a._interval=100;a.onLoad=MO.FEaiResourceConsole_onLoad;a.onProcess=MO.FEaiResourceConsole_onProcess;a.construct=MO.FEaiResourceConsole_construct;a.unserialize=MO.FEaiResourceConsole_unserialize;a.load=MO.FEaiResourceConsole_load;a.dispose=MO.FEaiResourceConsole_dispose;return a};
MO.FEaiResourceConsole_onProcess=function(){var a=this._looper;for(a.record();a.next();)a.current().processLoad()&&a.removeCurrent()};MO.FEaiResourceConsole_onLoad=function(a){this.unserializeBuffer(a.content,!0);a=MO.Memory.alloc(MO.SEvent);this.processLoadListener(a);MO.Memory.free(a)};
MO.FEaiResourceConsole_construct=function(){this.__base.FConsole.construct.call(this);this._looper=new MO.TLooper;this._rateModule=MO.Class.create(MO.FEaiRateResourceModule);this._provinceModule=MO.Class.create(MO.FEaiProvinceResourceModule);var a=this._cityModule=MO.Class.create(MO.FEaiCityResourceModule);this._cardModule=MO.Class.create(MO.FEaiCardResourceModule);this._departmentModule=MO.Class.create(MO.FEaiDepartmentResourceModule);this._historyModule=MO.Class.create(MO.FEaiHistoryResourceModule);
this._mapModule=MO.Class.create(MO.FEaiMapResourceModule);a.setResourceConsole(this);a=this._thread=MO.Class.create(MO.FThread);a.setInterval(this._interval);a.addProcessListener(this,this.onProcess);MO.Console.find(MO.FThreadConsole).start(a)};MO.FEaiResourceConsole_unserialize=function(a){this._rateModule.unserialize(a);this._provinceModule.unserialize(a);this._cityModule.unserialize(a);this._cardModule.unserialize(a);this._departmentModule.unserialize(a)};
MO.FEaiResourceConsole_load=function(a){a=MO.Console.find(MO.FEnvironmentConsole).parseUrl(a);MO.Console.find(MO.FHttpConsole).send(a).addLoadListener(this,this.onLoad)};
MO.FEaiResourceConsole_dispose=function(a){this._rateModule=MO.Lang.Object.dispose(this._rateModule);this._provinceModule=MO.Lang.Object.dispose(this._provinceModule);this._cityModule=MO.Lang.Object.dispose(this._cityModule);this._cardModule=MO.Lang.Object.dispose(this._cardModule);this._departmentModule=MO.Lang.Object.dispose(this._departmentModule);this._historyModule=MO.Lang.Object.dispose(this._historyModule);this._mapModule=MO.Lang.Object.dispose(this._mapModule);this.__base.FConsole.dispose.call(this)};
MO.FEaiResourceModule=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=MO.Class.register(a,new MO.AGetSet("_code"));a.construct=MO.FEaiResourceModule_construct;a.dispose=MO.FEaiResourceModule_dispose;return a};MO.FEaiResourceModule_construct=function(){this.__base.FObject.construct.call(this)};MO.FEaiResourceModule_dispose=function(){this.__base.FObject.dispose.call(this)};MO.EEaiVerificationMode=new function(){this.None="vmode.none";this.Token="vmode.token";return this};
MO.FEaiFinancialData=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._provinceCode=MO.Class.register(a,new MO.AGetter("_provinceCode"));a._code=MO.Class.register(a,new MO.AGetter("_code"));a._label=MO.Class.register(a,new MO.AGetter("_label"));a._level=MO.Class.register(a,new MO.AGetter("_level"));a._location=MO.Class.register(a,new MO.AGetter("_location"));a.construct=MO.FEaiFinancialData_construct;a.unserialize=MO.FEaiFinancialData_unserialize;a.dispose=MO.FEaiFinancialData_dispose;return a};
MO.FEaiFinancialData_construct=function(){this.__base.FObject.construct.call(this);this._location=new MO.SPoint3};MO.FEaiFinancialData_unserialize=function(a){this._provinceCode=a.readUint16();this._code=a.readUint16();this._label=a.readString();this._level=a.readUint16();this._location.unserialize2(a)};MO.FEaiFinancialData_dispose=function(){this._location=MO.Lang.Object.dispose(this._location);this.__base.FObject.dispose.call(this)};
MO.FEaiFinancialData=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._provinceCode=MO.Class.register(a,new MO.AGetter("_provinceCode"));a._code=MO.Class.register(a,new MO.AGetter("_code"));a._label=MO.Class.register(a,new MO.AGetter("_label"));a._level=MO.Class.register(a,new MO.AGetter("_level"));a._location=MO.Class.register(a,new MO.AGetter("_location"));a.construct=MO.FEaiFinancialData_construct;a.unserialize=MO.FEaiFinancialData_unserialize;a.dispose=MO.FEaiFinancialData_dispose;return a};
MO.FEaiFinancialData_construct=function(){this.__base.FObject.construct.call(this);this._location=new MO.SPoint3};MO.FEaiFinancialData_unserialize=function(a){this._provinceCode=a.readUint16();this._code=a.readUint16();this._label=a.readString();this._level=a.readUint16();this._location.unserialize2(a)};MO.FEaiFinancialData_dispose=function(){this._location=MO.Lang.Object.dispose(this._location);this.__base.FObject.dispose.call(this)};
MO.FEaiFinancialMarketerDynamic=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._provinceCode=MO.Class.register(a,new MO.AGetter("_provinceCode"));a._code=MO.Class.register(a,new MO.AGetter("_code"));a._label=MO.Class.register(a,new MO.AGetter("_label"));a._level=MO.Class.register(a,new MO.AGetter("_level"));a._location=MO.Class.register(a,new MO.AGetter("_location"));a.construct=MO.FEaiFinancialMarketerDynamic_construct;a.unserialize=MO.FEaiFinancialMarketerDynamic_unserialize;a.dispose=MO.FEaiFinancialMarketerDynamic_dispose;
return a};MO.FEaiFinancialMarketerDynamic_construct=function(){this.__base.FObject.construct.call(this);this._location=new MO.SPoint3};MO.FEaiFinancialMarketerDynamic_unserialize=function(a){this._provinceCode=a.readUint16();this._code=a.readUint16();this._label=a.readString();this._level=a.readUint16();this._location.unserialize2(a)};MO.FEaiFinancialMarketerDynamic_dispose=function(){this._location=MO.Lang.Object.dispose(this._location);this.__base.FObject.dispose.call(this)};
MO.FEaiLogic=function(a){a=MO.Class.inherits(this,a,MO.FObject);a._code=null;a._parameters=null;a._urlParameters=null;a.construct=MO.FEaiLogic_construct;a.makeUrl=MO.FEaiLogic_makeUrl;a.prepareParemeters=MO.FEaiLogic_prepareParemeters;a.send=MO.FEaiLogic_send;a.sendService=MO.FEaiLogic_sendService;a.dispose=MO.FEaiLogic_dispose;return a};MO.FEaiLogic_construct=function(){this.__base.FObject.construct.call(this);this._parameters=new MO.TAttributes;this._urlParameters=new MO.TAttributes};
MO.FEaiLogic_prepareParemeters=function(){var a=this._parameters;a.clear();return a};MO.FEaiLogic_makeUrl=function(a,b){var c="{eai.host.service}/eai/"+this._code+"/"+a,c=MO.Console.find(MO.FEnvironmentConsole).parse(c);if(b){var d=MO.Console.find(MO.FEaiLogicConsole).system(),e=d.sign(),f=d.currentDate(),d=f.format(),g=this._urlParameters;g.clear();g.set("tick",f.format());g.split(b,"=","&");g.sortByName();f=g.joinValue();e=hex_md5(f+e);c+="?"+b+"&tick="+d+"&sign="+e}return c};
MO.FEaiLogic_send=function(a,b,c,d){a=this.makeUrl(a,b);a=MO.Console.find(MO.FJsonConsole).sendAsync(a);a.addLoadListener(c,d);return a};
MO.FEaiLogic_sendService=function(a,b,c,d){a=MO.Console.find(MO.FEnvironmentConsole).parse(a);for(var e=b.count(),f=0;f<e;f++){var g=b.name(f),h=b.value(f);a+="&"+g+"="+h}f=MO.Console.find(MO.FEaiLogicConsole).system();e=f.token();f=f.currentDate().daySecond();b.set("tick",f);a+="&tick="+f;b.sortByName();b=b.joinValue();b=MO.Lang.String.calculateHash(b,e);a+="&sign="+b;e=MO.Desktop.application().findSessionId();MO.Lang.String.isEmpty(e)||(a+="&sid="+e);e=MO.Console.find(MO.FHttpConsole).alloc();e.setAsynchronous(!0);
e.attributes().set("sign",b);e.addLoadListener(c,d);e.send(a)};MO.FEaiLogic_dispose=function(){this._urlParameters=MO.Lang.Object.dispose(this._urlParameters);this.__base.FObject.dispose.call(this)};MO.FEaiLogicAchievement=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="achievement";a.doGroup=MO.FEaiLogicAchievement_doGroup;a.doSort=MO.FEaiLogicAchievement_doSort;a.doQuery=MO.FEaiLogicAchievement_doQuery;return a};
MO.FEaiLogicAchievement_doGroup=function(a,b){return this.send("group",null,a,b)};MO.FEaiLogicAchievement_doSort=function(a,b){return this.send("sort",null,a,b)};MO.FEaiLogicAchievement_doQuery=function(a,b){return this.send("query",null,a,b)};
MO.FEaiLogicConsole=function(a){a=MO.Class.inherits(this,a,MO.FConsole);a._system=MO.Class.register(a,new MO.AGetter("_system"));a._organization=MO.Class.register(a,new MO.AGetter("_organization"));a._achievement=MO.Class.register(a,new MO.AGetter("_achievement"));a._schedule=MO.Class.register(a,new MO.AGetter("_schedule"));a._statistics=MO.Class.register(a,new MO.AGetter("_statistics"));a._jsonTableData=MO.Class.register(a,new MO.AGetter("_jsonTableData"));a._jsonTimerLineData=MO.Class.register(a,
new MO.AGetter("_jsonTimerLineData"));a._jsonSystem=MO.Class.register(a,new MO.AGetter("_jsonSystem"));a._thread=null;a._interval=6E5;a.onProcess=MO.FEaiLogicConsole_onProcess;a.construct=MO.FEaiLogicConsole_construct;a.dispose=MO.FEaiLogicConsole_dispose;return a};MO.FEaiLogicConsole_onProcess=function(a){this._system.refresh()};
MO.FEaiLogicConsole_construct=function(){this.__base.FConsole.construct.call(this);this._system=MO.Class.create(MO.FEaiLogicSystem);this._organization=MO.Class.create(MO.FEaiLogicOrganization);this._achievement=MO.Class.create(MO.FEaiLogicAchievement);this._schedule=MO.Class.create(MO.FEaiLogicSchedule);this._statistics=MO.Class.create(MO.FEaiLogicStatistics);this._jsonTableData=MO.Class.create(MO.FEaiLogicJsonTableData);this._jsonSystem=MO.Class.create(MO.FEaiLogicJsonSystem);this._jsonTimerLineData=
MO.Class.create(MO.FEaiLogicJsonTimerLineData);var a=this._thread=MO.Class.create(MO.FThread);a.setInterval(this._interval);a.addProcessListener(this,this.onProcess);MO.Console.find(MO.FThreadConsole).start(a)};
MO.FEaiLogicConsole_dispose=function(){this._system=MO.Lang.Object.dispose(this._system);this._organization=MO.Lang.Object.dispose(this._organization);this._achievement=MO.Lang.Object.dispose(this._achievement);this._schedule=MO.Lang.Object.dispose(this._schedule);this._statistics=MO.Lang.Object.dispose(this._statistics);this._jsonTableData=MO.Lang.Object.dispose(this._jsonTableData);this._jsonSystem=MO.Lang.Object.dispose(this._jsonSystem);this.__base.FConsole.dispose.call(this)};
MO.FEaiLogicInfoCustomerDynamic=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentCount=MO.Class.register(a,[new MO.AGetter("_investmentCount"),new MO.APersistence("_investmentCount",MO.EDataType.Double)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Int32)]);
a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);a._rankUnits=MO.Class.register(a,[new MO.AGetter("_rankUnits"),new MO.APersistence("_rankUnits",MO.EDataType.Objects,MO.FEaiLogicInfoCustomerDynamicRankUnit)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiLogicInfoCustomerDynamicUnit)]);return a};
MO.FEaiLogicInfoCustomerDynamicRankUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.String)]);a._phone=MO.Class.register(a,[new MO.AGetter("_phone"),new MO.APersistence("_phone",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",
MO.EDataType.Double)]);return a};
MO.FEaiLogicInfoCustomerDynamicUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.String)]);a._phone=MO.Class.register(a,[new MO.AGetter("_phone"),new MO.APersistence("_phone",
MO.EDataType.String)]);a._first=MO.Class.register(a,[new MO.AGetter("_first"),new MO.APersistence("_first",MO.EDataType.Boolean)]);a._number=MO.Class.register(a,[new MO.AGetter("_number"),new MO.APersistence("_number",MO.EDataType.Uint16)]);a._modelChanged=MO.Class.register(a,[new MO.AGetter("_modelChanged"),new MO.APersistence("_modelChanged",MO.EDataType.Boolean)]);a._modelPriorCode=MO.Class.register(a,[new MO.AGetter("_modelPriorCode"),new MO.APersistence("_modelPriorCode",MO.EDataType.String)]);
a._modelPriorLabel=MO.Class.register(a,[new MO.AGetter("_modelPriorLabel"),new MO.APersistence("_modelPriorLabel",MO.EDataType.String)]);a._modelCode=MO.Class.register(a,[new MO.AGetter("_modelCode"),new MO.APersistence("_modelCode",MO.EDataType.String)]);a._modelLabel=MO.Class.register(a,[new MO.AGetter("_modelLabel"),new MO.APersistence("_modelLabel",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._gain=
MO.Class.register(a,[new MO.AGetter("_gain"),new MO.APersistence("_gain",MO.EDataType.Double)]);a._bankGain=MO.Class.register(a,[new MO.AGetter("_bankGain"),new MO.APersistence("_bankGain",MO.EDataType.Double)]);return a};
MO.FEaiLogicInfoCustomerTrend=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Uint32)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiLogicInfoCustomerTrendUnit)]);
return a};MO.FEaiLogicInfoCustomerTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Uint32)]);return a};
MO.FEaiLogicInfoTender=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiLogicInfoTrendUnit)]);return a};
MO.FEaiLogicInfoTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._rate=MO.Class.register(a,[new MO.AGetter("_rate"),new MO.APersistence("_rate",MO.EDataType.Float)]);a._tenderInvesment=MO.Class.register(a,[new MO.AGetter("_tenderInvesment"),new MO.APersistence("_tenderInvesment",
MO.EDataType.Double)]);a._tenderTotal=MO.Class.register(a,[new MO.AGetter("_tenderTotal"),new MO.APersistence("_tenderTotal",MO.EDataType.Double)]);a._invesmentDay=MO.Class.register(a,[new MO.AGetter("_invesmentDay"),new MO.APersistence("_invesmentDay",MO.EDataType.Double)]);a._invesmentTotal=MO.Class.register(a,[new MO.AGetter("_invesmentTotal"),new MO.APersistence("_invesmentTotal",MO.EDataType.Double)]);return a};
MO.FEaiLogicOrganization=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="organization";a._pIdMIndexDict=MO.Class.register(a,new MO.AGetter("_pIdMIndexDict"));a._cityIdNameDict=MO.Class.register(a,new MO.AGetter("_cityIdNameDict"));a._provinceColors=MO.Class.register(a,new MO.AGetter("_provinceColors"));a.doFetch=MO.FEaiLogicOrganization_doFetch;a.getMeshIndex=MO.FEaiLogicOrganization_getMeshIndex;a.construct=MO.FEaiLogicOrganization_construct;return a};
MO.FEaiLogicOrganization_construct=function(){this.__base.FEaiLogic.construct.call(this);var a=this._pIdMIndexDict=new MO.TDictionary;a.set(11,6);a.set(12,7);a.set(13,5);a.set(14,8);a.set(15,2);a.set(21,4);a.set(22,3);a.set(23,1);a.set(31,-1);a.set(32,21);a.set(33,22);a.set(34,20);a.set(35,30);a.set(36,23);a.set(37,9);a.set(41,10);a.set(42,19);a.set(43,29);a.set(44,24);a.set(45,25);a.set(46,0);a.set(50,18);a.set(51,17);a.set(52,26);a.set(53,27);a.set(54,16);a.set(61,12);a.set(62,13);a.set(63,15);
a.set(64,11);a.set(65,14);a.set(71,28);a.set(81,-1);a.set(82,-1);this._cityIdNameDict=new MO.TDictionary;a=this._provinceColors=new MO.TObjects;a.push(new MO.SColor4(.25,.5,.6));a.push(new MO.SColor4(.3,.6,.75));a.push(new MO.SColor4(.35,.7,.8));a.push(new MO.SColor4(.4,.75,.85));a.push(new MO.SColor4(.45,.85,1))};MO.FEaiLogicOrganization_doFetch=function(a,b){return this.send("fetch",null,a,b)};MO.FEaiLogicOrganization_getMeshIndex=function(a){return this.pIdMIndexDict().value(a)};
MO.FEaiLogicOrganization_getMeshIndex=function(a){return this.cityIdNameDict().value(a)};MO.FEaiLogicSchedule=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="schedule";a.doFetch=MO.FEaiLogicSchedule_doFetch;return a};MO.FEaiLogicSchedule_doFetch=function(a,b){return this.send("fetch",null,a,b)};
MO.FEaiLogicStatistics=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="statistics";a._tender=MO.Class.register(a,new MO.AGetter("_tender"));a._achievement=MO.Class.register(a,new MO.AGetter("_achievement"));a._customer=MO.Class.register(a,new MO.AGetter("_customer"));a._marketer=MO.Class.register(a,new MO.AGetter("_marketer"));a._department=MO.Class.register(a,new MO.AGetter("_department"));a.construct=MO.FEaiLogicStatistics_construct;a.calculateAmountLevel=MO.FEaiLogicStatistics_calculateAmountLevel;
a.doPerformenceDynamic=MO.FEaiLogicStatistics_doPerformenceDynamic;a.dispose=MO.FEaiLogicStatistics_dispose;return a};MO.FEaiLogicStatistics_construct=function(){this.__base.FEaiLogic.construct.call(this);this._tender=MO.Class.create(MO.FEaiLogicStatisticsTender);this._achievement=MO.Class.create(MO.FEaiLogicStatisticsAchievement);this._customer=MO.Class.create(MO.FEaiLogicStatisticsCustomer);this._marketer=MO.Class.create(MO.FEaiLogicStatisticsMarketer);this._department=MO.Class.create(MO.FEaiLogicStatisticsDepartment)};
MO.FEaiLogicStatistics_calculateAmountLevel=function(a){return 5E6<=a?5:1E6<=a?4:1E5<=a?3:1E4<=a?2:1E3<=a?1:0};MO.FEaiLogicStatistics_doPerformenceDynamic=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.marketer.wv?do=dynamic",e,a,b)};
MO.FEaiLogicStatistics_dispose=function(){this._tender=MO.Lang.Object.dispose(this._tender);this._achievement=MO.Lang.Object.dispose(this._achievement);this._customer=MO.Lang.Object.dispose(this._customer);this._marketer=MO.Lang.Object.dispose(this._marketer);this._department=MO.Lang.Object.dispose(this._department);this.__base.FEaiLogic.dispose.call(this)};
MO.FEaiLogicStatisticsAchievement=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a.doDynamic=MO.FEaiLogicStatisticsAchievement_doDynamic;return a};MO.FEaiLogicStatisticsAchievement_doDynamic=function(a,b,c,d){c=this.prepareParemeters();this.sendService("{eai.logic.service}/eai.financial.achievement.wv?do=dynamic",c,a,b)};
MO.FEaiLogicStatisticsCustomer=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._customerDynamicFirst=!0;a.doCustomerDynamic=MO.FEaiLogicStatisticsCustomer_doCustomerDynamic;a.doCustomerTrend=MO.FEaiLogicStatisticsCustomer_doCustomerTrend;a.doProvince=MO.FEaiLogicStatisticsCustomer_doProvince;return a};
MO.FEaiLogicStatisticsCustomer_doCustomerDynamic=function(a,b,c,d){var e=this._customerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.customer.wv?do=dynamic",f,a,b);this._customerDynamicFirst=!1};MO.FEaiLogicStatisticsCustomer_doCustomerTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.customer.wv?do=trend",e,a,b)};
MO.FEaiLogicStatisticsCustomer_doProvince=function(a,b,c,d){var e=this.prepareParemeters();e.setNvl("begin",c);e.setNvl("end",d);this.sendService("{eai.logic.service}/eai.financial.customer.wv?do=province",e,a,b)};
MO.FEaiLogicStatisticsDepartment=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._customerDynamicFirst=!0;a._marketerDynamicFirst=!0;a._departmentDynamicFirst=!0;a.doOrganization=MO.FEaiLogicStatisticsDepartment_doOrganization;a.doCustomerDynamic=MO.FEaiLogicStatisticsDepartment_doCustomerDynamic;a.doCustomerTrend=MO.FEaiLogicStatisticsDepartment_doCustomerTrend;a.doMarketerDynamic=MO.FEaiLogicStatisticsDepartment_doMarketerDynamic;a.doMarketerTrend=MO.FEaiLogicStatisticsDepartment_doMarketerTrend;
a.doDepartmentDynamic=MO.FEaiLogicStatisticsDepartment_doDepartmentDynamic;a.doDepartmentTrend=MO.FEaiLogicStatisticsDepartment_doDepartmentTrend;return a};MO.FEaiLogicStatisticsDepartment_doOrganization=function(a,b,c){var d=this.prepareParemeters();d.set("level",c);this.sendService("{eai.logic.service}/eai.financial.department.marketer.wv?do=organization",d,a,b);this._customerDynamicFirst=!1};
MO.FEaiLogicStatisticsDepartment_doCustomerDynamic=function(a,b,c,d){var e=this._customerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.customer.wv?do=dynamic",f,a,b);this._customerDynamicFirst=!1};
MO.FEaiLogicStatisticsDepartment_doCustomerTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.customer.wv?do=trend",e,a,b)};
MO.FEaiLogicStatisticsDepartment_doMarketerDynamic=function(a,b,c,d){var e=this._marketerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.marketer.wv?do=dynamic",f,a,b);this._marketerDynamicFirst=!1};
MO.FEaiLogicStatisticsDepartment_doMarketerTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.marketer.wv?do=trend",e,a,b)};MO.FEaiLogicStatisticsDepartment_doDepartmentDynamic=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.department.wv?do=dynamic",e,a,b)};
MO.FEaiLogicStatisticsDepartment_doDepartmentTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.department.department.wv?do=trend",e,a,b)};
MO.FEaiLogicStatisticsMarketer=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._customerDynamicFirst=!0;a._marketerDynamicFirst=!0;a.doCustomerDynamic=MO.FEaiLogicStatisticsMarketer_doCustomerDynamic;a.doCustomerTrend=MO.FEaiLogicStatisticsMarketer_doCustomerTrend;a.doMarketerDynamic=MO.FEaiLogicStatisticsMarketer_doMarketerDynamic;a.doMarketerTrend=MO.FEaiLogicStatisticsMarketer_doMarketerTrend;return a};
MO.FEaiLogicStatisticsMarketer_doCustomerDynamic=function(a,b,c,d){var e=this._customerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.marketer.customer.wv?do=dynamic",f,a,b);this._customerDynamicFirst=!1};
MO.FEaiLogicStatisticsMarketer_doCustomerTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.marketer.customer.wv?do=trend",e,a,b)};
MO.FEaiLogicStatisticsMarketer_doMarketerDynamic=function(a,b,c,d){var e=this._marketerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.marketer.marketer.wv?do=dynamic",f,a,b);this._marketerDynamicFirst=!1};
MO.FEaiLogicStatisticsMarketer_doMarketerTrend=function(a,b,c,d){var e=this.prepareParemeters();e.set("begin",c);e.set("end",d);this.sendService("{eai.logic.service}/eai.financial.marketer.marketer.wv?do=trend",e,a,b)};MO.FEaiLogicStatisticsTender=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a.doInfo=MO.FEaiLogicStatisticsTender_doInfo;a.doDynamic=MO.FEaiLogicStatisticsTender_doDynamic;return a};
MO.FEaiLogicStatisticsTender_doInfo=function(a,b){var c=this.prepareParemeters();this.sendService("{eai.logic.service}/eai.financial.tender.wv?do=info",c,a,b)};MO.FEaiLogicStatisticsTender_doDynamic=function(a,b,c,d){var e=this._customerDynamicFirst,f=this.prepareParemeters();e&&f.set("first",e);f.set("begin",c);f.set("end",d);this.sendService("{eai.logic.service}/eai.financial.tender.wv?do=dynamic",f,a,b);this._customerDynamicFirst=!1};
MO.FEaiLogicSystem=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="system";a._ready=!1;a._info=null;a._token=MO.Class.register(a,new MO.AGetter("_token"),0);a._currentDate=null;a._localDate=null;a._systemDate=MO.Class.register(a,new MO.AGetter("_systemDate"));a.onInfo=MO.FEaiLogicSystem_onInfo;a.construct=MO.FEaiLogicSystem_construct;a.doInfo=MO.FEaiLogicSystem_doInfo;a.doDeviceAccess=MO.FEailogicSystem_doDeviceAccess;a.testReady=MO.FEaiLogicSystem_testReady;a.currentDate=MO.FEaiLogicSystem_currentDate;
a.refresh=MO.FEaiLogicSystem_refresh;a.dispose=MO.FEaiLogicSystem_dispose;return a};MO.FEaiLogicSystem_onInfo=function(a){var b=this._info;b.unserializeSignBuffer(a.sign,a.content,!0);this._token=b.token();this._localDate.setNow();this._systemDate.parse(b.date());this._ready=!0};MO.FEaiLogicSystem_construct=function(){this.__base.FEaiLogic.construct.call(this);this._info=MO.Class.create(MO.FEaiLogicSystemInfo);this._currentDate=new MO.TDate;this._localDate=new MO.TDate;this._systemDate=new MO.TDate};
MO.FEaiLogicSystem_doInfo=function(a,b){var c=MO.Console.find(MO.FEnvironmentConsole).findValue(MO.EEaiVerificationMode.Token);1==MO.Console.find(MO.FEnvironmentConsole).findValue(MO.EEaiVerificationMode.None)||0==c?this._ready=!0:(c=this.prepareParemeters(),this.sendService("{eai.logic.service}/eai.system.wv?do=info",c,a,b))};
MO.FEailogicSystem_doDeviceAccess=function(){var a=new MO.TXmlNode("Configuration"),b=MO.Window.Browser.agent(),c=a.create("Browser");MO.Window.Browser.saveConfig(c);var d=MO.Desktop.application().desktop();if(d&&(c=c.create("Desktop"),d.canvas2d()&&c.create("Context2d"),d=d.canvas3d())){var d=d.graphicContext(),e=d.parameter("VERSION");e&&(b+="|"+e);(e=d.parameter("SHADING_LANGUAGE_VERSION"))&&(b+="|"+e);(e=d.parameter("UNMASKED_RENDERER_WEBGL"))&&(b+="|"+e);c=c.create("Context3d");d.saveConfig(c)}a.set("identity_code",
b);MO.Console.find(MO.FServiceConsole).send("cloud.info.device","access",a)};MO.FEaiLogicSystem_testReady=function(){return this._ready};MO.FEaiLogicSystem_currentDate=function(){var a=this._currentDate,b=this._systemDate.get()-this._localDate.get();a.set(MO.Timer.current()+b);return a};MO.FEaiLogicSystem_refresh=function(){return this.doInfo(this,this.onInfo)};
MO.FEaiLogicSystem_dispose=function(){this._info=MO.Lang.Object.dispose(this._info);this._localDate=MO.Lang.Object.dispose(this._localDate);this._systemDate=MO.Lang.Object.dispose(this._systemDate);this.__base.FEaiLogic.consturct.call(this)};
MO.FEaiLogicSystemInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._sessionId=MO.Class.register(a,[new MO.AGetter("_sessionId"),new MO.APersistence("_sessionId",MO.EDataType.String)]);a._date=MO.Class.register(a,[new MO.AGetter("_date"),new MO.APersistence("_date",MO.EDataType.String)]);a._token=MO.Class.register(a,[new MO.AGetter("_token"),new MO.APersistence("_token",MO.EDataType.Uint32)]);return a};
MO.FEaiCity3dEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._provinceEntity=MO.Class.register(a,new MO.AGetSet("_provinceEntity"));a._visible=MO.Class.register(a,new MO.AGetter("_visible"),!0);a._location=MO.Class.register(a,new MO.AGetter("_location"));a._size=MO.Class.register(a,new MO.AGetter("_size"));a._color=MO.Class.register(a,new MO.AGetter("_color"));a._range=MO.Class.register(a,new MO.AGetter("_range"),1);a._rangeColor=MO.Class.register(a,new MO.AGetter("_rangeColor"));a._normalScale=
MO.Class.register(a,new MO.AGetSet("_normalScale"),1);a._cityTotal=0;a._investmentCount=0;a._investmentTotal=MO.Class.register(a,new MO.AGetSet("_investmentTotal"),0);a._investmentLevel=0;a._investmentLast=0;a._investmentRateTotal=0;a._investmentRate=0;a._investmentAlpha=0;a._investmentRange=0;a._investmentDirection=1;a._stage=MO.Class.register(a,new MO.AGetSet("_stage"));a._renderable=MO.Class.register(a,new MO.AGetSet("_renderable"));a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._inputPoint=
null;a._outputPoint=null;a.construct=MO.FEaiCity3dEntity_construct;a.calculateScreenPosition=MO.FEaiCity3dEntity_calculateScreenPosition;a.build=MO.FEaiCity3dEntity_build;a.addInvestmentTotal=MO.FEaiCity3dEntity_addInvestmentTotal;a.reset=MO.FEaiCity3dEntity_reset;a.update=MO.FEaiCity3dEntity_update;a.process=MO.FEaiCity3dEntity_process;a.dispose=MO.FEaiCity3dEntity_dispose;return a};
MO.FEaiCity3dEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._location=new MO.SPoint2;this._size=new MO.SSize2;this._color=new MO.SColor4(1,1,1,1);this._rangeColor=new MO.SColor4(0,0,0,0);this._inputPoint=new MO.SPoint3;this._outputPoint=new MO.SPoint3};
MO.FEaiCity3dEntity_calculateScreenPosition=function(){var a=this._stage.region().calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),b=this._renderable.matrix(),c=MO.Lang.Math.matrix;c.identity();c.append(b);c.append(a);this._inputPoint.set(this._location.x,this._location.y,0);c.transformPoint3(this._inputPoint,this._outputPoint);return this._outputPoint};MO.FEaiCity3dEntity_build=function(a){this._location.assign(this._data.location());this._size.set(2,2)};
MO.FEaiCity3dEntity_addInvestmentTotal=function(a,b){this._investmentCount++;this._investmentTotal+=b;if(!(b<this._investmentLast)){var c=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.InvestmentRange).findRate(b/2E5);this._color.set(1,1,1,1);this._rangeColor.setInteger(c);this._rangeColor.alpha=1;this._investmentLast=b;this._investmentRate=this._investmentRateTotal=1E5*(a+1);this._investmentRange=Math.log(b*b)/10;this._investmentAlpha=8;this._visible=!0}};
MO.FEaiCity3dEntity_reset=function(){this._visible=!1;this._cityTotal=0;this._color.set(0,0,0,0);this._rangeColor.set(0,0,0,0)};
MO.FEaiCity3dEntity_update=function(a){this._color.set(1,1,1,1);var b=a.marketerCount(),c=1;this._rangeColor.set(1,1,1,1);a&&(this._cityTotal=b);a=this._cityTotal;0<a&&(this._visible=!0);MO.Console.find(MO.FEaiResourceConsole).historyModule();c=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Map);a=2*Math.sqrt(a/1E3);b=c.findRate(a);c=2*a;a=MO.Lang.Float.toRange(a,0,1);this._rangeColor.setIntAlpha(b,2*a);this._range=MO.Lang.Float.toRange(Math.sqrt(c/100),1,2)};
MO.FEaiCity3dEntity_process=function(a){if(0<this._investmentRate)return a=this._investmentRate/this._investmentRateTotal,this._range=this._investmentRange*a,a=Math.min(this._investmentAlpha*a,1),this._color.alpha=a,this._rangeColor.alpha=a,this._investmentRate--,!0;this._investmentAlpha=this._investmentRange=this._investmentRate=this._investmentLast=0;return this._visible=!1};
MO.FEaiCity3dEntity_dispose=function(){this._location=MO.Lang.Object.dispose(this._location);this._size=MO.Lang.Object.dispose(this._size);this._color=MO.Lang.Object.dispose(this._color);this._rangeColor=MO.Lang.Object.dispose(this._rangeColor);this._inputPoint=MO.Lang.Object.dispose(this._inputPoint);this._outputPoint=MO.Lang.Object.dispose(this._outputPoint);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiCityEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._provinceEntity=MO.Class.register(a,new MO.AGetSet("_provinceEntity"));a._visible=MO.Class.register(a,new MO.AGetter("_visible"),!1);a._location=MO.Class.register(a,new MO.AGetter("_location"));a._size=MO.Class.register(a,new MO.AGetter("_size"));a._color=MO.Class.register(a,new MO.AGetter("_color"));a._range=MO.Class.register(a,new MO.AGetter("_range"),1);a._rangeColor=MO.Class.register(a,new MO.AGetter("_rangeColor"));a._cityTotal=
0;a._investmentCount=0;a._investmentTotal=MO.Class.register(a,new MO.AGetSet("_investmentTotal"),0);a._investmentLevel=0;a._investmentLast=0;a._investmentRateTotal=0;a._investmentRate=0;a._investmentAlpha=0;a._investmentRange=0;a._investmentDirection=1;a._stage=MO.Class.register(a,new MO.AGetSet("_stage"));a._renderable=MO.Class.register(a,new MO.AGetSet("_renderable"));a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._inputPoint=null;a._outputPoint=null;a.construct=MO.FEaiCityEntity_construct;
a.calculateScreenPosition=MO.FEaiCityEntity_calculateScreenPosition;a.build=MO.FEaiCityEntity_build;a.addInvestmentTotal=MO.FEaiCityEntity_addInvestmentTotal;a.reset=MO.FEaiCityEntity_reset;a.update=MO.FEaiCityEntity_update;a.process=MO.FEaiCityEntity_process;a.dispose=MO.FEaiCityEntity_dispose;return a};
MO.FEaiCityEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._location=new MO.SPoint2;this._size=new MO.SSize2;this._color=new MO.SColor4(0,0,0,0);this._rangeColor=new MO.SColor4(0,0,0,0);this._inputPoint=new MO.SPoint3;this._outputPoint=new MO.SPoint3};
MO.FEaiCityEntity_calculateScreenPosition=function(){var a=this._stage.region().calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),b=this._renderable.matrix(),c=MO.Lang.Math.matrix;c.identity();c.append(b);c.append(a);this._inputPoint.set(this._location.x,this._location.y,0);c.transformPoint3(this._inputPoint,this._outputPoint);return this._outputPoint};MO.FEaiCityEntity_build=function(a){this._location.assign(this._data.location());this._size.set(2,2)};
MO.FEaiCityEntity_addInvestmentTotal=function(a,b){this._investmentCount++;this._investmentTotal+=b;if(!(b<this._investmentLast)){var c=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.InvestmentRange).findRate(b/2E5);this._color.set(1,1,1,1);this._rangeColor.setInteger(c);this._rangeColor.alpha=1;this._investmentLast=b;this._investmentRate=this._investmentRateTotal=1E5*(a+1);this._investmentRange=Math.log(b*b)/10;this._investmentAlpha=8;this._visible=!0}};
MO.FEaiCityEntity_reset=function(){this._visible=!1;this._cityTotal=0;this._color.set(0,0,0,0);this._rangeColor.set(0,0,0,0)};
MO.FEaiCityEntity_update=function(a){var b=1;this._color.set(1,1,1,1);this._rangeColor.set(1,1,1,1);a&&(this._cityTotal=a.investmentTotal());a=this._cityTotal;0<a&&(this._visible=!0);var c=MO.Console.find(MO.FEaiResourceConsole).historyModule().investmentCityTotal(),b=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Map);a=4*Math.sqrt(a/c);c=b.findRate(a);b=6*a;a=MO.Lang.Float.toRange(a,0,1);this._rangeColor.setIntAlpha(c,.6*a);this._range=MO.Lang.Float.toRange(Math.sqrt(b),1,
6)};MO.FEaiCityEntity_process=function(a){if(0<this._investmentRate)return a=this._investmentRate/this._investmentRateTotal,this._range=this._investmentRange*a,a=Math.min(this._investmentAlpha*a,1),this._color.alpha=a,this._rangeColor.alpha=a,this._investmentRate--,!0;this._investmentAlpha=this._investmentRange=this._investmentRate=this._investmentLast=0;return this._visible=!1};
MO.FEaiCityEntity_dispose=function(){this._location=MO.Lang.Object.dispose(this._location);this._size=MO.Lang.Object.dispose(this._size);this._color=MO.Lang.Object.dispose(this._color);this._rangeColor=MO.Lang.Object.dispose(this._rangeColor);this._inputPoint=MO.Lang.Object.dispose(this._inputPoint);this._outputPoint=MO.Lang.Object.dispose(this._outputPoint);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiCityEntityModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntityModule);a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a.construct=MO.FEaiCityEntityModule_construct;a.findByCode=MO.FEaiCityEntityModule_findByCode;a.findByCard=MO.FEaiCityEntityModule_findByCard;a.push=MO.FEaiCityEntityModule_push;a.build=MO.FEaiCityEntityModule_build;a.linkProvinces=MO.FEaiCityEntityModule_linkProvinces;a.dispose=MO.FEaiCityEntityModule_dispose;return a};
MO.FEaiCityEntityModule_construct=function(){this.__base.FEaiEntityModule.construct.call(this);this._citys=new MO.TDictionary};MO.FEaiCityEntityModule_findByCode=function(a){return this._citys.get(a)};MO.FEaiCityEntityModule_findByCard=function(a){a=MO.Console.find(MO.FEaiResourceConsole).cardModule().findCityCode(a);return this._citys.get(a)};MO.FEaiCityEntityModule_push=function(a){var b=a.data().code();this._citys.set(b,a)};
MO.FEaiCityEntityModule_build=function(a,b){for(var c=MO.Console.find(MO.FEaiResourceConsole).cityModule().citys(),d=this._citys,e=c.count(),f=0;f<e;f++){var g=c.at(f),h=g.code();g.level();g.location();var k=MO.Class.create(MO.Runtime.nvl(b,MO.FEaiCityEntity));k.setData(g);k.build(this);d.set(h,k)}};
MO.FEaiCityEntityModule_linkProvinces=function(){for(var a=MO.Console.find(MO.FEaiEntityConsole).provinceModule(),b=this._citys,c=b.count(),d=0;d<c;d++){var e=b.at(d),f=e.data().provinceCode(),f=a.findByCode(f);e.setProvinceEntity(f)}};MO.FEaiCityEntityModule_dispose=function(a){this._citys=MO.Lang.Object.dispose(this._citys);this.__base.FEaiEntityModule.dispose.call(this)};
MO.FEaiCountry3dEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._normalScale=MO.Class.register(a,new MO.AGetSet("_normalScale"),1);a._enterSELoaded=!1;a._enterSEPlaying=!1;a._cameraDirection=MO.Class.register(a,new MO.AGetSet("_cameraDirection"));a._startDelay=MO.Class.register(a,new MO.AGetSet("_startDelay"),0);a._riseDuration=MO.Class.register(a,new MO.AGetSet("_riseDuration"),5E3);a._riseDistance=MO.Class.register(a,new MO.AGetSet("_riseDistance"),600);a._fallDuration=MO.Class.register(a,
new MO.AGetSet("_fallDuration"),200);a._fallDistance=MO.Class.register(a,new MO.AGetSet("_fallDistance"),3);a._blockInterval=MO.Class.register(a,new MO.AGetSet("_blockInterval"),200);a._mouseOverRiseHeight=MO.Class.register(a,new MO.AGetSet("_mouseOverRiseHeight"),3);a._mouseMoveCheckInterval=MO.Class.register(a,new MO.AGetSet("_mouseMoveCheckInterval"),100);a._cameraMoveDuration=MO.Class.register(a,new MO.AGetSet("_cameraMoveDuration"),500);a._data=MO.Class.register(a,new MO.AGetter("_data"));a._outline2=
MO.Class.register(a,new MO.AGetter("_outline2"));a._worldEntity=MO.Class.register(a,new MO.AGetSet("_worldEntity"));a._provinceEntities=MO.Class.register(a,new MO.AGetter("_provinceEntities"));a._cityEntities=MO.Class.register(a,new MO.AGetter("_cityEntities"));a._boundaryShape=MO.Class.register(a,new MO.AGetter("_boundaryShape"));a._faceShape=MO.Class.register(a,new MO.AGetter("_faceShape"));a._borderShape=MO.Class.register(a,new MO.AGetter("_borderShape"));a._provinceArray=null;a._playing=!1;a._lastTick=
0;a._interval=10;a._template=MO.Class.register(a,new MO.AGetSet("_template"));a._introAnimeDone=MO.Class.register(a,new MO.AGetSet("_introAnimeDone"),!1);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._mouseOverRiseRenderable=MO.Class.register(a,new MO.AGetSet("_mouseOverRiseRenderable"));a._mouseOverFallArray=MO.Class.register(a,new MO.AGetSet("_mouseOverFallArray"));a._mouseMoveLastCheck=MO.Class.register(a,new MO.AGetSet("_mouseMoveLastCheck"));a._cameraMoving=MO.Class.register(a,
new MO.AGetSet("_cameraMoving"),!1);a._cameraFrom=MO.Class.register(a,new MO.AGetSet("_cameraFrom"));a._cameraTo=MO.Class.register(a,new MO.AGetSet("_cameraTo"));a._audioContext=null;a._audioMapEnter=null;a.construct=MO.FEaiCountry3dEntity_construct;a.setup=MO.FEaiCountry3dEntity_setup;a.build=MO.FEaiCountry3dEntity_build;a.provinceShowOrderSort=MO.FEaiCountry3dEntity_provinceShowOrderSort;a.setupProvinces=MO.FEaiCountry3dEntity_setupProvinces;a.findProvince=MO.FEaiCountry3dEntity_findProvince;a.loadData=
MO.FEaiCountry3dEntity_loadData;a.loadResource=MO.FEaiCountry3dEntity_loadResource;a.start=MO.FEaiCountry3dEntity_start;a.process=MO.FEaiCountry3dEntity_process;a.processLoad=MO.FEaiCountry3dEntity_processLoad;a.introAnime=MO.FEaiCountry3dEntity_introAnime;a.mouseOverFallAnime=MO.FEaiCountry3dEntity_mouseOverFallAnime;a.isReady=MO.FEaiCountry3dEntity_isReady;a.dispose=MO.FEaiCountry3dEntity_dispose;return a};
MO.FEaiCountry3dEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._outline2=new MO.SOutline2d;this._provinceEntities=new MO.TDictionary;this._cityEntities=new MO.TDictionary};MO.FEaiCountry3dEntity_setup=function(){var a=this._boundaryShape=MO.Class.create(MO.FE3dBoundaryShape3d);a._name="country";a._entity=this;a.linkGraphicContext(this)};
MO.FEaiCountry3dEntity_build=function(){var a=this._faceShape=MO.Class.create(MO.FE3dDynamicShape);a._entity=this;a.linkGraphicContext(this);a=this._borderShape=MO.Class.create(MO.FE3dDynamicShape);a._entity=this;a.linkGraphicContext(this);this._audioMapEnter=(this._audioContext=MO.Console.find(MO.FAudioContextConsole).create()).createBuffer("{eai.resource}/map_entry/enter.mp3")};
MO.FEaiCountry3dEntity_setupProvinces=function(){for(var a=this._provinceEntities,b=a.count(),c=this._provinceArray=Array(b),d=0;d<b;d++)c[d]=a.at(d);c.sort(this.provinceShowOrderSort)};MO.FEaiCountry3dEntity_findProvince=function(a){return this._provinceEntities.get(a)};
MO.FEaiCountry3dEntity_loadData=function(a){this._data=a;this._code=a.code();var b=this._outline2;b.setMin();var c=this._boundaryShape;a=a.boundaries();for(var d=a.count(),e=0;e<d;e++){var f=a.at(e);c.pushPolygon(f);for(var g=f.positionCount(),f=f.positions(),h=0,k=0;k<g;k++){var l=180-f[h++],n=f[h++];b.mergeMax2(l,n)}}b.update();c.build()};
MO.FEaiCountry3dEntity_loadResource=function(a){var b=a.data();a=this._provinceEntities;var c=this._faceShape,d=this._borderShape;this.loadData(b);for(var e=MO.Console.find(MO.FEaiResourceConsole).provinceModule(),b=b.provinces(),f=b.count(),g=0;g<f;g++){var h=b.at(g),k=h.code(),l=e.findByCode(k),n=MO.Class.create(MO.FEaiProvince3dEntity);n._countryEntity=this;n.linkGraphicContext(this);n.setup();n.setResource(l);n.setData(h);n.build(this);a.set(k,n);h=n.boundaryShape();c.pushMergeRenderable(h.faceRenderable());
d.pushMergeRenderable(h.borderRenderable())}c.build();d.build()};MO.FEaiCountry3dEntity_isReady=function(){return this._audioMapEnter.testFinish()?(this._startTime=MO.Timer.current(),!0):!1};MO.FEaiCountry3dEntity_provinceShowOrderSort=function(a,b){var c=MO.Console.find(MO.FEaiResourceConsole).provinceModule(),d=c.findByCode(a.data().code()),c=c.findByCode(b.data().code());return d.displayOrder()>c.displayOrder()?1:-1};MO.FEaiCountry3dEntity_start=function(){this._startTime=MO.Timer.current()};
MO.FEaiCountry3dEntity_process=function(){var a=this._provinceEntities;if(a)for(var b=a.count(),c=0;c<b;c++)a.at(c).process()};MO.FEaiCountry3dEntity_processLoad=function(){var a=this._resource;return a.testReady()?(this.loadResource(a),this._statusReady=!0):!1};MO.FEaiCountry3dEntity_dispose=function(){this._provinceEntities=MO.Lang.Object.dispose(this._provinceEntities);this._cityEntities=MO.Lang.Object.dispose(this._cityEntities);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiCountryEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._enterSELoaded=!1;a._enterSEPlaying=!1;a._cameraDirection=MO.Class.register(a,new MO.AGetSet("_cameraDirection"));a._startDelay=MO.Class.register(a,new MO.AGetSet("_startDelay"),0);a._riseDuration=MO.Class.register(a,new MO.AGetSet("_riseDuration"),5E3);a._riseDistance=MO.Class.register(a,new MO.AGetSet("_riseDistance"),600);a._fallDuration=MO.Class.register(a,new MO.AGetSet("_fallDuration"),200);a._fallDistance=MO.Class.register(a,
new MO.AGetSet("_fallDistance"),3);a._blockInterval=MO.Class.register(a,new MO.AGetSet("_blockInterval"),200);a._mouseOverRiseHeight=MO.Class.register(a,new MO.AGetSet("_mouseOverRiseHeight"),3);a._mouseMoveCheckInterval=MO.Class.register(a,new MO.AGetSet("_mouseMoveCheckInterval"),100);a._cameraMoveDuration=MO.Class.register(a,new MO.AGetSet("_cameraMoveDuration"),500);a._data=MO.Class.register(a,new MO.AGetter("_data"));a._outline2=MO.Class.register(a,new MO.AGetter("_outline2"));a._worldEntity=
MO.Class.register(a,new MO.AGetSet("_worldEntity"));a._provinceEntities=MO.Class.register(a,new MO.AGetter("_provinceEntities"));a._cityEntities=MO.Class.register(a,new MO.AGetter("_cityEntities"));a._boundaryShape=MO.Class.register(a,new MO.AGetter("_boundaryShape"));a._faceShape=MO.Class.register(a,new MO.AGetter("_faceShape"));a._borderShape=MO.Class.register(a,new MO.AGetter("_borderShape"));a._provinceArray=null;a._playing=!1;a._lastTick=0;a._interval=10;a._template=MO.Class.register(a,new MO.AGetSet("_template"));
a._introAnimeDone=MO.Class.register(a,new MO.AGetSet("_introAnimeDone"),!1);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._mouseOverRiseRenderable=MO.Class.register(a,new MO.AGetSet("_mouseOverRiseRenderable"));a._mouseOverFallArray=MO.Class.register(a,new MO.AGetSet("_mouseOverFallArray"));a._mouseMoveLastCheck=MO.Class.register(a,new MO.AGetSet("_mouseMoveLastCheck"));a._cameraMoving=MO.Class.register(a,new MO.AGetSet("_cameraMoving"),!1);a._cameraFrom=MO.Class.register(a,new MO.AGetSet("_cameraFrom"));
a._cameraTo=MO.Class.register(a,new MO.AGetSet("_cameraTo"));a._audioContext=null;a._audioMapEnter=null;a.onOrganizationFetch=MO.FEaiCountryEntity_onOrganizationFetch;a.onMouseMove=MO.FEaiCountryEntity_onMouseMove;a.onMouseDown=MO.FEaiCountryEntity_onMouseDown;a.construct=MO.FEaiCountryEntity_construct;a.setup=MO.FEaiCountryEntity_setup;a.build=MO.FEaiCountryEntity_build;a.provinceShowOrderSort=MO.FEaiCountryEntity_provinceShowOrderSort;a.setupProvinces=MO.FEaiCountryEntity_setupProvinces;a.loadData=
MO.FEaiCountryEntity_loadData;a.loadResource=MO.FEaiCountryEntity_loadResource;a.start=MO.FEaiCountryEntity_start;a.process=MO.FEaiCountryEntity_process;a.processLoad=MO.FEaiCountryEntity_processLoad;a.introAnime=MO.FEaiCountryEntity_introAnime;a.mouseOverFallAnime=MO.FEaiCountryEntity_mouseOverFallAnime;a.cameraMoveAnime=MO.FEaiCountryEntity_cameraMoveAnime;a.isReady=MO.FEaiCountryEntity_isReady;a.dispose=MO.FEaiCountryEntity_dispose;return a};
MO.FEaiCountryEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._outline2=new MO.SOutline2d;this._provinceEntities=new MO.TDictionary;this._cityEntities=new MO.TDictionary};MO.FEaiCountryEntity_setup=function(){var a=this._boundaryShape=MO.Class.create(MO.EE3dBoundaryShape);a._entity=this;a.linkGraphicContext(this)};
MO.FEaiCountryEntity_build=function(){var a=this._faceShape=MO.Class.create(MO.FE3dDynamicShape);a._entity=this;a.linkGraphicContext(this);a=this._borderShape=MO.Class.create(MO.FE3dDynamicShape);a._entity=this;a.linkGraphicContext(this);this._audioMapEnter=(this._audioContext=MO.Console.find(MO.FAudioContextConsole).create()).createBuffer("{eai.resource}/map_entry/enter.mp3")};
MO.FEaiCountryEntity_setupProvinces=function(){for(var a=this._provinceEntities,b=0;b<a.count();b++){var c=a.at(b),d=c.faceRenderable(),c=c.borderRenderable(),d=d.matrix(),c=c.matrix();d.tz=this.riseDistance();d.updateForce();c.tz=this.riseDistance();c.updateForce()}d=this._provinceArray=Array(a.count());for(b=0;b<a.count();b++)d[b]=a.at(b);d.sort(this.provinceShowOrderSort)};
MO.FEaiCountryEntity_loadData=function(a){this._data=a;this._code=a.code();var b=this._outline2;b.setMin();var c=this._boundaryShape;a=a.boundaries();for(var d=a.count(),e=0;e<d;e++){var f=a.at(e);c.pushPolygon(f);for(var g=f.positionCount(),f=f.positions(),h=0,k=0;k<g;k++){var l=180-f[h++],n=f[h++];b.mergeMax2(l,n)}}b.update();c.build()};
MO.FEaiCountryEntity_loadResource=function(a){var b=a.data();a=this._provinceEntities;var c=this._faceShape,d=this._borderShape;this.loadData(b);for(var e=MO.Console.find(MO.FEaiResourceConsole).provinceModule(),f=MO.Console.find(MO.FEaiEntityConsole).provinceModule(),b=b.provinces(),g=b.count(),h=0;h<g;h++){provinceData=b.at(h);var k=provinceData.code(),l=e.findByCode(k),n=MO.Class.create(MO.FEaiProvinceEntity);n.setResource(l);n.setData(provinceData);n.build(this);a.set(k,n);f.push(n);k=n.faceRenderable();
c.pushMergeRenderable(k);n=n.borderRenderable();d.pushMergeRenderable(n)}c.build();d.build();this.setupProvinces(a);MO.Console.find(MO.FEaiEntityConsole).cityModule().linkProvinces()};MO.FEaiCountryEntity_isReady=function(){return this._audioMapEnter.testFinish()?(this._startTime=MO.Timer.current(),!0):!1};
MO.FEaiCountryEntity_provinceShowOrderSort=function(a,b){var c=MO.Console.find(MO.FEaiResourceConsole).provinceModule(),d=c.findByCode(a.data().code()),c=c.findByCode(b.data().code());return d.displayOrder()>c.displayOrder()?1:-1};MO.FEaiCountryEntity_start=function(){this._startTime=MO.Timer.current()};MO.FEaiCountryEntity_process=function(){this._provinceEntities&&this.introAnime()};
MO.FEaiCountryEntity_processLoad=function(){var a=this._resource;return a.testReady()?(this.loadResource(a),this._statusReady=!0):!1};
MO.FEaiCountryEntity_introAnime=function(){var a=MO.Timer.current()-this._startTime;if(!(a<this.startDelay())){a-=this.startDelay();if(a>this.riseDuration()+this.fallDuration()+this.blockInterval()*this._provinceEntities.count()){this.setIntroAnimeDone(!0);var b=new MO.TListener;b._owner=this;b._callback=this.onMouseMove;MO.Window.lsnsMouseMove.push(b);b=new MO.TListener;b._owner=this;b._callback=this.onMouseDown;MO.Window.lsnsMouseDown.push(b)}this._enterSEPlaying||(this._audioMapEnter.play(0),this._enterSEPlaying=
!0);for(var b=a/this.blockInterval(),c=0;c<this._provinceArray.length&&c<b;c++){var d=this._provinceArray[c].faceRenderable(),e=this._provinceArray[c].borderRenderable(),d=d.matrix(),e=e.matrix(),f=(a-this.blockInterval()*c)/(this.riseDuration()-c*c),g=0;1<f&&(f=1,g=(a-this.blockInterval()*c-(this.riseDuration()-c*c))/this.fallDuration(),1<g&&(g=1));d.tz=this.riseDistance()*(1-f)-this.fallDistance()*(1-g);d.updateForce();e.tz=this.riseDistance()*(1-f)-this.fallDistance()*(1-g);e.updateForce()}b>this._provinceArray.length-
1||parseInt(b)}};MO.FEaiCountryEntity_onMouseMove=function(a){};MO.FEaiCountryEntity_mouseOverFallAnime=function(){};MO.FEaiCountryEntity_onOrganizationFetch=function(a){};MO.FEaiCountryEntity_onMouseDown=function(a){};MO.FEaiCountryEntity_cameraMoveAnime=function(){};MO.FEaiCountryEntity_dispose=function(){this._provinceEntities=MO.Lang.Object.dispose(this._provinceEntities);this._cityEntities=MO.Lang.Object.dispose(this._cityEntities);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiCountryEntityModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntityModule);a._countries=MO.Class.register(a,new MO.AGetter("_countries"));a.construct=MO.FEaiCountryEntityModule_construct;a.findByCode=MO.FEaiCountryEntityModule_findByCode;a.push=MO.FEaiCountryEntityModule_push;a.load=MO.FEaiCountryEntityModule_load;a.dispose=MO.FEaiCountryEntityModule_dispose;return a};MO.FEaiCountryEntityModule_construct=function(){this.__base.FEaiEntityModule.construct.call(this);this._countries=new MO.TDictionary};
MO.FEaiCountryEntityModule_findByCode=function(a){return this._countries.get(a)};MO.FEaiCountryEntityModule_push=function(a){var b=a.code();this._countries.set(b,a)};MO.FEaiCountryEntityModule_load=function(a,b){var c=this._countries,d=c.get(b);if(d)return d;var e=MO.Console.find(MO.FEaiResourceConsole).mapConsole().loadCountry(b),d=MO.Class.create(MO.FEaiCountryEntity);d.linkGraphicContext(a);d.setResource(e);d.setup();MO.Console.find(MO.FEntityConsole).loadEntity(d);c.set(b,d);return d};
MO.FEaiCountryEntityModule_dispose=function(){this._countries=MO.Lang.Object.dispose(this._countries);this.__base.FEaiEntityModule.dispose.call(this)};MO.FEaiEntity=function(a){a=MO.Class.inherits(this,a,MO.FEntity,MO.MGraphicObject,MO.MLinkerResource);a._code=MO.Class.register(a,new MO.AGetter("_code"));return a};
MO.FEaiEntityConsole=function(a){a=MO.Class.inherits(this,a,MO.FConsole,MO.MListener,MO.MGraphicObject);a._scopeCd=MO.EScope.Local;a._option3d=!1;a._cityModule=MO.Class.register(a,new MO.AGetter("_cityModule"));a._provinceModule=MO.Class.register(a,new MO.AGetter("_provinceModule"));a._countryModule=MO.Class.register(a,new MO.AGetter("_countryModule"));a._mapModule=MO.Class.register(a,new MO.AGetter("_mapModule"));a._mapEntity=MO.Class.register(a,new MO.AGetter("_mapEntity"));a._worldData=null;a._worldReady=
!1;a._countryData=null;a._countryReady=!1;a._worldEntity=MO.Class.register(a,new MO.AGetter("_worldEntity"));a._listenersLoadWorld=MO.Class.register(a,new MO.AListener("_listenersLoadWorld","LoadWorld"));a._listenersLoadCountry=MO.Class.register(a,new MO.AListener("_listenersLoadCountry","LoadCountry"));a.onSetup=MO.FEaiEntityConsole_onSetup;a.onLoadCountry=MO.FEaiEntityConsole_onLoadCountry;a.construct=MO.FEaiEntityConsole_construct;a.testWorldReady=MO.FEaiEntityConsole_testWorldReady;a.loadWorldData=
MO.FEaiEntityConsole_loadWorldData;a.testCountryReady=MO.FEaiEntityConsole_testCountryReady;a.loadCountryData=MO.FEaiEntityConsole_loadCountryData;a.dispose=MO.FEaiEntityConsole_dispose;return a};MO.FEaiEntityConsole_onSetup=function(){this.__base.FConsole.onSetup.call(this);var a=this._mapEntity=MO.Class.create(MO.FEaiMapEntity);a.linkGraphicContext(this);this._option3d?a.setup3d():a.setup()};
MO.FEaiEntityConsole_onLoadCountry=function(a){var b=a.sender;a=this._mapEntity;var c=a.countryEntity();a.countryDisplay();a.countryBorderDisplay();var d=a.citysRangeRenderable(),e=a.citysRenderable();c.loadProvinceData(b);for(var c=c.provinceEntities(),f=c.count(),b=0;b<f;b++){var g=c.at(b);a.pushProvince(g)}for(var b=MO.Console.find(MO.FEaiEntityConsole).cityConsole(),c=MO.Console.find(MO.FEaiEntityConsole).cityConsole(),f=a.cityEntities(),g=b.citys(),h=g.count(),b=0;b<h;b++){var k=g.at(b);k.level();
k.location();var l=MO.Class.create(MO.FEaiCityEntity);l.setRenderable(e);l.setData(k);l.build(this);f.set(k.code(),l);e.citys().push(l);d.citys().push(l);c.push(l)}e.setup();e.upload();d.setup();d.upload();a.setupCityEntities();this._countryReady=!0;a=new MO.SEvent;this.processLoadCountryListener(a)};
MO.FEaiEntityConsole_construct=function(){this.__base.FConsole.construct.call(this);this._cityModule=MO.Class.create(MO.FEaiCityEntityModule);this._provinceModule=MO.Class.create(MO.FEaiProvinceEntityModule);this._countryModule=MO.Class.create(MO.FEaiCountryEntityModule);this._mapModule=MO.Class.create(MO.FEaiMapEntityModule)};MO.FEaiEntityConsole_testWorldReady=function(){return this._countryReady&&this._mapEntity.countryEntity().isReady()};
MO.FEaiEntityConsole_testCountryReady=function(){return this._countryReady&&this._mapEntity.countryEntity().isReady()};MO.FEaiEntityConsole_loadCountryData=function(){var a=this._countryData;a||(a=this._countryData=MO.Class.create(MO.FEaiCountryData),a.addLoadListener(this,this.onLoadCountry),a.load())};
MO.FEaiEntityConsole_dispose=function(){this._cityModule=MO.Lang.Object.dispose(this._cityModule);this._provinceModule=MO.Lang.Object.dispose(this._provinceModule);this._countryModule=MO.Lang.Object.dispose(this._countryModule);this._mapModule=MO.Lang.Object.dispose(this._mapModule);this._mapEntity=MO.Lang.Object.dispose(this._mapEntity);this.__base.FConsole.dispose.call(this)};
MO.FEaiEntityModule=function(a){a=MO.Class.inherits(this,a,MO.FObject);a.construct=MO.FEaiEntityModule_construct;a.dispose=MO.FEaiEntityModule_dispose;return a};MO.FEaiEntityModule_construct=function(){this.__base.FObject.construct.call(this)};MO.FEaiEntityModule_dispose=function(){this.__base.FObject.dispose.call(this)};
MO.FEaiMapEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._worldEntity=MO.Class.register(a,new MO.AGetter("_worldEntity"));a._cityCenterRenderable=MO.Class.register(a,new MO.AGetter("_cityCenterRenderable"));a._cityRangeRenderable=MO.Class.register(a,new MO.AGetter("_cityRangeRenderable"));a._countryFaceDisplay=MO.Class.register(a,new MO.AGetter("_countryFaceDisplay"));a._countryBorderDisplay=MO.Class.register(a,new MO.AGetter("_countryBorderDisplay"));a.construct=MO.FEaiMapEntity_construct;
a.setup=MO.FEaiMapEntity_setup;a.setup3d=MO.FEaiMapEntity_setup3d;a.upload=MO.FEaiMapEntity_upload;a.showCity=MO.FEaiMapEntity_showCity;a.showCountry=MO.FEaiMapEntity_showCountry;a.showWorld=MO.FEaiMapEntity_showWorld;a.process=MO.FEaiMapEntity_process;a.reset=MO.FEaiMapEntity_reset;a.dispose=MO.FEaiMapEntity_dispose;return a};MO.FEaiMapEntity_construct=function(){this.__base.FEaiEntity.construct.call(this)};
MO.FEaiMapEntity_setup=function(){var a=this._cityCenterRenderable=MO.Class.create(MO.FEaiCitysRenderable);a.linkGraphicContext(this);a._optionSelect=!1;a=this._cityRangeRenderable=MO.Class.create(MO.FEaiCitysRangeRenderable);a.linkGraphicContext(this);a._optionSelect=!1;a=this._countryFaceDisplay=MO.Class.create(MO.FE3dDisplayContainer);a.linkGraphicContext(this);a=this._countryBorderDisplay=MO.Class.create(MO.FE3dDisplayContainer);a.linkGraphicContext(this)};
MO.FEaiMapEntity_setup3d=function(){var a=this._cityCenterRenderable=MO.Class.create(MO.FEaiCitys3dRenderable);a.linkGraphicContext(this);a._optionSelect=!1;a=this._cityRangeRenderable=MO.Class.create(MO.FEaiCitysRange3dRenderable);a.linkGraphicContext(this);a._optionSelect=!1;a=this._countryFaceDisplay=MO.Class.create(MO.FE3dDisplayContainer);a.linkGraphicContext(this);a=this._countryBorderDisplay=MO.Class.create(MO.FE3dDisplayContainer);a.linkGraphicContext(this)};
MO.FEaiMapEntity_upload=function(){this._cityCenterRenderable.upload();this._cityRangeRenderable.upload()};MO.FEaiMapEntity_process=function(a){var b=!1,b=MO.Console.find(MO.FEaiEntityConsole).provinceModule().provinces();a=b.count();for(var c=0;c<a;c++)b.at(c).process();var b=!1,d=MO.Console.find(MO.FEaiEntityConsole).cityModule().citys();a=d.count();for(c=0;c<a;c++)d.at(c).process()&&(b=!0);b&&this.upload()};
MO.FEaiMapEntity_showCity=function(){for(var a=this._cityCenterRenderable,b=this._cityRangeRenderable,c=MO.Console.find(MO.FEaiEntityConsole).cityModule().citys(),d=c.count(),e=0;e<d;e++){var f=c.at(e);a.citys().push(f);b.citys().push(f)}a.setup();a.upload();b.setup();b.upload()};MO.FEaiMapEntity_showCountry=function(a){this._countryFaceDisplay.push(a.faceShape());this._countryBorderDisplay.push(a.borderShape())};
MO.FEaiMapEntity_showWorld=function(){var a=this._worldEntity=MO.Console.find(MO.FEaiEntityConsole).mapModule().worldEntity();this._countryFaceDisplay.push(a.sphere());this._countryFaceDisplay.push(a._sphere2);this._countryFaceDisplay.push(a._sphere3);this._countryFaceDisplay.push(a._sphere4);this._countryFaceDisplay.push(a.faceShape());this._countryBorderDisplay.push(a.borderShape())};
MO.FEaiMapEntity_reset=function(){for(var a=MO.Console.find(MO.FEaiEntityConsole).provinceModule().provinces(),b=a.count(),c=0;c<b;c++)a.at(c).reset();a=MO.Console.find(MO.FEaiEntityConsole).cityModule().citys();b=a.count();for(c=0;c<b;c++)a.at(c).reset()};
MO.FEaiMapEntity_dispose=function(){this._cityCenterRenderable=MO.Lang.Object.dispose(this._cityCenterRenderable);this._cityRangeRenderable=MO.Lang.Object.dispose(this._cityRangeRenderable);this._countryFaceDisplay=MO.Lang.Object.dispose(this._countryFaceDisplay);this._countryBorderDisplay=MO.Lang.Object.dispose(this._countryBorderDisplay);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiMapEntityModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntityModule);a._worldEntity=MO.Class.register(a,new MO.AGetter("_worldEntity"));a._countryEntities=MO.Class.register(a,new MO.AGetter("_countryEntities"));a._provinceEntities=MO.Class.register(a,new MO.AGetter("_provinceEntities"));a._cityEntities=MO.Class.register(a,new MO.AGetter("_cityEntities"));a.construct=MO.FEaiMapEntityModule_construct;a.loadCountry=MO.FEaiMapEntityModule_loadCountry;a.loadWorld=MO.FEaiMapEntityModule_loadWorld;
a.dispose=MO.FEaiMapEntityModule_dispose;return a};MO.FEaiMapEntityModule_construct=function(){this.__base.FEaiEntityModule.construct.call(this);this._countryEntities=new MO.TDictionary;this._provinceEntities=new MO.TDictionary;this._cityEntities=new MO.TDictionary};
MO.FEaiMapEntityModule_loadCountry=function(a,b,c){var d=this._countryEntities,e=d.get(b);if(e)return e;var f=MO.Console.find(MO.FEaiResourceConsole).mapModule().loadCountry(b),e=MO.Class.create(MO.Runtime.nvl(c,MO.FEaiCountryEntity));e.linkGraphicContext(a);e.setResource(f);e.setup();e.build();MO.Console.find(MO.FEntityConsole).loadEntity(e);d.set(b,e);return e};
MO.FEaiMapEntityModule_loadWorld=function(a){var b=this._worldEntity;if(b)return b;var c=MO.Console.find(MO.FEaiResourceConsole).mapModule().loadWorld(),b=this._worldEntity=MO.Class.create(MO.FEaiWorldEntity);b.linkGraphicContext(a);b.setResource(c);b.setup();MO.Console.find(MO.FEntityConsole).loadEntity(b);return b};
MO.FEaiMapEntityModule_dispose=function(){this._countryEntities=MO.Lang.Object.dispose(this._countryEntities);this._provinceEntities=MO.Lang.Object.dispose(this._provinceEntities);this._cityEntities=MO.Lang.Object.dispose(this._cityEntities);this.__base.FEaiEntityModule.dispose.call(this)};
MO.FEaiProvince3dEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._outline2=MO.Class.register(a,new MO.AGetter("_outline2"));a._resource=MO.Class.register(a,new MO.AGetSet("_resource"));a._boundaryShape=MO.Class.register(a,new MO.AGetter("_boundaryShape"));a._normalScale=MO.Class.register(a,new MO.AGetSet("_normalScale"),1);a._normalScaleMax=MO.Class.register(a,new MO.AGetSet("_normalScaleMax"),1.02);a._layerDepth=3;a._focusTick=0;
a._focusInterval=10;a._focusCurrent=0;a._focusColor=null;a._focusCount=200;a.construct=MO.FEaiProvince3dEntity_construct;a.setup=MO.FEaiProvince3dEntity_setup;a.build=MO.FEaiProvince3dEntity_build;a.doFocus=MO.FEaiProvince3dEntity_doFocus;a.updateColor=MO.FEaiProvince3dEntity_updateColor;a.process=MO.FEaiProvince3dEntity_process;a.reset=MO.FEaiProvince3dEntity_reset;a.dispose=MO.FEaiProvince3dEntity_dispose;return a};
MO.FEaiProvince3dEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._outline2=new MO.SOutline2d;var a=this._focusColors=[];a[0]=[40,66,180];a[1]=[40,66,180];a[2]=[27,162,188];a[3]=[255,223,111];a[4]=[255,107,73];a[5]=[255,107,73]};MO.FEaiProvince3dEntity_setup=function(){var a=this._boundaryShape=MO.Class.create(MO.FE3dBoundaryShape3d);a._name="province";a._entity=this;a.setScaleTop(1.01);a.setScaleBottom(.8);a.linkGraphicContext(this)};
MO.FEaiProvince3dEntity_build=function(a){var b=this._data.boundaries(),c=this._outline2;c.setMin();a=this._boundaryShape;for(var d=b.count(),e=0;e<d;e++){var f=b.at(e);a.pushPolygon(f);for(var g=f.positionCount(),f=f.positions(),h=0,k=0;k<g;k++){var l=180-f[h++],n=f[h++];c.mergeMax2(l,n)}}c.update();a.build(this._graphicContext);b=a.faceRenderable();b.material().info().effectCode="eai.map.face";b.color().setHex("#080D19");a.borderRenderable().color().setHex("#6666FF")};
MO.FEaiProvince3dEntity_doFocus=function(a,b){this._focusTick=0;this._focusCurrent=this._focusCount;this._focusColor=this._focusColors[a]};MO.FEaiProvince3dEntity_updateColor=function(a){var b=this._focusColor;a=this._focusCurrent/this._focusCount;var c=8+(b[0]-8)*a,d=13+(b[1]-13)*a;a=25+(b[2]-25)*a;this._boundaryShape.faceRenderable().color().set(c/255,d/255,a/255,1)};
MO.FEaiProvince3dEntity_process=function(){if(0<this._focusCurrent){var a=MO.Timer.current();a-this._focusTick>this._focusInterval&&(this._normalScale=1+this._focusCurrent/this._focusCount*(this._normalScaleMax-1),this.updateColor(this._focusCurrent),this._focusCurrent--,this._focusTick=a)}};MO.FEaiProvince3dEntity_reset=function(){this._focusCurrent=this._focusTick=this._normalScale=0};MO.FEaiProvince3dEntity_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiProvinceEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._resource=MO.Class.register(a,new MO.AGetSet("_resource"));a._boundaryShape=MO.Class.register(a,new MO.AGetter("_boundaryShape"));a._faceRenderable=MO.Class.register(a,new MO.AGetter("_faceRenderable"));a._borderRenderable=MO.Class.register(a,new MO.AGetter("_borderRenderable"));a._layerDepth=3;a._currentZ=MO.Class.register(a,new MO.AGetter("_currentZ"),0);a._focusTick=
0;a._focusInterval=10;a._focusCurrent=0;a._focusColor=null;a._focusCount=200;a.construct=MO.FEaiProvinceEntity_construct;a.setup=MO.FEaiProvinceEntity_setup;a.buildFace=MO.FEaiProvinceEntity_buildFace;a.buildBorder=MO.FEaiProvinceEntity_buildBorder;a.build=MO.FEaiProvinceEntity_build;a.doInvestment=MO.FEaiProvinceEntity_doInvestment;a.updateColor=MO.FEaiProvinceEntity_updateColor;a.update=MO.FEaiProvinceEntity_update;a.process=MO.FEaiProvinceEntity_process;a.reset=MO.FEaiProvinceEntity_reset;a.dispose=
MO.FEaiProvinceEntity_dispose;return a};MO.FEaiProvinceEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);var a=this._focusColors=[];a[0]=[40,66,180];a[1]=[40,66,180];a[2]=[27,162,188];a[3]=[255,223,111];a[4]=[255,107,73];a[5]=[255,107,73]};MO.FEaiProvinceEntity_setup=function(){(this._boundaryShape=MO.Class.create(MO.FE3dBoundary)).linkGraphicContext(this)};
MO.FEaiProvinceEntity_buildFace=function(a){for(var b=this._data.boundaries(),c=b.count(),d=this._vertexTotal,e=this._indexTotal,f=0,g=0,h=new Float32Array(6*d),k=0,e=new Uint32Array(e+6*d),l=0;l<c;l++){for(var n=b.at(l),m=n.positionCount(),u=n.positions(),p=0,r=0;r<m;r++)h[g++]=u[p++],h[g++]=u[p++],h[g++]=0;n=n.indexes();u=n.length/3;for(r=0;r<u;r++)p=3*r,e[k++]=f+n[p+2],e[k++]=f+n[p+1],e[k++]=f+n[p];f+=m}for(l=0;l<c;l++)for(n=b.at(l),m=n.positionCount(),u=n.positions(),r=p=0;r<m;r++)h[g++]=u[p++],
h[g++]=u[p++],h[g++]=this._layerDepth;c=0;b=this.colorsData=new Uint8Array(8*d);f=2*d;for(r=0;r<f;r++)b[c++]=255,b[c++]=255,b[c++]=255,b[c++]=255;r=this._faceRenderable=MO.Class.create(MO.FE3dDataBox);r.setVertexCount(2*d);r.linkGraphicContext(a);r.setup();r.color().setHex("#080D19");r.vertexPositionBuffer().upload(h,12,2*d,!0);r.vertexColorBuffer().upload(b,4,2*d,!0);r.indexBuffer().setStrideCd(MO.EG3dIndexStride.Uint32);r.indexBuffer().upload(e,k,!0);r.material().info().effectCode="eai.map.face"};
MO.FEaiProvinceEntity_buildBorder=function(a){for(var b=this._data.boundaries(),c=b.count(),d=this._vertexTotal,e=0,f=0,g=new Float32Array(6*d),h=0,k=new Uint16Array(2*d+2*d),l=0;l<c;l++){for(var n=b.at(l),m=n.positionCount(),u=n.positions(),p=0,n=0;n<m;n++)g[f++]=u[p++],g[f++]=u[p++],g[f++]=0;for(n=0;n<m;n++)k[h++]=e+n,n==m-1?k[h++]=e:k[h++]=e+n+1;e+=m}for(var r=e,l=0;l<c;l++){n=b.at(l);m=n.positionCount();u=n.positions();for(n=p=0;n<m;n++)g[f++]=u[p++],g[f++]=u[p++],g[f++]=this._layerDepth;e+=m}for(l=
e=0;l<c;l++){n=b.at(l);m=n.positionCount();for(n=0;n<m;n++)k[h++]=e+n,k[h++]=e+n+r;e+=m}c=0;b=this.colorsData=new Uint8Array(8*d);for(n=0;n<d;n++)b[c++]=0,b[c++]=181,b[c++]=246,b[c++]=255;for(n=0;n<d;n++)b[c++]=11,b[c++]=17,b[c++]=35,b[c++]=255;n=this._borderRenderable=MO.Class.create(MO.FE3dDataBox);n.linkGraphicContext(a);n.setup();n.setVertexCount(2*d);n.vertexPositionBuffer().upload(g,12,2*d,!0);n.vertexColorBuffer().upload(b,4,2*d,!0);n.indexBuffer().setDrawModeCd(MO.EG3dDrawMode.Lines);n.indexBuffer().setLineWidth(1);
n.indexBuffer().upload(k,h,!0);n.material().info().effectCode="eai.map.face"};MO.FEaiProvinceEntity_build=function(a){for(var b=0,c=0,d=this._data.boundaries(),e=d.count(),f=0;f<e;f++)var g=d.at(f),b=b+g.positionCount(),c=c+g.indexCount();this._vertexTotal=b;this._indexTotal=c;this.buildFace(a);this.buildBorder(a)};MO.FEaiProvinceEntity_doInvestment=function(a,b){this._focusTick=0;this._focusCurrent=this._focusCount;this._focusColor=this._focusColors[a]};
MO.FEaiProvinceEntity_update=function(a){a=a.investmentTotal();Math.sqrt(a)};MO.FEaiProvinceEntity_updateColor=function(a){var b=this._focusColor;a=this._focusCurrent/this._focusCount;var c=8+(b[0]-8)*a,d=13+(b[1]-13)*a;a=25+(b[2]-25)*a;this._faceRenderable.color().set(c/255,d/255,a/255,1)};
MO.FEaiProvinceEntity_process=function(){if(0<this._focusCurrent){var a=MO.Timer.current();if(a-this._focusTick>this._focusInterval){var b=this._currentZ=-this._focusCurrent/60;faceRenderable=this._faceRenderable;matrix=faceRenderable.matrix();matrix.tz=b;matrix.updateForce();borderRenderable=this._borderRenderable;matrix=borderRenderable.matrix();matrix.tz=b;matrix.updateForce();this.updateColor(this._focusCurrent);this._focusCurrent--;this._focusTick=a}}};
MO.FEaiProvinceEntity_reset=function(){this._focusCurrent=this._focusTick=this._currentZ=0};MO.FEaiProvinceEntity_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiProvinceEntityModule=function(a){a=MO.RClass.inherits(this,a,MO.FEaiEntityModule);a._provinces=MO.Class.register(a,new MO.AGetter("_provinces"));a.construct=MO.FEaiProvinceEntityModule_construct;a.findByCode=MO.FEaiProvinceEntityModule_findByCode;a.push=MO.FEaiProvinceEntityModule_push;a.dispose=MO.FEaiProvinceEntityModule_dispose;return a};MO.FEaiProvinceEntityModule_construct=function(){this.__base.FEaiEntityModule.construct.call(this);this._provinces=new MO.TDictionary};
MO.FEaiProvinceEntityModule_findByCode=function(a){return this._provinces.get(a)};MO.FEaiProvinceEntityModule_push=function(a){var b=a.data().code();this._provinces.set(b,a)};MO.FEaiProvinceEntityModule_dispose=function(a){this._provinces=MO.Lang.Object.dispose(this._provinces);this.__base.FEaiEntityModule.dispose.call(this)};
MO.FEaiWorldEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity,MO.MListener);a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._material=MO.Class.register(a,new MO.AGetter("_material"));a._countries=MO.Class.register(a,new MO.AGetter("_countries"));a._sphere=MO.Class.register(a,new MO.AGetter("_sphere"));a._faceShape=MO.Class.register(a,new MO.AGetter("_faceShape"));a._borderShape=MO.Class.register(a,new MO.AGetter("_borderShape"));a._imageGround=null;a.construct=MO.FEaiWorldEntity_construct;
a.setup=MO.FEaiWorldEntity_setup;a.loadResource=MO.FEaiWorldEntity_loadResource;a.processLoad=MO.FEaiWorldEntity_processLoad;a.dispose=MO.FEaiWorldEntity_dispose;return a};MO.FEaiWorldEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._countries=new MO.TObjects;(this._material=MO.Class.create(MO.FE3dMaterial)).info().effectCode="eai.world.face"};
MO.FEaiWorldEntity_setup=function(){var a=this._graphicContext,b=this._textureOcean=a.createFlatTexture(),c=this._textureCloud=a.createFlatTexture(),d=this._faceShape=MO.Class.create(MO.FE3dDynamicShape);d._worldEntity=this;d.linkGraphicContext(a);d.outline().set(-1,-1,-1,1,1,1);d=this._borderShape=MO.Class.create(MO.FE3dDynamicShape);d._optionSelect=!1;d._worldEntity=this;d.outline().set(-1,-1,-1,1,1,1);d.linkGraphicContext(a);d=this._sphere=MO.Class.create(MO.FE3dSphere);d._optionSelect=!1;d.linkGraphicContext(a);
d.setSplitCount(24);d.setup();d.matrix().setScaleAll(.97);d.matrix().update();d.pushTexture(b,"diffuse");b=d.material().info();b.optionAlpha=!1;b.ambientColor.setHex("#128AF9");b.diffuseColor.set(.4,.4,.4,1);b.specularColor.set(.2,.2,.2,.2);b.specularLevel=64;d=this._sphere2=MO.Class.create(MO.FE3dSphere);d._optionSelect=!1;d.linkGraphicContext(a);d.setSplitCount(24);d.setup();d.matrix().setScaleAll(.98);d.matrix().update();b=d.material().info();b.optionAlpha=!0;b.alphaRate=.3;b.ambientColor.setHex("#128AF9");
b.diffuseColor.set(.4,.4,.4,1);b.specularColor.set(.2,.2,.2,.2);b.specularLevel=64;d=this._sphere3=MO.Class.create(MO.FE3dSphere);d._optionSelect=!1;d.linkGraphicContext(a);d.setSplitCount(24);d.setup();d.matrix().setScaleAll(1.1);d.matrix().update();d.pushTexture(c,"diffuse");b=d.material().info();b.optionAlpha=!0;b.optionDepth=!1;b.alphaRate=.1;b.ambientColor.setHex("#128AF9");b.diffuseColor.set(.4,.4,.4,1);b.specularColor.set(.2,.2,.2,.2);b.specularLevel=64;d=this._sphere4=MO.Class.create(MO.FE3dSphere);
d._optionSelect=!1;d.linkGraphicContext(a);d.setSplitCount(24);d.setup();d.matrix().setScaleAll(1.25);d.matrix().update();b=d.material().info();b.optionAlpha=!0;b.optionDepth=!1;b.alphaRate=.03;b.ambientColor.setHex("#128AF9");b.diffuseColor.set(.4,.4,.4,1);b.specularColor.set(.2,.2,.2,.2);b.specularLevel=64;a=this._texture=a.createFlatTexture();this._material.setTexture("diffuse",a);this._imageGround=MO.Console.find(MO.FImageConsole).load("{eai.resource}/world/color4096.jpg");this._imageOcean=MO.Console.find(MO.FImageConsole).load("{eai.resource}/world/ocean4096.jpg");
this._imageCloud=MO.Console.find(MO.FImageConsole).load("{eai.resource}/world/cloud.jpg")};
MO.FEaiWorldEntity_loadResource=function(a){var b=a.data(),c=MO.Console.find(MO.FEaiEntityConsole).countryModule();a=this._countries;for(var d=b.countries(),b=d.count(),e=0;e<b;e++){var f=d.at(e),g=MO.Class.create(MO.FEaiCountry3dEntity);g.linkGraphicContext(this);g.setWorldEntity(this);g.setup();g.loadData(f);f=g.boundaryShape().faceRenderable();f._material=this._material;f._texture=this._material.textures();a.push(g);c.push(g)}c=this._faceShape=MO.Class.create(MO.FE3dDynamicShape);c.linkGraphicContext(this);
d=this._borderShape=MO.Class.create(MO.FE3dDynamicShape);d.linkGraphicContext(this);for(e=0;e<b;e++)g=a.at(e).boundaryShape(),c.pushMergeRenderable(g.faceRenderable()),d.pushMergeRenderable(g.borderRenderable());c.build();d.build()};
MO.FEaiWorldEntity_processLoad=function(){var a=this._imageGround;if(a){if(a.testReady()){var b=this._texture;b.upload(a);b.makeMipmap();this._imageGround=null}return!1}if(a=this._imageOcean)return a.testReady()&&(b=this._textureOcean,b.upload(a),b.makeMipmap(),this._imageOcean=null),!1;if(a=this._imageCloud)return a.testReady()&&(b=this._textureCloud,b.upload(a),b.makeMipmap(),this._imageCloud=null),!1;a=this._resource;return a.testReady()?(this.loadResource(a),this._statusReady=!0):!1};
MO.FEaiWorldEntity_dispose=function(){this._countries=MO.Lang.Object.dispose(this._countries,!0);this.__base.FEaiEntity.dispose.call(this)};MO.FEaiCityEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.city";a.drawRenderable=MO.FEaiCityEffect_drawRenderable;return a};
MO.FEaiCityEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=b.currentMatrix(),f=a.calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),g=b.material(),h=g.info();this.bindMaterial(g);d.setParameter("vc_model_matrix",e);d.setParameter("vc_vp_matrix",f);d.setParameter4("fc_alpha",h.alphaBase,h.alphaRate,h.alphaLevel,h.alphaMerge);d.setParameter("fc_ambient_color",h.ambientColor);this.bindAttributes(b);this.bindSamplers(b);d=b.indexBuffers().first();c.drawTriangles(d)};
MO.FEaiCityRangeEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.city.range";a.drawRenderable=MO.FEaiCityRangeEffect_drawRenderable;return a};
MO.FEaiCityRangeEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=b.currentMatrix(),f=a.calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),g=b.material();g.info();this.bindMaterial(g);d.setParameter("vc_model_matrix",e);d.setParameter("vc_vp_matrix",f);this.bindAttributes(b);this.bindSamplers(b);d=b.indexBuffers().first();c.drawTriangles(d)};
MO.FEaiCitysRange3dRenderable=function(a){a=MO.Class.inherits(this,a,MO.FE3dRenderable);a._ready=!1;a._image=null;a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a._citySize=MO.Class.register(a,new MO.AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexColorBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=MO.FEaiCitysRange3dRenderable_onImageLoad;a.construct=MO.FEaiCitysRange3dRenderable_construct;a.testReady=MO.FEaiCitysRange3dRenderable_testReady;
a.setup=MO.FEaiCitysRange3dRenderable_setup;a.upload=MO.FEaiCitysRange3dRenderable_upload;a.dispose=MO.FEaiCitysRange3dRenderable_dispose;return a};MO.FEaiCitysRange3dRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0};MO.FEaiCitysRange3dRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new MO.TObjects;this._material=MO.Class.create(MO.FE3dMaterial)};MO.FEaiCitysRange3dRenderable_testReady=function(){return this._ready};
MO.FEaiCitysRange3dRenderable_setup=function(){var a=this._graphicContext,b=this._citys.count(),c=this._vertexCount=4*b,d=this._vertexPositionBuffer=a.createVertexBuffer();d.setCode("position");d.setFormatCd(MO.EG3dAttributeFormat.Float3);this.pushVertexBuffer(d);for(var d=0,e=new Float32Array(2*c),f=0;f<b;f++)e[d++]=0,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=0,e[d++]=0,e[d++]=0;d=this._vertexCoordBuffer=a.createVertexBuffer();d.setCode("coord");d.setFormatCd(MO.EG3dAttributeFormat.Float2);d.upload(e,
8,c);this.pushVertexBuffer(d);d=this._vertexColorBuffer=a.createVertexBuffer();d.setCode("color");d.setFormatCd(MO.EG3dAttributeFormat.Byte4Normal);this.pushVertexBuffer(d);c=6*b;d=0;e=new Uint16Array(c);for(f=0;f<b;f++){var g=4*f;e[d++]=g+0;e[d++]=g+1;e[d++]=g+2;e[d++]=g+0;e[d++]=g+2;e[d++]=g+3}d=this._indexBuffer=a.createIndexBuffer();d.upload(e,c);this.pushIndexBuffer(d);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(MO.EG3dSamplerFilter.ClampToEdge,MO.EG3dSamplerFilter.ClampToEdge);
this.pushTexture(a,"diffuse");a=this._material.info();a.effectCode="eai.citys.range";a.optionAlpha=!0;a.optionDepth=!1;a.optionDouble=!1;this._material._textures=this._textures;a=MO.Class.create(MO.FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("{eai.resource}/dot.png");this._ready=!1};
MO.FEaiCitysRange3dRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),k=0,l=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),e.visible()){var n=e.location(),m=e.range();e.size();var u=e.provinceEntity();u&&u.currentZ();var u=(n.x-m)*MO.Lang.Const.DEGREE_RATE,p=(n.y+m)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(u)*Math.cos(p)*1;h[g++]=1*Math.sin(p);h[g++]=-Math.cos(u)*Math.cos(p)*1;u=
(n.x+m)*MO.Lang.Const.DEGREE_RATE;p=(n.y+m)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(u)*Math.cos(p)*1;h[g++]=1*Math.sin(p);h[g++]=-Math.cos(u)*Math.cos(p)*1;u=(n.x+m)*MO.Lang.Const.DEGREE_RATE;p=(n.y-m)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(u)*Math.cos(p)*1;h[g++]=1*Math.sin(p);h[g++]=-Math.cos(u)*Math.cos(p)*1;u=(n.x-m)*MO.Lang.Const.DEGREE_RATE;p=(n.y-m)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(u)*Math.cos(p)*1;h[g++]=1*Math.sin(p);h[g++]=-Math.cos(u)*Math.cos(p)*1;u=e.rangeColor();e=parseInt(255*
u.red);n=parseInt(255*u.green);m=parseInt(255*u.blue);u=parseInt(255*u.alpha);for(p=0;4>p;p++)l[k++]=e,l[k++]=n,l[k++]=m,l[k++]=u}this._vertexPositionBuffer.upload(h,12,f);this._vertexColorBuffer.upload(l,4,f);this._indexBuffer.setCount(6*c)};
MO.FEaiCitysRange3dRenderable_dispose=function(){this._texture=MO.Lang.Object.dispose(this._texture);this._vertexPositionBuffer=MO.Lang.Object.dispose(this._vertexPositionBuffer);this._vertexCoordBuffer=MO.Lang.Object.dispose(this._vertexCoordBuffer);this._indexBuffer=MO.Lang.Object.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
MO.FEaiCitys3dRenderable=function(a){a=MO.Class.inherits(this,a,MO.FE3dRenderable);a._ready=!1;a._image=null;a._levelCoordLeft=null;a._levelCoordRight=null;a._levelScale=null;a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a._level=MO.Class.register(a,new MO.AGetSet("_level"));a._citySize=MO.Class.register(a,new MO.AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=MO.FEaiCitys3dRenderable_onImageLoad;a.construct=MO.FEaiCitys3dRenderable_construct;
a.testReady=MO.FEaiCitys3dRenderable_testReady;a.setup=MO.FEaiCitys3dRenderable_setup;a.upload=MO.FEaiCitys3dRenderable_upload;a.dispose=MO.FEaiCitys3dRenderable_dispose;return a};MO.FEaiCitys3dRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0};
MO.FEaiCitys3dRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new MO.TObjects;this._material=MO.Class.create(MO.FE3dMaterial);var a=this._levelCoordLeft={};a[1]=0;a[2]=.25;a[3]=.5;a[4]=.75;a=this._levelCoordRight={};a[1]=.25;a[2]=.5;a[3]=.75;a[4]=1;a=this._levelScale={};a[1]=.7;a[2]=.5;a[3]=.4;a[4]=.2};MO.FEaiCitys3dRenderable_testReady=function(){return this._ready};
MO.FEaiCitys3dRenderable_setup=function(){var a=this._graphicContext,b=this._citys.count();this._vertexCount=4*b;var c=this._vertexPositionBuffer=a.createVertexBuffer();c.setCode("position");c.setFormatCd(MO.EG3dAttributeFormat.Float3);this.pushVertexBuffer(c);c=this._vertexCoordBuffer=a.createVertexBuffer();c.setCode("coord");c.setFormatCd(MO.EG3dAttributeFormat.Float2);this.pushVertexBuffer(c);c=this._vertexColorBuffer=a.createVertexBuffer();c.setCode("color");c.setFormatCd(MO.EG3dAttributeFormat.Byte4Normal);
this.pushVertexBuffer(c);for(var d=6*b,c=0,e=new Uint16Array(d),f=0;f<b;f++){var g=4*f;e[c++]=g+0;e[c++]=g+1;e[c++]=g+2;e[c++]=g+0;e[c++]=g+2;e[c++]=g+3}c=this._indexBuffer=a.createIndexBuffer();c.upload(e,d);this.pushIndexBuffer(c);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(MO.EG3dSamplerFilter.ClampToEdge,MO.EG3dSamplerFilter.ClampToEdge);this.pushTexture(a,"diffuse");a=this._material.info();a.effectCode="eai.citys";a.optionAlpha=!0;a.optionDepth=!1;a.optionDouble=!1;
a.ambientColor.setHex("#FFFFFF");this._material._textures=this._textures;a=MO.Class.create(MO.FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("{eai.resource}/citys.png");this._ready=!1};
MO.FEaiCitys3dRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),k=0,l=new Float32Array(2*f),n=0,m=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),e.visible()){e.range();var u=e.location(),p=e.data().level();if(1!=p&&2!=p&&3!=p&&4!=p)throw new TError("Invalid level.");var r=e.provinceEntity();r&&r.currentZ();var r=this._levelCoordLeft[p],q=this._levelCoordRight[p],p=this._levelScale[p],
t=(u.x-p)*MO.Lang.Const.DEGREE_RATE,v=(u.y+p)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(t)*Math.cos(v)*1;h[g++]=1*Math.sin(v);h[g++]=-Math.cos(t)*Math.cos(v)*1;t=(u.x+p)*MO.Lang.Const.DEGREE_RATE;v=(u.y+p)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(t)*Math.cos(v)*1;h[g++]=1*Math.sin(v);h[g++]=-Math.cos(t)*Math.cos(v)*1;t=(u.x+p)*MO.Lang.Const.DEGREE_RATE;v=(u.y-p)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(t)*Math.cos(v)*1;h[g++]=1*Math.sin(v);h[g++]=-Math.cos(t)*Math.cos(v)*1;t=(u.x-p)*MO.Lang.Const.DEGREE_RATE;
v=(u.y-p)*MO.Lang.Const.DEGREE_RATE;h[g++]=Math.sin(t)*Math.cos(v)*1;h[g++]=1*Math.sin(v);h[g++]=-Math.cos(t)*Math.cos(v)*1;l[k++]=r;l[k++]=1;l[k++]=q;l[k++]=1;l[k++]=q;l[k++]=0;l[k++]=r;l[k++]=0;q=e.color();e=parseInt(255*q.red);u=parseInt(255*q.green);r=parseInt(255*q.blue);q=parseInt(255*q.alpha);for(p=0;4>p;p++)m[n++]=e,m[n++]=u,m[n++]=r,m[n++]=q}this._vertexPositionBuffer.upload(h,12,f);this._vertexCoordBuffer.upload(l,8,f);this._vertexColorBuffer.upload(m,4,f);this._indexBuffer.setCount(6*c)};
MO.FEaiCitys3dRenderable_dispose=function(){this._texture=MO.Lang.Object.dispose(this._texture);this._vertexPositionBuffer=MO.Lang.Object.dispose(this._vertexPositionBuffer);this._vertexCoordBuffer=MO.Lang.Object.dispose(this._vertexCoordBuffer);this._vertexColorBuffer=MO.Lang.Object.dispose(this._vertexColorBuffer);this._indexBuffer=MO.Lang.Object.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
MO.FEaiCitysRangeRenderable=function(a){a=MO.Class.inherits(this,a,MO.FE3dRenderable);a._ready=!1;a._image=null;a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a._citySize=MO.Class.register(a,new MO.AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexColorBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=MO.FEaiCitysRangeRenderable_onImageLoad;a.construct=MO.FEaiCitysRangeRenderable_construct;a.testReady=MO.FEaiCitysRangeRenderable_testReady;a.setup=
MO.FEaiCitysRangeRenderable_setup;a.upload=MO.FEaiCitysRangeRenderable_upload;a.dispose=MO.FEaiCitysRangeRenderable_dispose;return a};MO.FEaiCitysRangeRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0};MO.FEaiCitysRangeRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new MO.TObjects;this._material=MO.Class.create(MO.FE3dMaterial)};MO.FEaiCitysRangeRenderable_testReady=function(){return this._ready};
MO.FEaiCitysRangeRenderable_setup=function(){var a=this._graphicContext,b=this._citys.count(),c=this._vertexCount=4*b,d=this._vertexPositionBuffer=a.createVertexBuffer();d.setCode("position");d.setFormatCd(MO.EG3dAttributeFormat.Float3);this.pushVertexBuffer(d);for(var d=0,e=new Float32Array(2*c),f=0;f<b;f++)e[d++]=0,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=0,e[d++]=0,e[d++]=0;d=this._vertexCoordBuffer=a.createVertexBuffer();d.setCode("coord");d.setFormatCd(MO.EG3dAttributeFormat.Float2);d.upload(e,
8,c);this.pushVertexBuffer(d);d=this._vertexColorBuffer=a.createVertexBuffer();d.setCode("color");d.setFormatCd(MO.EG3dAttributeFormat.Byte4Normal);this.pushVertexBuffer(d);c=6*b;d=0;e=new Uint16Array(c);for(f=0;f<b;f++){var g=4*f;e[d++]=g+0;e[d++]=g+1;e[d++]=g+2;e[d++]=g+0;e[d++]=g+2;e[d++]=g+3}d=this._indexBuffer=a.createIndexBuffer();d.upload(e,c);this.pushIndexBuffer(d);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(MO.EG3dSamplerFilter.ClampToEdge,MO.EG3dSamplerFilter.ClampToEdge);
this.pushTexture(a,"diffuse");a=this._material.info();a.effectCode="eai.citys.range";a.optionAlpha=!0;a.optionDepth=!1;this._material._textures=this._textures;a=MO.Class.create(MO.FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("{eai.resource}/dot.png");this._ready=!1};
MO.FEaiCitysRangeRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),k=0,l=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),e.visible()){var n=e.location(),m=e.range();e.size();var u=e.provinceEntity(),p=0;u&&(p=u.currentZ());h[g++]=n.x-m;h[g++]=n.y+m;h[g++]=p;h[g++]=n.x+m;h[g++]=n.y+m;h[g++]=p;h[g++]=n.x+m;h[g++]=n.y-m;h[g++]=p;h[g++]=n.x-m;h[g++]=n.y-m;h[g++]=p;u=e.rangeColor();e=parseInt(255*
u.red);n=parseInt(255*u.green);m=parseInt(255*u.blue);u=parseInt(255*u.alpha);for(p=0;4>p;p++)l[k++]=e,l[k++]=n,l[k++]=m,l[k++]=u}this._vertexPositionBuffer.upload(h,12,f);this._vertexColorBuffer.upload(l,4,f);this._indexBuffer.setCount(6*c)};
MO.FEaiCitysRangeRenderable_dispose=function(){this._texture=MO.Lang.Object.dispose(this._texture);this._vertexPositionBuffer=MO.Lang.Object.dispose(this._vertexPositionBuffer);this._vertexCoordBuffer=MO.Lang.Object.dispose(this._vertexCoordBuffer);this._indexBuffer=MO.Lang.Object.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
MO.FEaiCitysRenderable=function(a){a=MO.Class.inherits(this,a,MO.FE3dRenderable);a._ready=!1;a._image=null;a._levelCoordLeft=null;a._levelCoordRight=null;a._levelScale=null;a._citys=MO.Class.register(a,new MO.AGetter("_citys"));a._level=MO.Class.register(a,new MO.AGetSet("_level"));a._citySize=MO.Class.register(a,new MO.AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=MO.FEaiCitysRenderable_onImageLoad;a.construct=MO.FEaiCitysRenderable_construct;
a.testReady=MO.FEaiCitysRenderable_testReady;a.setup=MO.FEaiCitysRenderable_setup;a.upload=MO.FEaiCitysRenderable_upload;a.dispose=MO.FEaiCitysRenderable_dispose;return a};MO.FEaiCitysRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0};
MO.FEaiCitysRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new MO.TObjects;this._material=MO.Class.create(MO.FE3dMaterial);var a=this._levelCoordLeft={};a[1]=0;a[2]=.25;a[3]=.5;a[4]=.75;a=this._levelCoordRight={};a[1]=.25;a[2]=.5;a[3]=.75;a[4]=1;a=this._levelScale={};a[1]=.7;a[2]=.5;a[3]=.4;a[4]=.2};MO.FEaiCitysRenderable_testReady=function(){return this._ready};
MO.FEaiCitysRenderable_setup=function(){var a=this._graphicContext,b=this._citys.count();this._vertexCount=4*b;var c=this._vertexPositionBuffer=a.createVertexBuffer();c.setCode("position");c.setFormatCd(MO.EG3dAttributeFormat.Float3);this.pushVertexBuffer(c);c=this._vertexCoordBuffer=a.createVertexBuffer();c.setCode("coord");c.setFormatCd(MO.EG3dAttributeFormat.Float2);this.pushVertexBuffer(c);c=this._vertexColorBuffer=a.createVertexBuffer();c.setCode("color");c.setFormatCd(MO.EG3dAttributeFormat.Byte4Normal);
this.pushVertexBuffer(c);for(var d=6*b,c=0,e=new Uint16Array(d),f=0;f<b;f++){var g=4*f;e[c++]=g+0;e[c++]=g+1;e[c++]=g+2;e[c++]=g+0;e[c++]=g+2;e[c++]=g+3}c=this._indexBuffer=a.createIndexBuffer();c.upload(e,d);this.pushIndexBuffer(c);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(MO.EG3dSamplerFilter.ClampToEdge,MO.EG3dSamplerFilter.ClampToEdge);this.pushTexture(a,"diffuse");a=this._material.info();a.effectCode="eai.citys";a.optionAlpha=!0;a.optionDepth=!1;a.ambientColor.setHex("#FFFFFF");
this._material._textures=this._textures;a=MO.Class.create(MO.FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("{eai.resource}/citys.png");this._ready=!1};
MO.FEaiCitysRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),k=0,l=new Float32Array(2*f),n=0,m=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),e.visible()){e.range();var u=e.location(),p=e.data().level();1!=p&&2!=p&&3!=p&&(p=4);var r=e.provinceEntity(),q=0;r&&(q=r.currentZ());var r=this._levelCoordLeft[p],t=this._levelCoordRight[p],p=this._levelScale[p];h[g++]=u.x-p;h[g++]=u.y+p;
h[g++]=q;h[g++]=u.x+p;h[g++]=u.y+p;h[g++]=q;h[g++]=u.x+p;h[g++]=u.y-p;h[g++]=q;h[g++]=u.x-p;h[g++]=u.y-p;h[g++]=q;l[k++]=r;l[k++]=1;l[k++]=t;l[k++]=1;l[k++]=t;l[k++]=0;l[k++]=r;l[k++]=0;p=e.color();e=parseInt(255*p.red);u=parseInt(255*p.green);q=parseInt(255*p.blue);p=parseInt(255*p.alpha);for(r=0;4>r;r++)m[n++]=e,m[n++]=u,m[n++]=q,m[n++]=p}this._vertexPositionBuffer.upload(h,12,f);this._vertexCoordBuffer.upload(l,8,f);this._vertexColorBuffer.upload(m,4,f);this._indexBuffer.setCount(6*c)};
MO.FEaiCitysRenderable_dispose=function(){this._texture=MO.Lang.Object.dispose(this._texture);this._vertexPositionBuffer=MO.Lang.Object.dispose(this._vertexPositionBuffer);this._vertexCoordBuffer=MO.Lang.Object.dispose(this._vertexCoordBuffer);this._vertexColorBuffer=MO.Lang.Object.dispose(this._vertexColorBuffer);this._indexBuffer=MO.Lang.Object.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
MO.FEaiEarthFlatEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.earth.flat";a._cloudPosition=0;a._translateX=0;a.construct=MO.FEaiEarthFlatEffect_construct;a.drawRenderable=MO.FEaiEarthFlatEffect_drawRenderable;a.despose=MO.FEaiEarthFlatEffect_despose;return a};MO.FEaiEarthFlatEffect_construct=function(){this.__base.FG3dAutomaticEffect.construct.call(this);this._speedCloud=new MO.SVector4(0,0,0,0);this._speedWater=new MO.SVector4(0,0,0,0)};
MO.FEaiEarthFlatEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program;this._speedCloud.add(-4E-5,-3E-5,-2E-5,1);this._speedWater.add(2.4E-5,1.5E-5,1E-5,1);var e=b.material();e.info();this.bindMaterial(e);b.display().currentMatrix();d.setParameter("fc_cloud",this._speedCloud);d.setParameter4("fc_land",0,0,0,0);d.setParameter4("fc_ocean",0,0,0,0);d.setParameter("fc_water",this._speedWater);this.bindAttributes(b);this.bindSamplers(b);c.drawTriangles(b.indexBuffer())};
MO.FEaiEarthFlatEffect_despose=function(){this._speedCloud=MO.Lang.Object.despose(this._speedCloud);this._speedWater=MO.Lang.Object.despose(this._speedWater);this.__base.FG3dAutomaticEffect.despose.call(this)};
MO.FEaiEarthRangeEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.earth.flat";a._cloudPosition=0;a._translateX=0;a.construct=MO.FEaiEarthRangeEffect_construct;a.drawRenderable=MO.FEaiEarthRangeEffect_drawRenderable;a.despose=MO.FEaiEarthRangeEffect_despose;return a};MO.FEaiEarthRangeEffect_construct=function(){this.__base.FG3dAutomaticEffect.construct.call(this);this._speedCloud=new MO.SVector4(0,0,0,0);this._speedWater=new MO.SVector4(0,0,0,0)};
MO.FEaiEarthRangeEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program;this._speedCloud.add(-4E-5,-3E-5,-2E-5,1);this._speedWater.add(2.4E-5,1.5E-5,1E-5,1);var e=b.material();e.info();this.bindMaterial(e);b.display().currentMatrix();d.setParameter("fc_cloud",this._speedCloud);d.setParameter4("fc_land",0,0,0,0);d.setParameter4("fc_ocean",0,0,0,0);d.setParameter("fc_water",this._speedWater);this.bindAttributes(b);this.bindSamplers(b);c.drawTriangles(b.indexBuffer())};
MO.FEaiEarthRangeEffect_despose=function(){this._speedCloud=MO.Lang.Object.despose(this._speedCloud);this._speedWater=MO.Lang.Object.despose(this._speedWater);this.__base.FG3dAutomaticEffect.despose.call(this)};MO.FEaiEarthSkyEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.earth.sky";a._cloudPosition=0;a._translateX=0;a.construct=MO.FEaiEarthSkyEffect_construct;a.drawRenderable=MO.FEaiEarthSkyEffect_drawRenderable;a.despose=MO.FEaiEarthSkyEffect_despose;return a};
MO.FEaiEarthSkyEffect_construct=function(){this.__base.FG3dAutomaticEffect.construct.call(this);this._const=new MO.SVector4(0,0,0,0)};MO.FEaiEarthSkyEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program;this._const.add(1E-4,1E-4,1E-4,2/Math.PI);var e=b.material();e.info();this.bindMaterial(e);b.display().currentMatrix();d.setParameter("vc_const",this._const);d.setParameter("fc_const",this._const);this.bindAttributes(b);this.bindSamplers(b);c.drawTriangles(b.indexBuffers().first())};
MO.FEaiEarthSkyEffect_despose=function(){this._const=MO.Lang.Object.despose(this._const);this.__base.FG3dAutomaticEffect.despose.call(this)};MO.FEaiMapFaceEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.map.face";a.drawRenderable=MO.FEaiMapFaceEffect_drawRenderable;return a};
MO.FEaiMapFaceEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=a.calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),f=b.material();f.info();this.bindMaterial(f);for(var f=b.mergeRenderables(),g=f.count(),h=MO.Lang.TypeArray.findTemp(MO.EDataType.Float32,16*g),k=0;k<g;k++){var l=16*k,n=f.at(k);n.matrix().writeData(h,l);var m=n.color();h[l+12]=m.red;h[l+13]=m.green;h[l+14]=m.blue;var u=n._shape;u?(n=u._entity.normalScale(),h[l+15]=n):(n.matrix(),h[l+15]=m.alpha)}d.setParameter("vc_data",
h);f=b.display().currentMatrix();d.setParameter("vc_model_matrix",f);d.setParameter("vc_vp_matrix",e);this.bindAttributes(b);d=b.indexBuffers().first();c.drawTriangles(d)};MO.FEaiSelectAutomaticEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.select.automatic";a.drawRenderable=MO.FEaiSelectAutomaticEffect_drawRenderable;return a};
MO.FEaiSelectAutomaticEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=c.size(),e=this._program,f=a._selectX,g=a._selectY,h=b.material();h.info();this.bindMaterial(h);for(var k=b.mergeRenderables(),l=k.count(),n=MO.Lang.TypeArray.findTemp(MO.EDataType.Float32,16*l),h=0;h<l;h++){var m=16*h,u=k.at(h),p=u.matrix(),u=u.color();p.writeData(n,m);n[m+12]=u.red;n[m+13]=u.green;n[m+14]=u.blue;n[m+15]=u.alpha}e.setParameter("vc_data",n);e.setParameter("vc_model_matrix",b.currentMatrix());e.setParameter("vc_vp_matrix",
a.calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix));e.setParameter4("vc_offset",d.width,d.height,1-f/d.width*2,g/d.height*2-1);this.bindAttributes(b);this.bindSamplers(b);d=b.indexBuffers();e=d.count();for(h=0;h<e;h++)f=d.at(h),c.drawTriangles(f)};MO.FEaiSelectPass=function(a){a=MO.Class.inherits(this,a,MO.FG3dSelectPass);a.drawRegion=MO.FEaiSelectPass_drawRegion;return a};
MO.FEaiSelectPass_drawRegion=function(a){var b=this._graphicContext,c=b.handle();b.setRenderTarget(this._renderTarget);b.clear(0,0,0,0,1,1);var d=a.allRenderables();this.activeEffects(a,d);d=a._selectRenderable;if(d.optionSelect()){var e=d.activeEffect();b.setProgram(e.program());e.drawRenderable(a,d)}c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,this._data);b=this._data[0]+(this._data[1]<<8)+(this._data[2]<<16);this._selectRenderable=null;0!=b&&(this._selectRenderable=a._selectRenderable.findMergeRenderable(b-
1))};MO.FEaiSelectTechnique=function(a){a=MO.Class.inherits(this,a,MO.FG3dTechnique);a._code="eai";a._passSelect=MO.Class.register(a,new MO.AGetter("_passSelect"));a.setup=MO.FEaiSelectTechnique_setup;a.test=MO.FEaiSelectTechnique_test;return a};MO.FEaiSelectTechnique_setup=function(){this.__base.FG3dTechnique.setup.call(this);this.registerMode(MO.EG3dTechniqueMode.Result);var a=this._passSelect=MO.Class.create(MO.FEaiSelectPass);a.linkGraphicContext(this);a.setup();this._passes.push(a)};
MO.FEaiSelectTechnique_test=function(a,b,c,d){a._selectX=c;a._selectY=d;a._selectRenderable=b;a.setTechnique(this);this.drawRegion(a);return this._passSelect._selectRenderable};MO.FEaiWorldFaceEffect=function(a){a=MO.Class.inherits(this,a,MO.FG3dAutomaticEffect);a._code="eai.world.face";a.drawRenderable=MO.FEaiWorldFaceEffect_drawRenderable;return a};
MO.FEaiWorldFaceEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=a.calculate(MO.EG3dRegionParameter.CameraViewProjectionMatrix),f=b.material();f.info();this.bindMaterial(f);c.setCullingMode(!1);for(var f=b.mergeRenderables(),g=f.count(),h=MO.Lang.TypeArray.findTemp(MO.EDataType.Float32,16*g),k=0;k<g;k++){var l=16*k,n=f.at(k),m=n.matrix(),n=n.color();m.writeData(h,l);h[l+12]=n.red;h[l+13]=n.green;h[l+14]=n.blue;h[l+15]=n.alpha}d.setParameter("vc_data",h);f=b.display().currentMatrix();
d.setParameter("vc_model_matrix",f);d.setParameter("vc_vp_matrix",e);this.bindAttributes(b);d.setSampler("fs_diffuse",b.material().textures().get("diffuse"));d=b.indexBuffers().first();c.drawTriangles(d)};
MO.FEaiDynamicInfo=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._lastTick=0;a._name="EngineInfo";a._stage=MO.Class.register(a,new MO.AGetSet("_stage"));a._guiManager=MO.Class.register(a,new MO.AGetSet("_guiManager"));a._context=MO.Class.register(a,new MO.AGetSet("_context"));a._ticker=null;a.onPaintBegin=MO.FEaiDynamicInfo_onPaintBegin;a.oeUpdate=MO.FEaiDynamicInfo_oeUpdate;a.construct=MO.FEaiDynamicInfo_construct;return a};
MO.FEaiDynamicInfo_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);if(null!=this._stage&&null!=this._context){var b=a.graphic,c=a.rectangle;this._stage.timer();a=this._stage.statistics();var d=this._context.statistics(),c=c.top+20;b.setFont("16px sans-serif");var e=MO.Window.Browser,f=e.capability();b.drawText(MO.Lang.String.format("Agent         : {1}",e.code),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Browser    : type={1}, orientation={2}, canvas_scale={3}",
e.typeCd(),e.orientationCd(),f.canvasScale),10,c,"#FFFFFF");var c=c+20,e=this._guiManager.desktop(),g=e.canvas2d(),f=e.canvas3d(),h=MO.Window.Browser.capability().pixelRatio;b.drawText(MO.Lang.String.format("Screen        : ratio={1}, screen_size={2}, size={3}",h,e.screenSize().toDisplay(),e.size().toDisplay()),10,c,"#FFFFFF");c+=20;g=g._hCanvas;b.drawText(MO.Lang.String.format(" - Canvas2d   : size={1}x{2}, inner_size={3}x{4}",g.offsetWidth,g.offsetHeight,g.width,g.height),10,c,"#FFFFFF");c+=20;
g=f._hCanvas;b.drawText(MO.Lang.String.format(" - Canvas3d   : size={1}x{2}, inner_size={3}x{4}",g.offsetWidth,g.offsetHeight,g.width,g.height),10,c,"#FFFFFF");c+=20;f=f.graphicContext();b.drawText(MO.Lang.String.format("   - Context  : {1}",f.size().toDisplay()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format("   - Viewport : {1}",f.viewportRectangle()),10,c,"#FFFFFF");c+=20;f=this._stage.camera();g=f.projection();b.drawText(MO.Lang.String.format("Stage         :"),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Camera     : position={1}",
f.position()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Projection : size={1}, znear={2}, zfar={3}",g.size(),g.znear(),g.zfar()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format("Frame         : rate={1}, span=[{2}]",MO.Timer.rate(),a._frame),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Process    : {1}",a._frameProcess),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Draw       : draw={1}, sort={2}",a._frameDraw,a._frameDrawSort),10,c,"#FFFFFF");c+=
20;b.drawText(MO.Lang.String.format("Draw          : count={1}, triangle={2}",d.frameDrawCount(),d.frameTriangleCount()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Const      : count={1}, length={2}",d.frameConstCount(),d.frameConstLength()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Alloc      : buffer={1}, texture={2}",d.frameBufferCount(),d.frameTextureCount()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format(" - Total      : program={1}, layout={2}, vertex={3}, index={4}",
d.programTotal(),d.layoutTotal(),d.vertexBufferTotal(),d.indexBufferTotal()),10,c,"#FFFFFF");c+=20;b.drawText(MO.Lang.String.format("Investment    : entity={1}, table={2}, pool_item={3}, pool_free={4}",this._investmentEntityCount,this._investmentTableEntityCount,this._investmentPoolItemCount,this._investmentPoolFreeCount),10,c,"#FFFFFF");e.resize()}};MO.FEaiDynamicInfo_oeUpdate=function(a){this._ticker.process()&&this.dirty();return MO.EEventStatus.Stop};
MO.FEaiDynamicInfo_construct=function(){this.__base.FGuiControl.construct.call(this);this._size.set(1024,512);this._ticker=new MO.TTicker(1E3)};
with(MO)MO.FGui24HTimeline=function(a){a=MO.Class.inherits(this,a,FGuiControl);a._startTime=MO.Class.register(a,new AGetSet("_startTime"));a._endTime=MO.Class.register(a,new AGetSet("_endTime"));a._data=null;a._ready=!1;a._investmentTotal=0;a._intervalMiniute=10;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new AGetSet("_triangleHeight"),12);a._decoLineGap=
MO.Class.register(a,new AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new AGetSet("_decoLineWidth"),30);a.oeUpdate=FGui24HTimeline_oeUpdate;a.construct=FGui24HTimeline_construct;a.sync=FGui24HTimeline_sync;a.onPaintBegin=FGui24HTimeline_onPaintBegin;a.on24HDataFetch=FGui24HTimeline_on24HDataFetch;return a},MO.FGui24HTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new TDate;this._endTime=new TDate},MO.FGui24HTimeline_sync=function(){if(this._ready){var a=
MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute(this._intervalMiniute);var b=this._startTime;b.assign(a);b.addDay(-1);var c=this._endTime;c.assign(a);MO.Console.find(MO.FEaiLogicConsole).statistics().doInvestmentTrend(this,this.on24HDataFetch,b.format(),c.format(),60*this._intervalMiniute)}}},MO.FGui24HTimeline_on24HDataFetch=function(a){this._investmentTotal=0;if(a=this._data=a.content.collection)for(var b=a.length,c=0;c<b;c++)this._investmentTotal+=
parseFloat(a[c].investment);this.dirty()},MO.FGui24HTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0,this.sync()),MO.EEventStatus.Stop},MO.FGui24HTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();
b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),k=c-g-this.decoLineWidth(),g=d+60,l=e-30,n=l-g;b.drawLine(h,f,k,f,"#F8CB3D",
3);for(var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;!e.isAfter(m);){var t=e.date.getTime()-c,t=h+t/u*(k-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",1);p=e.format("HH24:00");e.addHour(1);if(r=!r)b.setFont("bold 20px Microsoft YaHei"),q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}e.date.setTime(c);e.refresh();if((q=this._data)&&!(1>q.length)){for(f=r=0;f<q.length;f++)m=parseInt(q[f].investment),m>r&&(r=m);p=1E4*n/r;m=parseInt(q[0].investment);
n=l-m/1E4*p;m=b._handle;m.lineCap="round";m.beginPath();m.moveTo(h,n);r=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(EEaiRate.Investment);for(f=1;f<q.length;f++){e.parseAuto(q[f].date);e.refresh();var t=e.date.getTime()-c,t=h+t/u*(k-h),v=l-q[f].investment/1E4*p,v=v-this._baseHeight;m.lineTo(t,v)}p=MO.Lang.Hex.format(r.findRate(0));u="#"+p.substring(2);k="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";
p=MO.Lang.Hex.format(r.findRate(1));f="#"+p.substring(2);r="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";p=b.createLinearGradient(0,l,0,g);p.addColorStop("0",u);p.addColorStop("1",f);g=b.createLinearGradient(0,l,0,g);g.addColorStop("0",k);g.addColorStop("1",r);m.strokeStyle=p;m.fillStyle=g;m.lineWidth=4;m.stroke();m.lineTo(t,l);m.lineTo(h,l);m.lineTo(h,n);m.fill();e.date.setTime(c);e.refresh();t=-1;h=g=0;e.parseAuto(q[0].date);
e.refresh();t=e.date.getHours();for(f=0;f<q.length;f++)e.parseAuto(q[f].date),e.refresh(),l=e.date.getHours(),t==l?g+=parseInt(q[f].investment):(g>h&&(h=g,g=0),t=l);b.setFont("bold 24px Microsoft YaHei");b.drawText("24\u5c0f\u65f6\u6295\u8d44\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u5c0f\u65f6\u5cf0\u503c\uff1a");h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");t=b.textWidth(h);g=MO.Lang.Float.unitFormat(this._investmentTotal,0,0,2,0,1E4,"\u4e07");l=b.textWidth(g);
k=MO.Lang.Float.unitFormat(this._investmentTotal/24,0,0,2,0,1E4,"\u4e07");u=b.textWidth(k);f=Math.max(Math.max(t,l),u);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+f-l,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+f-t,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(k,a+q+f-u,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FGui2DMap=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._bgImage=null;a._countryRes=MO.Class.register(a,new MO.AGetSet("_countryRes"));a.construct=MO.FGui2DMap_construct;a.onPaintBegin=MO.FGui2DMap_onPaintBegin;a.onPaintCity=MO.FGui2DMap_onPaintCity;a.dispose=MO.FGui2DMap_dispose;return a};MO.FGui2DMap_construct=function(){this.__base.FGuiControl.construct.call(this)};
MO.FGui2DMap_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);if(this._countryRes){var b=a.graphic,c=a.rectangle,d=this._countryRes;b.drawRectangle(c.left,c.top,c.width,c.height,"#FF0000",2);b=b._handle;b.lineCap="round";b.beginPath();for(var d=d.data().provinces(),c=d.count(),e,f,g,h=0;h<c;h++){e=d.at(h);e=e.boundaries();for(var k=0;k<e._count;k++){f=e.items()[k];positionCount=f._positionCount;position=f._positions;b.moveTo(14*position[0]+-1E3,14*(90-position[1])+-400);
for(var l=0;l<positionCount;l++)f=14*position[0+2*l]+-1E3,g=14*(90-position[1+2*l])+-400,b.lineTo(f,g)}}b.fillStyle="rgba(8, 13, 25, 0.63)";b.strokeStyle="#00B5F6";b.lineWidth=1;b.stroke();b.fill();this.onPaintCity(a)}};
MO.FGui2DMap_onPaintCity=function(a,b){var c=a.graphic,d=c._handle,e=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard("1410"),f=14*e._location.x+-1E3,e=14*(90-e._location.y)+-400;MO.Class.create(MO.FEaiCityEntity);d=d.createRadialGradient(f,e,1,f,e,20);d.addColorStop(0,"red");d.addColorStop(1,"rgba(255, 255, 255, 0)");c.drawCircle(f,e,20,1,"rgba(255, 255, 255, 0)",d);c.drawCircle(f,e,2,1,"rgba(255, 255, 255, 0)","#f96")};
MO.FGui2DMap_dispose=function(){this._date=MO.Lang.Object.dispose(this._date);this.__base.FGuiControl.dispose.call(this)};
MO.FGuiFPCCTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._frameTime=MO.Class.register(a,new MO.AGetSet("_frameTime"));a._ready=MO.Class.register(a,new MO.AGetSet("_ready"),!1);a._padding=0;a._headFontText=null;a._headFontStyle=null;a._headFontHeight=0;a._rankHeight=0;a._rankCount=0;a._tableTitleTexts=null;a._tableTitleTextHeight=0;a._tableTextPadding=0;a.setup=MO.FGuiFPCCTable_setup;a.onPaintBegin=MO.FGuiFPCCTable_onPaintBegin;a.onImageLoad=MO.FGuiFPCCTable_onImageLoad;a.drawRectangleByText=
MO.FGuiFPCCTable_drawRectangleByText;return a};
MO.FGuiFPCCTable_setup=function(){this._headFontText="\u7406\u8d22\u5e08\u4e1a\u7ee9\u5c55\u793a\u4e2d\u5fc3";this._headFontStyle="bold 32px Microsoft YaHei";this._headFontHeight=30;this._padding=6;this._rankHeight=40;this._rankCount=3;this._tableTitleTexts="\u65f6\u95f4 \u516c\u53f8 \u7406\u8d22\u5e08 \u7406\u8d22\u5e08\u4e1a\u7ee9 \u6ce8\u518c/\u6295\u8d44 \u6295\u8d44/\u8d4e\u56de".split(" ");this._tableTitleFontStyle="16px Microsoft songti";this._tableTitleTextHeight=16;this._tableTextPadding=
7};MO.FGuiFPCCTable_onImageLoad=function(){0==--this._imageToLoad&&(this._ready=!0,this._lastTick=MO.Timer.current(),this.dirty())};
MO.FGuiFPCCTable_onPaintBegin=function(a){var b=a.graphic,c=a.rectangle,d=c.left,e=c.top;a=c.height;c=c.width;b.drawRectangle(d,e,c,a,"#fff",1);b.setFont(this._headFontStyle);var f=b.textWidth(this._headFontText),f=d+.5*(c-f),e=e+this._padding+this._headFontHeight;b.setFont(this._headFontStyle);b.drawText(this._headFontText,f,e,"#55FFED");for(var d=d+this._padding,e=e+2*this._padding,f=c-2*this._padding,g=0,c=1;c<=this._rankCount;c++)1==c?b.drawRectangle(d,e,f,this._rankHeight,"#fff",1):b.drawRectangle(d,
e+this._rankHeight*(c-1),f,this._rankHeight,"#fff",1),3==c&&(g=e+this._rankHeight*(c-1)+this._rankHeight);c=g+this._padding;b.drawRectangle(d,c,f,a-g-this._padding,"#fff",1);a=d+this._padding;b.setFont(this._tableTitleFontStyle);for(d=0;d<this._tableTitleTexts.length;d++)e=this._tableTitleTexts[d],b.textWidth(e),f=c+this._tableTitleTextHeight+this._tableTextPadding,0==d?(b.drawText(e,a,f,"#fff"),this.drawRectangleByText(b,e,this._tableTitleTextHeight,"#7798f2",1,a,f,1)):(g=b.textWidth(this._tableTitleTexts[d-
1]),a=a+g+this._tableTextPadding,b.drawText(e,a,f,"#fff"),this.drawRectangleByText(b,e,this._tableTitleTextHeight,"#ff6d4b",1,a,f,1))};MO.FGuiFPCCTable_drawRectangleByText=function(a,b,c,d,e,f,g,h){h*=1.5;f-=h;g=g-h-c;b=a.textWidth(b);a.drawRectangle(f,g,2*h+b,c+4*h,d,e)};
with(MO)MO.FGuiHistoryMilestoneBar=function(a){a=MO.Class.inherits(this,a,FGuiControl);a._bgImage=null;a._wanBGImage=null;a._yiBGImage=null;a._numImages=null;a._wanImage=null;a._yiImage=null;a._data=MO.Class.register(a,new AGetSet("_data"));a._fullWidth=0;a._fullHeight=0;a.setup=FGuiHistoryMilestoneBar_setup;a.onPaintBegin=FGuiHistoryMilestoneBar_onPaintBegin;a.dispose=FGuiHistoryMilestoneBar_dispose;return a},MO.FGuiHistoryMilestoneBar_setup=function(a){this._data=a;var b=MO.Console.find(MO.FImageConsole);
this._wanBGImage=b.load("{eai.resource}/milestone/bar_wan.png");this._yiBGImage=b.load("{eai.resource}/milestone/bar_yi.png");this._wanImage=b.load("{eai.resource}/number_2/wan.png");this._yiImage=b.load("{eai.resource}/number_2/yi.png");this._numImages=Array(10);for(var c=0;10>c;c++)this._numImages[c]=b.load("{eai.resource}/number_2/"+c+".png");1E4<=a.investmentTotal()?(this._bgImage=this._yiBGImage,this.setWidth(371),this.setHeight(80)):(this._bgImage=this._wanBGImage,this.setWidth(341),this.setHeight(76))},
MO.FGuiHistoryMilestoneBar_onPaintBegin=function(a){if(this._data){this.__base.FGuiControl.onPaintBegin.call(this,a);a=a.graphic;var b=this._clientRectangle,c=this._bgImage._size;a.drawImage(this._bgImage,b.left,b.top,c.width,c.height);var d=b.left+25,e=b.top+b.height/2,c=1,f=this.data().investmentTotal().toString();if(4<f.length){c=.53;a.setFont("22px Microsoft YaHei");var e=e+10,f=f.substring(0,f.length-4),g=this._yiImage}else c=.35,a.setFont("18px Microsoft YaHei"),e+=6,g=this._wanImage;var h=
this.data().code(),h=h.substring(0,4)+"\u5e74"+h.substring(4,6)+"\u6708"+h.substring(6,8)+"\u65e5";a.textWidth(h);a.drawText(h,d,e,"#FFEE78");for(var d=this._numImages[0]._size,e=this._yiImage._size,h=b.left+b.width-(f.length*d.width*c+e.width*c)-55,b=b.top+(b.height-d.height*c)/2,k=0;k<f.length;k++)a.drawImage(this._numImages[f[k]],h+k*d.width*c,b,d.width*c,d.height*c);a.drawImage(g,h+f.length*d.width*c,b,e.width*c,e.height*c)}},MO.FGuiHistoryMilestoneBar_dispose=function(){this.__base.FGuiControl.dispose.call(this)};
with(MO)MO.FGuiHistoryMilestoneFrame=function(a){a=MO.Class.inherits(this,a,FGuiControl);a._bgImage=null;a._numImages=null;a._wanImage=null;a._yiImage=null;a._data=MO.Class.register(a,new AGetSet("_data"));a._startTick=0;a._popDuration=400;a._showDuration=3E3;a._closeDuration=400;a._fullWidth=953;a._fullHeight=896;a._popupSE=null;a._100yiSE=null;a._listenersDataChanged=MO.Class.register(a,new AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.setup=FGuiHistoryMilestoneFrame_setup;a.onPaintBegin=
FGuiHistoryMilestoneFrame_onPaintBegin;a.onImageLoad=FGuiHistoryMilestoneFrame_onImageLoad;a.show=FGuiHistoryMilestoneFrame_show;a.dispose=FGuiHistoryMilestoneFrame_dispose;return a},MO.FGuiHistoryMilestoneFrame_setup=function(){this.setWidth(this._fullWidth);this.setHeight(this._fullHeight);this.setLeft((MO.Eai.Canvas.logicSize().width-this._fullWidth)/2);this.setTop(MO.Eai.Canvas.logicSize().height);this._bgImage=MO.Class.create(MO.FImage);this._bgImage.addLoadListener(this,this.onImageLoad);this._bgImage.loadUrl("{eai.resource}/milestone/bg.png");
this._wanImage=MO.Class.create(MO.FImage);this._wanImage.addLoadListener(this,this.onImageLoad);this._wanImage.loadUrl("{eai.resource}/number/wan.png");this._yiImage=MO.Class.create(MO.FImage);this._yiImage.addLoadListener(this,this.onImageLoad);this._yiImage.loadUrl("{eai.resource}/number/yi.png");this._numImages=Array(10);for(var a=0;10>a;a++){var b=MO.Class.create(MO.FImage);b.addLoadListener(this,this.onImageLoad);b.loadUrl("{eai.resource}/number/"+a+".png");this._numImages[a]=b}a=MO.Console.find(MO.FAudioConsole);
this._popupSE=a.load("{eai.resource}/milestone/popup.mp3");this._100yiSE=a.load("{eai.resource}/milestone/100yi.mp3")},MO.FGuiHistoryMilestoneFrame_onImageLoad=function(){this.dirty()},MO.FGuiHistoryMilestoneFrame_onPaintBegin=function(a){if(this._data){this.__base.FGuiControl.onPaintBegin.call(this,a);a=a.graphic;var b=this._clientRectangle,c=this._bgImage._size,d=b.left+b.width/2,e=d-135,f=b.top+520,g=MO.Timer.current()-this._startTick,h=g-this._popDuration,k=g-this._showDuration-this._popDuration,
l=(MO.Eai.Canvas.logicSize().height+this._fullHeight)/2+50-this._fullHeight,n=0;if(g<this._popDuration)n=g/this._popDuration,n=1-(1-n)*(1-n),a._handle.globalAlpha=n,this.setTop(MO.Eai.Canvas.logicSize().height-this._fullHeight-l*n);else if(!(h<this._showDuration))if(k<this._closeDuration)n=k/this._closeDuration,n*=n,a._handle.globalAlpha=1-n,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2-50-l*n);else{this._data=null;this.setVisible(!1);this.setTop(MO.Eai.Canvas.logicSize().height-
this._fullHeight);this.dirty();a=MO.Memory.alloc(SEvent);a.sender=this;this.processDataChangedListener(a);return}a.drawImage(this._bgImage,d-c.width/2,b.top,c.width,c.height);a.setFont("bold 28px Microsoft YaHei");a.drawText("\u8fbe\u6210\u65e5\u6570\uff1a",e,f+50,"#FF9103");a.drawText("\u5206\u516c\u53f8\u6570\uff1a",e,f+100,"#FF9103");a.drawText("\u7406\u8d22\u5e08\u6570\uff1a",e,f+150,"#FF9103");if(this.data()){c=this.data().investmentTotal().toString();4<c.length?(c=c.substring(0,c.length-4),
g=this._yiImage):g=this._wanImage;h=this._numImages[0]._size;k=this._yiImage._size;l=d-(c.length*h.width+k.width)/2;for(n=0;n<c.length;n++)a.drawImage(this._numImages[c[n]],l+n*h.width,b.top+320,h.width,h.height);a.drawImage(g,l+c.length*h.width,b.top+320,k.width,k.height);c="";g=0;a.setFont("48px Microsoft YaHei");b=b.top+280;h=this.data().code();c=h.substring(0,4)+"\u5e74"+h.substring(4,6)+"\u6708"+h.substring(6,8)+"\u65e5\u8fbe\u6210";g=a.textWidth(c);d=d-g/2-10;c=h.substring(0,4);g=a.textWidth(c);
a.drawText(c,d,b,"#FFEE78");d+=g;c="\u5e74";g=a.textWidth(c);a.drawText(c,d,b,"#FF9103");d+=g;c=h.substring(4,6);g=a.textWidth(c);a.drawText(c,d,b,"#FFEE78");d+=g;c="\u6708";g=a.textWidth(c);a.drawText(c,d,b,"#FF9103");d+=g;c=h.substring(6,8);g=a.textWidth(c);a.drawText(c,d,b,"#FFEE78");d+=g;c="\u65e5\u8fbe\u6210";a.textWidth(c);a.drawText(c,d,b,"#FF9103");a.setFont("bold 28px Microsoft YaHei");c=this.data().dayCount();g=a.textWidth(c);a.drawText(c,e+250-g,f+50,"#FFEE78");c=this.data().companyCount();
g=a.textWidth(c);a.drawText(c,e+250-g,f+100,"#FFEE78");c=this.data().staffCount();g=a.textWidth(c);a.drawText(c,e+250-g,f+150,"#FFEE78")}a._handle.globalAlpha=1}},MO.FGuiHistoryMilestoneFrame_show=function(){o=this;o.setVisible(!0);o._startTick=MO.Timer.current();1E6==o.data().investmentTotal()&&o._100yiSE.play(0);o._popupSE.play(0)},MO.FGuiHistoryMilestoneFrame_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
MO.FGuiHistoryTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiTimeline);a._startHeight=30;a._lineWidth=5;a._circleRadius=5;a._timeFontColor="#00B5F6";a._cursorFontColor="#59FDE9";a.onPaintBegin=MO.FGuiHistoryTimeline_onPaintBegin;return a};
MO.FGuiHistoryTimeline_onPaintBegin=function(a){this.__base.FGuiTimeline.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top;a=c.bottom();var e=d+30+this._startHeight;a-=50;var f=a-e,g=this.triangleWidth()+this.decoLineGap(),d=c.left+5+g+this.decoLineWidth(),c=c.left+c.width-5-g-this.decoLineWidth(),g=this.startTime(),h=this.endTime(),k=this.degreeTime(),l=g.date.getTime(),n=h.date.getTime()-g.date.getTime(),m=MO.Console.find(MO.FEaiResourceConsole).historyModule(),u=m.investmentTotal(),
p=m.dates().get(h.format("YYYYMMDD")),h=p.investmentTotal(),r=m.dates().get(k.format("YYYYMMDD"));3*r.investmentTotal()<u&&(h=h*(r.investmentTotal()/u)*3);f=1E4*f/h;h=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Line);r=b._handle;r.lineCap="round";r.beginPath();r.moveTo(t,v);var p=m.dates().get(g.format("YYYYMMDD")),q=p.investmentTotal(),t=d,v;for(v=a-q/1E4*f-this._startHeight;g.isBefore(k);)if(p=m.dates().get(g.format("YYYYMMDD"))){var w=g.date.getTime()-l,w=d+w/n*(c-d);
v=p.investmentTotal();p=a-v/1E4*f;p-=this._startHeight;r.lineTo(w,p);v=p;g.addDay(1)}else break;if(p=m.dates().get(g.format("YYYYMMDD"))){var w=g.date.getTime()-l+this.unitms()*this.progress(),w=d+w/n*(c-d),q=p.investmentTotal(),p=a-q/1E4*f-this._startHeight,t=MO.Lang.Hex.format(h.findRate(q/u)),x="#"+t.substring(2);MO.GuiColor.makeRgbString(t,.3);r.lineTo(w,v+(p-v)*this.progress())}var t=MO.Lang.Hex.format(h.findRate(0)),q="#"+t.substring(2),p="rgba("+MO.Lang.Hex.parse(t.substring(2,4))+","+MO.Lang.Hex.parse(t.substring(4,
6))+","+MO.Lang.Hex.parse(t.substring(6,8))+",0.5)",t=MO.Lang.Hex.format(h.findRate(1)),x="#"+t.substring(2),t="rgba("+MO.Lang.Hex.parse(t.substring(2,4))+","+MO.Lang.Hex.parse(t.substring(4,6))+","+MO.Lang.Hex.parse(t.substring(6,8))+",0.5)",y=b.createLinearGradient(0,a,0,e);y.addColorStop("0",q);y.addColorStop("1",x);e=b.createLinearGradient(0,a,0,e);e.addColorStop("0",p);e.addColorStop("1",t);r.strokeStyle=y;r.fillStyle=e;r.lineWidth=this._lineWidth;r.stroke();r.lineTo(w,a);r.lineTo(d,a);r.lineTo(d,
v);r.fill();g.date.setTime(l);for(g.refresh();g.isBefore(k);)if(p=m.dates().get(g.format("YYYYMMDD")))w=g.date.getTime()-l,w=d+w/n*(c-d),v=p.investmentTotal(),p=a-v/1E4*f,p-=this._startHeight,t=MO.Lang.Hex.format(h.findRate(v/u)),x="#"+t.substring(2),1==g.date.getDate()&&(b.drawCircle(w,p,this._circleRadius,0,x,x),b.setFont("bold 22px Microsoft YaHei"),1E8<v?(v=MO.Lang.Float.unitFormat(v,0,0,2,0,1E8,"\u4ebf"),e=b.textWidth(v),b.drawText(v,w-e/2,p-16,"#FFE849")):(v=parseInt(v/1E4)+"\u4e07",e=b.textWidth(v),
b.drawText(v,w-e/2,p-16,"#FF7200"))),v=p,g.addDay(1);else break;if(p=m.dates().get(g.format("YYYYMMDD")))w=g.date.getTime()-l+this.unitms()*this.progress(),w=d+w/n*(c-d),q=p.investmentTotal(),p=a-q/1E4*f-this._startHeight,t=MO.Lang.Hex.format(h.findRate(q/u)),x="#"+t.substring(2),b.drawCircle(w,v+(p-v)*this.progress(),this._circleRadius,0,x,x),b.setFont("bold 22px Microsoft YaHei"),1E8<q?(v=MO.Lang.Float.unitFormat(q,0,0,2,0,1E8,"\u4ebf"),e=b.textWidth(v),b.drawText(v,w-e/2,p-16,"#FFE849")):(v=parseInt(q/
1E4)+"\u4e07",e=b.textWidth(v),b.drawText(v,w-e/2,p-16,"#FF7200"));g.date.setTime(l);g.refresh()};
MO.FGuiLivePop=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._bgImage=null;a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._startTick=0;a._popDuration=500;a._showDuration=2E3;a._closeDuration=500;a._fullWidth=910;a._fullHeight=140;a._riseHeight=50;a._date=null;a.construct=MO.FGuiLivePop_construct;a.setup=MO.FGuiLivePop_setup;a.onPaintBegin=MO.FGuiLivePop_onPaintBegin;a.onImageLoad=MO.FGuiLivePop_onImageLoad;a.show=MO.FGuiLivePop_show;a.dispose=MO.FGuiLivePop_dispose;return a};
MO.FGuiLivePop_construct=function(){this.__base.FGuiControl.construct.call(this);this._date=new MO.TDate};MO.FGuiLivePop_setup=function(){this.setWidth(this._fullWidth);this.setHeight(this._fullHeight);this.setLeft((MO.Eai.Canvas.logicSize().width-this._fullWidth)/3);this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight);this._bgImage=MO.Class.create(MO.FImage);this._bgImage.addLoadListener(this,this.onImageLoad);this._bgImage.loadUrl("{eai.resource}/invespop.png")};
MO.FGuiLivePop_onImageLoad=function(){this.dirty()};
MO.FGuiLivePop_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);if(this._data){a=a.graphic;var b=this._clientRectangle,c=this._data,d=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(c.card()),e="";this._date.parse(c.date());e+=this._date.format("HH24:MI:SS");e+="    ";d&&(e+=d.data().label());e=e+"    "+(c.customer()+" - "+c.phone());e+="    ";e+=MO.Lang.Float.format(c.investment(),null,null,2,"0");a.setFont("36px Microsoft YaHei");popTextWidth=a.textWidth(e);
var c=MO.Timer.current()-this._startTick,d=c-this._popDuration,f=c-this._showDuration-this._popDuration,g=0;c<this._popDuration?(g=c/this._popDuration,a._handle.globalAlpha=g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight*(1-g)),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+g+")")):d<this._showDuration?(a.drawImage(this._bgImage,b.left,b.top,
this._fullWidth,this._fullHeight),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, 1)")):f<this._closeDuration?(g=f/this._closeDuration,a._handle.globalAlpha=1-g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2-this._riseHeight*g),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+(1-g)+")")):(this._data=null,this.setVisible(!1),this.dirty())}};
MO.FGuiLivePop_show=function(){o=this;o.setVisible(!0);o._startTick=MO.Timer.current();o.dirty()};MO.FGuiLivePop_dispose=function(){this._date=MO.Lang.Object.dispose(this._date);this.__base.FGuiControl.dispose.call(this)};
MO.FGuiLiveTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetSet("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._columnLabels=null;a._columnDefines=null;a._columnWidths=null;a._tableCount=0;a._entities=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",
MO.EEvent.DataChanged));a.onImageLoad=MO.FGuiLiveTable_onImageLoad;a.onPaintBegin=MO.FGuiLiveTable_onPaintBegin;a.oeUpdate=MO.FGuiLiveTable_oeUpdate;a.construct=MO.FGuiLiveTable_construct;a.setup=MO.FGuiLiveTable_setup;a.pushEntity=MO.FGuiLiveTable_pushEntity;a.drawRow=MO.FGuiLiveTable_drawRow;a.dispose=MO.FGuiLiveTable_dispose;return a};MO.FGuiLiveTable_onImageLoad=function(){this.dirty()};
MO.FGuiLiveTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left;a=c.top;for(var e=c.width,f=c.height,c=d+12,g=d+e-d,h=0,k=0;4>k;k++)h+=this._columnDefines[k];for(k=0;4>k;k++)this._columnWidths[k]=this._columnDefines[k]/h*g-7;b.drawGridImage(this._backgroundImage,d,a,e,f,this._backgroundPadding);b.setFont(this._headFontStyle);k=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",
d+.5*(e-k),a+76,"#59FDE9");b.setFont(this._rowFontStyle);f=a+this._rankStart;b.drawGridImage(this._rankLineImage,d+6,f+this._rankTitleStart,e-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(e-167),f+3,167,40);if(h=this._rank)for(d=h.count(),f+=90,k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!0,k,c,f+this._rankRowHeight*k,g);for(var d="",e=0,f=c,h=a+this._headStart,l=h+this._headTextTop,k=0;4>k;k++)d=this._columnLabels[k],e=b.textWidth(d),b.fillRectangle(f,h,this._columnWidths[k]-
4,this._headHeight,"#122A46"),b.drawText(d,f+.5*(this._columnWidths[k]-e-4),l,"#00B2F2"),f+=this._columnWidths[k];h=this._entities;if(!h.isEmpty())for(f=a+this._rowStart,b.clip(c,f,g-38,this._rowHeight*(this._tableCount-1)),f+=24,d=h.count(),k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!1,k,c,f+this._rowHeight*k+this._lineScroll,g)};
MO.FGuiLiveTable_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);a.isBefore()&&0>this._lineScroll&&(this._lineScroll+=1,this._lineScroll<-this._rowHeight&&(this._lineScroll=0),0<=this._lineScroll&&(a=this._entities,a.count()>this._tableCount&&a.pop(),this._lineScroll=0),this.dirty())};
MO.FGuiLiveTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._entities=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20);this._columnLabels=["\u65f6\u95f4","\u57ce\u5e02","\u7528\u6237-\u624b\u673a","\u6295\u8d44\u989d(\u5143)"];MO.Runtime.isPlatformMobile()?this._columnDefines=[130,130,180,186]:this._columnDefines=[110,110,160,166];this._columnWidths=[]};
MO.FGuiLiveTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);b=this._rank1Image=
a.load("{eai.resource}/live/1.png");b.addLoadListener(this,this.onImageLoad);b=this._rank2Image=a.load("{eai.resource}/live/2.png");b.addLoadListener(this,this.onImageLoad);b=this._rank3Image=a.load("{eai.resource}/live/3.png");b.addLoadListener(this,this.onImageLoad);this._headFontStyle="bold 36px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=
8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei",this._rowHeight=46):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="24px Microsoft YaHei",this._rowStart=
384,this._rowHeight=36)};MO.FGuiLiveTable_pushEntity=function(a){if(!a)return null;var b=this._entities;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};
MO.FGuiLiveTable_drawRow=function(a,b,c,d,e,f,g){var h=this._columnWidths;g=null;g=c?"#E5BD1D":"#59FDE9";if(c){var k=e+.5*h[0]-23,l=f-this._rankIconStart;0==d&&this._rank1Image.testReady()&&a.drawImage(this._rank1Image,k-6,l-28,58,65);1==d&&this._rank2Image.testReady()&&a.drawImage(this._rank2Image,k,l,46,37);2==d&&this._rank3Image.testReady()&&a.drawImage(this._rank3Image,k,l,46,37)}f+=this._rankTextStart;d=0;c||(this._currentDate.parse(b.date()),c=this._currentDate.format("HH24:MI:SS"),d=a.textWidth(c),
a.drawText(c,e+.5*h[0]-.5*d,f,g));e+=h[0];d=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b.card());c="";d&&(c=d.label());d=a.textWidth(c);a.drawText(c,e+.5*h[1]-.5*d,f,g);e+=h[1];c=b.customer()+" - "+b.phone();d=a.textWidth(c);a.drawText(c,e+.5*h[2]-.5*d,f,g);e+=h[2];b=MO.Lang.Float.format(b.investment(),null,null,2,"0");e=e+h[3]-15;7<b.length?(g=null,g=9<b.length?"#FDEF01":"#EB6C03",h=b.substring(0,b.length-7),b=b.substring(b.length-7,b.length),c=a.textWidth(h),d=a.textWidth(b),
a.drawText(h,e-d-c,f,g),a.drawText(b,e-d,f,"#59FDE9")):(d=a.textWidth(b),a.drawText(b,e-d,f,g))};MO.FGuiLiveTable_dispose=function(){this._entities=MO.Lang.Object.dispose(this._entities);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiStatisticsDate=function(a){a=MO.Class.inherits(this,a,MO.FGuiLabel);a._value=MO.Class.register(a,new MO.AGetter("_value"));a.onPaintLabel=MO.FEaiStatisticsDate_onPaintLabel;a.construct=MO.FEaiStatisticsDate_construct;a.setValue=MO.FEaiStatisticsDate_setValue;a.dispose=MO.FEaiStatisticsDate_dispose;return a};
MO.FEaiStatisticsDate_onPaintLabel=function(a){var b=a.graphic,c=a.rectangle;b.setFont("bold 36px Microsoft YaHei");a=this._value.format("YYYY");var d=this._value.format("MM"),e=this._value.format("DD"),f=a+"\u5e74",g=d+"\u6708";b.textWidth(f+g+(e+"\u65e5"));var f=b.textWidth(f),g=b.textWidth(g),h=c.left,c=c.top+c.height,k=h+4,l=c-5;b.setFont("bold 36px Microsoft YaHei");var n=b.textWidth(a);b.drawText(a,h,c,"#FFD926");b.setFont("bold 28px Microsoft YaHei");b.drawText("\u5e74",k+n,l,"#00B5F6");b.setFont("bold 36px Microsoft YaHei");
n=b.textWidth(d);b.drawText(d,h+f,c,"#FFD926");b.setFont("bold 28px Microsoft YaHei");b.drawText("\u6708",k+f+n,l,"#00B5F6");b.setFont("bold 36px Microsoft YaHei");n=b.textWidth(e);b.drawText(e,h+f+g,c,"#FFD926");b.setFont("bold 28px Microsoft YaHei");b.drawText("\u65e5",k+f+g+n,l,"#00B5F6")};MO.FEaiStatisticsDate_construct=function(){this.__base.FGuiLabel.construct.call(this);this._value=new MO.TDate};MO.FEaiStatisticsDate_setValue=function(a){this._value.parse(a,"YYYYMMDD");this.dirty()};
MO.FEaiStatisticsDate_dispose=function(){this._value=MO.Lang.Object.dispose(this._value);this.__base.FGuiLabel.dispose.call(this)};
MO.FEaiStatisticsInvestment=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=
MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankEntities=MO.Class.register(a,new MO.AGetter("_rankEntities"));a._entities=MO.Class.register(a,new MO.AGetter("_entities"));a._tableEntities=MO.Class.register(a,new MO.AGetter("_tableEntities"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._entityPool=null;a._autios=null;
a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onInvestment=MO.FEaiStatisticsInvestment_onInvestment;a.construct=MO.FEaiStatisticsInvestment_construct;a.allocEntity=MO.FEaiStatisticsInvestment_allocEntity;a.allocShape=MO.FEaiStatisticsInvestment_allocShape;a.setup=MO.FEaiStatisticsInvestment_setup;a.calculateInvestmentLevel=MO.FEaiStatisticsInvestment_calculateInvestmentLevel;a.calculateCurrent=MO.FEaiStatisticsInvestment_calculateCurrent;
a.focusEntity=MO.FEaiStatisticsInvestment_focusEntity;a.process=MO.FEaiStatisticsInvestment_process;a.dispose=MO.FEaiStatisticsInvestment_dispose;return a};
MO.FEaiStatisticsInvestment_onInvestment=function(a){var b=a.content;this._invementDay=b.investment_day;this._invementTotal=b.investment_total;var c=this._rankEntities;a=c.count();for(var d=0;d<a;d++){var e=c.at(d);this._entityPool.free(e)}c.clear();var f=b.rank;if(f)for(a=f.length,d=0;d<a;d++){var g=f[d],e=this.allocEntity();e.loadData(g);c.push(e)}f=b.collection;b=this._entities;if(f)for(a=f.length,d=0;d<a;d++)g=f[d],e=this.allocEntity(),e.loadData(g),b.push(e);this.calculateCurrent();a=this._eventDataChanged;
a.entity=null;a.rank=this._rankEntities;a.data=this._tableEntities;this.processDataChangedListener(a);a=b.count();this._tableInterval=6E4*this._intervalMinute/a;this._tableTick=0};
MO.FEaiStatisticsInvestment_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._entities=new MO.TObjects;this._tableEntities=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._rankEntities=new MO.TObjects;this._entityPool=MO.Class.create(MO.FObjectPool);this._eventDataChanged=new MO.SEvent(this)};
MO.FEaiStatisticsInvestment_allocEntity=function(){var a=this._entityPool.alloc();a||(a=MO.Class.create(MO.FEaiStatisticsInvestmentEntity));return a};MO.FEaiStatisticsInvestment_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiStatisticsInvestment_calculateInvestmentLevel=function(a){return 5E6<=a?5:1E6<=a?4:1E5<=a?3:1E4<=a?2:1E3<=a?1:0};MO.FEaiStatisticsInvestment_calculateCurrent=function(){for(var a=this._invementDay,b=this._invementTotal,c=this._entities,d=c.count(),e=0;e<d;e++)var f=c.at(e).investment(),a=a-f,b=b-f;this._invementDayCurrent=Math.max(a,0);this._invementTotalCurrent=Math.max(b,0)};
MO.FEaiStatisticsInvestment_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=this.calculateInvestmentLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.entity=a;b.rank=this._rankEntities;b.data=this._tableEntities;this.processDataChangedListener(b)};
MO.FEaiStatisticsInvestment_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.doInvestmentDynamic(this,this.onInvestment,c.format(),d.format());c.assign(d)}a=MO.RTimer.current();
a-this._tableTick>this._tableInterval&&(this._tableEntities.count()>=this._tableCount&&(b=this._tableEntities.pop(),this._entityPool.free(b)),b=this._entities,b.isEmpty()||(b=b.shift(),this._tableEntities.unshift(b),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._entities.count();a._investmentTableEntityCount=this._tableEntities.count();a._investmentPoolItemCount=this._entityPool.items().count();
a._investmentPoolFreeCount=this._entityPool.frees().count()}};MO.FEaiStatisticsInvestment_dispose=function(){this._entities=MO.Lang.Object.dispose(this._entities);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiStatisticsInvestmentEntity=function(a){a=MO.Class.inherits(this,a,FEaiEntity);a._date=MO.Class.register(a,new AGetter("_date"));a._customer=MO.Class.register(a,new AGetter("_customer"));a._phone=MO.Class.register(a,new AGetter("_phone"));a._card=MO.Class.register(a,new AGetter("_card"));a._investment=MO.Class.register(a,new AGetter("_investment"));a._shape=MO.Class.register(a,new AGetSet("_shape"));a.construct=FEaiStatisticsInvestmentEntity_construct;a.loadData=FEaiStatisticsInvestmentEntity_loadData;
a.update=FEaiStatisticsInvestmentEntity_update;a.dispose=FEaiStatisticsInvestmentEntity_dispose;return a},MO.FEaiStatisticsInvestmentEntity_construct=function(){this.__base.FEaiEntity.construct.call(this)},MO.FEaiStatisticsInvestmentEntity_loadData=function(a){this._date=a.date;this._customer=a.customer;this._phone=a.phone;this._card=a.card;this._investment=a.investment},MO.FEaiStatisticsInvestmentEntity_build=function(a){this._location.assign(this._data.location());this._size.set(2,2)},MO.FEaiStatisticsInvestmentEntity_update=
function(a){this._data.location();var b=1;if(a){var c=RConsole.find(FEaiResourceConsole).historyConsole().investmentCityTotal(),b=RConsole.find(FEaiResourceConsole).rateConsole().find(EEaiRate.Map);a=5*Math.sqrt(a.investmentTotal()/c);c=b.findRate(a);b=10*a;a=RFloat.toRange(a,0,1);this._color.set((c>>16&255)/255,(c>>8&255)/255,(c>>0&255)/255,4*a)}else this._color.set(0,0,0,0);b=this._range=RFloat.toRange(Math.sqrt(b),1,4);this._size.set(b,b)},MO.FEaiStatisticsInvestmentEntity_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiStatisticsInvestmentShape=function(a){a=MO.Class.inherits(this,a,FE3dShape);a._ready=!1;a._playing=!1;a._finish=!1;a._image=null;a._statusPaint=!1;a._cityEntity=MO.Class.register(a,new AGetSet("_cityEntity"));a._entity=MO.Class.register(a,new AGetter("_entity"));a._customerLabel=null;a._cityLabel=null;a._investment=null;a._interval=10;a._moveRate=0;a._lastTick=0;a.onImageLoad=FEaiStatisticsInvestmentShape_onImageLoad;a.construct=FEaiStatisticsInvestmentShape_construct;a.setup=FEaiStatisticsInvestmentShape_setup;
a.setEntity=FEaiStatisticsInvestmentShape_setEntity;a.paint=FEaiStatisticsInvestmentShape_paint;a.process=FEaiStatisticsInvestmentShape_process;a.dispose=FEaiStatisticsInvestmentShape_dispose;return a},MO.FEaiStatisticsInvestmentShape_onImageLoad=function(a){this._ready=!0},MO.FEaiStatisticsInvestmentShape_construct=function(){this.__base.FE3dShape.construct.call(this)},MO.FEaiStatisticsInvestmentShape_setup=function(){this.__base.FE3dShape.setup.call(this);var a=this._renderable=MO.Class.create(FE3dShapeData);
a.linkGraphicContext(this);a.setOptionCenter(!0);a.size().set(128,64);a.setup();a=this._image=MO.Class.create(FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("/script/ars/eai/investment.png");this._ready=!1},MO.FEaiStatisticsInvestmentShape_setEntity=function(a){this._customerLabel=a.customer();this._cityLabel=this._cityEntity.data().label();this._investment=a.investment();this._finish=!1},MO.FEaiStatisticsInvestmentShape_paint=function(){var a=this._cityEntity.location(),b=this.material();
b.info().optionAlpha=!0;b.info().ambientColor.set(1,1,1,1);b=this._matrix;b.tx=a.x;b.ty=a.y;b.tz=0;b.setScale(10,5,1);b.update();a=this._renderable;b=a.beginDraw();b.drawImage(this._image,0,0,128,64);b.setFont("bold 18px Microsoft YaHei");b.drawText(this._cityLabel,15,25,"#FF00FF");b.setFont("bold 20px Microsoft YaHei");b.drawText(this._customerLabel,30,50,"#FFFF00");b.setFont("bold 20px Microsoft YaHei");b.drawText(this._investment,55,50,"#FF0000");a.endDraw();this._playing=this._statusPaint=!0;
this._moveRate=this._lastTick=0},MO.FEaiStatisticsInvestmentShape_process=function(a){this.__base.FE3dShape.process.call(this,a);this._statusDirty&&this.testReady()&&(this._statusPaint||(this.paint(),this._statusPaint=!0),this._statusDirty=!1);if(this._statusPaint&&!this._finish){a=RTimer.current();var b=this._matrix;a-this._lastTick>this._interval&&(b.ty+=this._moveRate+.01,this._moveRate+=.01,b.updateForce(),this._lastTick=a);100<b.ty&&(this._finish=!0)}},MO.FEaiStatisticsInvestmentShape_dispose=
function(){this.__base.FE3dShape.dispose.call(this)};
MO.FEaiStatisticsLabel=function(a){a=MO.Class.inherits(this,a,MO.FGuiLabel);a._value=MO.Class.register(a,new MO.AGetter("_value"),"0");a._basicUnitText=MO.Class.register(a,new MO.AGetSet("_basicUnitText"),"\u5143");a._originValue="0";a._valueSign=1;a._originValueSign=1;a._increasing=!1;a._startTick=0;a._rolling=MO.Class.register(a,new MO.AGetSet("_rolling"),!1);a._rollingDuration=MO.Class.register(a,new MO.AGetSet("_rollingDuration"),1E3);a._rollingPages=null;a._noRolling=MO.Class.register(a,new MO.AGetSet("_noRolling"),
!1);a.onPaintLabel=MO.FEaiStatisticsLabel_onPaintLabel;a.oeUpdate=MO.FEaiStatisticsLabel_oeUpdate;a.construct=MO.FEaiStatisticsLabel_construct;a.setValue=MO.FEaiStatisticsLabel_setValue;a.dispose=MO.FEaiStatisticsLabel_dispose;return a};
MO.FEaiStatisticsLabel_onPaintLabel=function(a){var b=a.graphic,c=a.rectangle;b.clip(c.left,c.top,c.width,c.height);a=this._foreFont;var d=this._backFont,e;if(this._alignCd!=MO.EUiAlign.Right)e=c.left;else{b.setFont(a);e=b.textWidth(this._value);var f=this._basicUnitText;4<this._value.length&&(f+="\u4e07");8<this._value.length&&(f+="\u4ebf");b.setFont(d);f=b.textWidth(f);e=c.right()-e-f}c=c.top+c.height;f=MO.Timer.current()-this._startTick;if(f>this._rollingDuration||this._noRolling)f=this._rollingDuration,
this._rolling=!1;for(var g=this._increasing,h=this._originValue,k=this._originValueSign,l=0;l<this._value.length;l++){var n=this._rollingPages.get(l)*(f/this._rollingDuration),m=parseInt(h.charAt(l))*k+parseInt(n),u=m.toString(),m=(g?m+1:m-1).toString(),u=parseInt(u.charAt(u.length-1)),m=parseInt(m.charAt(m.length-1)),n=n-parseInt(n),n=g?n:-1*n;b.setFont(a);var p="";l<this._originValue.length-8?p="#FFD926":l<this._originValue.length-4?p="#FF7200":l<this._originValue.length&&(p="#FD0000");var r=a.size;
g?(b.drawText(u,e,c-r*n,p),b.drawText(m,e,c+r-r*n,p)):(b.drawText(u,e,c+r*n,p),b.drawText(m,e,c-r+r*n,p));e+=b.textWidth(u);u=c-3;l==this._originValue.length-9?(b.setFont(d),b.drawText("\u4ebf",e,u-2,"#00B5F6"),e+=b.textWidth("\u4ebf")):l==this._originValue.length-5?(b.setFont(d),b.drawText("\u4e07",e,u-2,"#00B5F6"),e+=b.textWidth("\u4e07")):l==this._originValue.length-1&&(b.setFont(d),b.drawText(this._basicUnitText,e,u-2,"#00B5F6"),e+=b.textWidth(this._basicUnitText))}0==this._rolling&&(this._originValue=
this._value,this._originValueSign=this._valueSign,this._rollingPages.clear())};
MO.FEaiStatisticsLabel_setValue=function(a){if(this._value!=a){"-"==a.charAt(0)?(this._valueSign=-1,a=a.substring(1,a.length-2)):this._valueSign=1;this._rolling&&(this._originValue=this._value,this._originValueSign=this._valueSign);this._value=a;for(var b=this._originValue,c=a.length-b.length;0<c;)b="0"+b,c--;this._originValue=b;this._rollingPages.clear();this._rollingPages._length=a.length;var c=this._valueSign,d=this._originValueSign;if(this._increasing=parseInt(a)>parseInt(b))for(var e=0;e<a.length;e++){var f=
parseInt(a.substring(e,e+1))*c-parseInt(b.substring(e,e+1))*d;0==f&&0>c*d?(f=2*parseInt(a.substring(e,e+1)),f=0==f?10:f):f=0>f?f+10:f;this._rollingPages.set(e,f)}else for(e=0;e<a.length;e++)f=parseInt(a.substring(e,e+1))*c-parseInt(b.substring(e,e+1))*d,0==f&&0>c*d?(f=-2*parseInt(a.substring(e,e+1)),f=0==f?10:f):f=0<f?f-10:f,this._rollingPages.set(e,f);this._startTick=MO.Timer.current();this._rolling=!0}};
MO.FEaiStatisticsLabel_oeUpdate=function(a){this.__base.FGuiLabel.oeUpdate.call(this,a);this._rolling&&this.dirty();return MO.EEventStatus.Stop};MO.FEaiStatisticsLabel_construct=function(){this.__base.FGuiLabel.construct.call(this);this._rollingPages=new MO.TArray};MO.FEaiStatisticsLabel_dispose=function(){this._ticker=MO.Lang.Object.dispose(this._ticker);this.__base.FGuiLabel.dispose.call(this)};
MO.FEaiChartCustomerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a.onLoadData=MO.FEaiChartCustomerScene_onLoadData;a.onKeyDown=MO.FEaiChartCustomerScene_onKeyDown;a.setup=MO.FEaiChartCustomerScene_setup;a.selectDate=MO.FEaiChartCustomerScene_selectDate;a.active=MO.FEaiChartCustomerScene_active;a.process=MO.FEaiChartCustomerScene_process;a.deactive=MO.FEaiChartCustomerScene_deactive;
return a};MO.FEaiChartCustomerScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartCustomerScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));a==MO.EKeyCode.L&&(MO.RDate.autoParse(this._currentDate,"20140701"),this._playing=!0)};
MO.FEaiChartCustomerScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();b.dataLayer();if(b=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().get(a)){a=b.provinces();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d);this._provinceEntities.get(e.code()).update(e)}for(var e=b.citys(),f=this._cityEntities,c=f.count(),d=0;d<c;d++){var g=f.at(d);a=g.data().code();a=e.get(a);g.update(a)}if(c=document.getElementById("id_total"))c.innerHTML=this._currentDate.format("YYYY-MM-DD")+
" "+b.investmentTotal()}this._citysRangeRenderable.upload()};MO.FEaiChartCustomerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618")};MO.FEaiChartCustomerScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartCustomerScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}};MO.FEaiChartCustomerScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartIndustryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartIndustry;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a.onLoadData=MO.FEaiChartIndustryScene_onLoadData;a.onKeyDown=MO.FEaiChartIndustryScene_onKeyDown;a.setup=MO.FEaiChartIndustryScene_setup;a.selectDate=MO.FEaiChartIndustryScene_selectDate;a.active=MO.FEaiChartIndustryScene_active;a.process=MO.FEaiChartIndustryScene_process;a.deactive=MO.FEaiChartIndustryScene_deactive;
return a};MO.FEaiChartIndustryScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartIndustryScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));a==MO.EKeyCode.L&&(MO.RDate.autoParse(this._currentDate,"20140701"),this._playing=!0)};
MO.FEaiChartIndustryScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();b.dataLayer();if(b=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().get(a)){a=b.provinces();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d);this._provinceEntities.get(e.code()).update(e)}for(var e=b.citys(),f=this._cityEntities,c=f.count(),d=0;d<c;d++){var g=f.at(d);a=g.data().code();a=e.get(a);g.update(a)}if(c=document.getElementById("id_total"))c.innerHTML=this._currentDate.format("YYYY-MM-DD")+
" "+b.investmentTotal()}this._citysRangeRenderable.upload()};MO.FEaiChartIndustryScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618")};MO.FEaiChartIndustryScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartIndustryScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}};MO.FEaiChartIndustryScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartInvestmentScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartInvestment;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a._timeline=null;a.onLoadData=MO.FEaiChartInvestmentScene_onLoadData;a.onKeyDown=MO.FEaiChartInvestmentScene_onKeyDown;a.setup=MO.FEaiChartInvestmentScene_setup;a.selectDate=MO.FEaiChartInvestmentScene_selectDate;a.active=MO.FEaiChartInvestmentScene_active;a.process=MO.FEaiChartInvestmentScene_process;a.deactive=
MO.FEaiChartInvestmentScene_deactive;a.onDateSelect=MO.FEaiChartInvestmentScene_onDateSelect;return a};MO.FEaiChartInvestmentScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartInvestmentScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));if(a==MO.EKeyCode.L){MO.RDate.autoParse(this._currentDate,"20140701");a=document.getElementById("id_investment_table");for(b=1;b<a.rows.length;b++)a.rows[b].style.display="none";this._playing=
!0}};
MO.FEaiChartInvestmentScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();var b=MO.Console.find(MO.FEaiResourceConsole).historyConsole(),c=MO.Console.find(MO.FEaiResourceConsole).provinceConsole();if(b=b.dates().get(a)){a=b.provinces();for(var d=a.count(),e=document.getElementById("id_investment_table");e.rows.length<d+1;){var f=e.insertRow(e.rows.length);f.insertCell(0);f.insertCell(1);f.insertCell(2)}for(var g=0;g<d;g++){var h=a.at(g);this._provinceEntities.get(h.code()).update(h);var k=
c.findByCode(h.code()),f=e.rows[g+1];f.style.display="";f.className="DataGrid_Row";var l=f.cells[0],n=f.cells[1],f=f.cells[2];2<g&&(l.innerText=g+1);n.innerText=k.label();1E3<h.investmentTotal()?f.innerText=MO.RFloat.unitFormat(h.investmentTotal(),0,0,2,0,1E4,"\u4e07"):f.innerText=h.investmentTotal();f.align="right"}this._timeline.setDegreeTime(this._currentDate);this._timeline.repaint();c=b.citys();e=this._cityEntities;d=e.count();for(g=0;g<d;g++)h=e.at(g),a=h.data().code(),a=c.get(a),h.update(a);
this._totalBar.findComponent("total").setLabel(MO.RFloat.unitFormat(b.investmentTotal(),0,0,2,0,1E4,"\u4e07"));this._totalBar.repaint()}};
MO.FEaiChartInvestmentScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618");for(var a=document.getElementById("id_investment_table"),b=0;3>b;b++){var c=a.insertRow(a.rows.length),d=c.insertCell(0);c.insertCell(1);c.insertCell(2);switch(b){case 0:c.style.color=
"#FFEA01";d.innerHTML="1 <IMG src='/script/ars/eai/medals/gold.png'/>";break;case 1:c.style.color="#C5D3D6";d.innerHTML="2 <IMG src='/script/ars/eai/medals/silver.png'/>";break;case 2:c.style.color="#E16A00",d.innerHTML="3 <IMG src='/script/ars/eai/medals/copper.png'/>"}}a=this.activeStage().faceLayer();b=this._timeline=MO.Class.create(MO.FGuiHistoryTimeline);b.setName("Timeline");b.setLeft(50);b.setTop(MO.Eai.Canvas._size.height-400);b.setWidth(MO.Eai.Canvas._size.width-500);b.setHeight(350);b.setTimeUnit(MO.EUiTimeUnit.Month);
b.setStartTime(this._startDate);b.setEndTime(this._endDate);b.setDegreeTime(this._currentDate);b.addDataChangedListener(this,this.onDateSelect);b.linkGraphicContext(this);b.build();this._desktop.register(b);a.push(b)};MO.FEaiChartInvestmentScene_onDateSelect=function(a){this._currentDate.date.setTime(a.date.date.getTime());this._currentDate.refresh();this.selectDate(this._currentDate.format("YYYYMMDD"))};MO.FEaiChartInvestmentScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartInvestmentScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}for(var a=this._citysRenderables,b=a.count(),c=0;c<b;c++)a.at(c).upload();this._citysRangeRenderable.upload()};MO.FEaiChartInvestmentScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartLiveScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartLive;a._investment=MO.Class.register(a,new MO.AGetter("_investment"));a._investmentCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._24HLastTick=0;a._24HTrendInterval=3E5;a._logoBar=null;a._timeline=null;a._liveTable=null;a._livePop=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._groundAutioUrl="{eai.resource}/music/statistics.mp3";a.onInvestmentDataChanged=
MO.FEaiChartLiveScene_onInvestmentDataChanged;a.onOperationVisibility=MO.FEaiChartLiveScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartLiveScene_onProcessReady;a.onProcess=MO.FEaiChartLiveScene_onProcess;a.onSwitchProcess=MO.FEaiChartLiveScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartLiveScene_onSwitchComplete;a.setup=MO.FEaiChartLiveScene_setup;a.showParticle=MO.FEaiChartLiveScene_showParticle;a.showFace=MO.FEaiChartLiveScene_showFace;a.fixMatrix=MO.FEaiChartLiveScene_fixMatrix;a.processResize=
MO.FEaiChartLiveScene_processResize;return a};MO.FEaiChartLiveScene_onInvestmentDataChanged=function(a){var b=a.entity,c=this._liveTable;c.setRank(a.rank);c.pushEntity(b);c.dirty();b&&this._livePop.setData(b)};MO.FEaiChartLiveScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};
MO.FEaiChartLiveScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartLiveScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing){a=this._countryEntity;if(!a.introAnimeDone()){a.process();return}this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);a=MO.Timer.current();a-this._24HLastTick>
this._24HTrendInterval&&(this._timeline.sync(),this._24HLastTick=a);this._investment.process();var a=this._logoBar,b=a.findComponent("investmentTotal"),c=this._investment.invementTotalCurrent();b.setValue(parseInt(c).toString());a=a.findComponent("investmentDay");b=this._investment.invementDayCurrent();a.setValue(parseInt(b).toString());this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}this._livePop.visible()&&
this._livePop.dirty()};MO.FEaiChartLiveScene_onSwitchProcess=function(a){};MO.FEaiChartLiveScene_onSwitchComplete=function(a){};
MO.FEaiChartLiveScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.LogoBar");this._guiManager.register(b);b=this._investment=MO.Class.create(MO.FEaiStatisticsInvestment);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=
MO.Class.create(MO.FGui24HTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.sync();a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FGuiLiveTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._livePop=MO.Class.create(MO.FGuiLivePop);a.setName("LivePop");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);
a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiChartLiveScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};
MO.FEaiChartLiveScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartLiveScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-38.6,a.ty=-12.8,a.tz=0,a.setScale(.32,.36,.32));a.update()};
MO.FEaiChartLiveScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._investment.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(1,1));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(710),b.setBottom(260));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(680));b.setHeight(250);b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|
MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(650))};
MO.FEaiChartScene=function(a){a=MO.Class.inherits(this,a,MO.FEaiScene);a._optionMapCountry=!0;a._optionMapCity3d=!1;a._optionBackground=!0;a._readyProvince=!1;a._countryReady=!1;a._nowDate=null;a._nowTicker=null;a._mapEntity=null;a._citysRangeRenderable=null;a._citysRenderable=null;a._flagSprite=null;a._southSea=null;a._groundAutio=null;a.onLoadTemplate=MO.FEaiChartScene_onLoadTemplate;a.onProcess=MO.FEaiChartScene_onProcess;a.construct=MO.FEaiChartScene_construct;a.fixMatrix=MO.FEaiChartScene_fixMatrix;
a.setup=MO.FEaiChartScene_setup;a.active=MO.FEaiChartScene_active;a.resetDate=MO.FEaiChartScene_resetDate;a.processResize=MO.FEaiChartScene_processResize;a.deactive=MO.FEaiChartScene_deactive;a.onOperationDown=MO.FEaiChartScene_onOperationDown;a.dispose=MO.FEaiChartScene_dispose;return a};MO.FEaiChartScene_onOperationDown=function(a){this._mapEntity._startTime=0};MO.FEaiChartScene_onLoadTemplate=function(a){};
MO.FEaiChartScene_onProcess=function(){this.__base.FEaiScene.onProcess.call(this);!this._countryReady&&MO.Console.find(MO.FEaiEntityConsole).testCountryReady()&&(this._countryReady=!0,this.processResize())};MO.FEaiChartScene_construct=function(){this.__base.FEaiScene.construct.call(this);this._nowDate=new MO.TDate;this._nowTicker=new MO.TTicker(1E4)};MO.FEaiChartScene_fixMatrix=function(a){a.tx=-35;a.ty=-12.3;a.tz=0;a.setScale(.32,.36,.32);a.update()};
MO.FEaiChartScene_setup=function(){this.__base.FEaiScene.setup.call(this);var a=this._graphicContext,b=this._activeStage=MO.Class.create(MO.FEaiChartStage);b.linkGraphicContext(this);b.region().linkGraphicContext(this);b.region().backgroundColor().set(0,0,0,0);var c=b.camera();c.position().set(0,0,-10);c.lookAt(0,0,0);c.update();c=c.projection();c.size().assign(a.size());c.setAngle(80);c.setZnear(1);c.setZfar(200);c.update();a=MO.Console.find(MO.FEaiEntityConsole);a.linkGraphicContext(this);a._option3d=
this._optionMapCity3d;a.setup();a=this._mapEntity=a.mapEntity();c=a.countryFaceDisplay();this.fixMatrix(c.matrix());b.mapLayer().pushDisplay(c);c=a.countryBorderDisplay();this.fixMatrix(c.matrix());b.borderLayer().pushDisplay(c);c=a.cityRangeRenderable();this.fixMatrix(c.matrix());b.cityRangeLayer().push(c);a=a.cityCenterRenderable();this.fixMatrix(a.matrix());b.cityLayer().push(a);MO.Console.find(MO.FEaiLogicConsole).system().refresh();a=this._groundAutio=MO.Console.find(MO.FAudioConsole).load("{eai.resource}-{device.type}/chart/ground.mp3");
a.setLoop(!0);a.setVolume(.2);this._optionMapCountry&&(a=this._southSea=MO.Class.create(MO.FGuiPicture),a.setDisplayOrder(-10),a.size().set(134,203),a.setBackResource("url:{eai.resource}/south-sea.png"),a.psInitialize(),a.build(),this._guiManager.register(a));this._optionBackground&&(a=this._application._groundBitmap)&&b.groundLayer().push(a)};MO.FEaiChartScene_active=function(){this.__base.FEaiScene.active.call(this)};MO.FEaiChartScene_resetDate=function(){};
MO.FEaiChartScene_processResize=function(){this.__base.FEaiScene.processResize.call(this);var a=MO.Console.find(MO.FEaiEntityConsole).mapEntity();this.fixMatrix(a.countryFaceDisplay().matrix());this.fixMatrix(a.countryBorderDisplay().matrix());this.fixMatrix(a.cityRangeRenderable().matrix());this.fixMatrix(a.cityCenterRenderable().matrix())};MO.FEaiChartScene_deactive=function(){this.__base.FEaiScene.deactive.call(this)};
MO.FEaiChartScene_dispose=function(){this._nowDate=MO.Lang.Object.dispose(this._nowDate);this._nowTicker=MO.Lang.Object.dispose(this._nowTicker);this._mapEntity=null;this.__base.FEaiScene.dispose.call(this)};
MO.FEaiChartStage=function(a){a=MO.RClass.inherits(this,a,MO.FE3dStage);a._groundLayer=MO.Class.register(a,new MO.AGetter("_groundLayer"));a._mapLayer=MO.Class.register(a,new MO.AGetter("_mapLayer"));a._borderLayer=MO.Class.register(a,new MO.AGetter("_borderLayer"));a._cityRangeLayer=MO.Class.register(a,new MO.AGetter("_cityRangeLayer"));a._cityLayer=MO.Class.register(a,new MO.AGetter("_cityLayer"));a._dataLayer=MO.Class.register(a,new MO.AGetter("_dataLayer"));a._spriteLayer=MO.Class.register(a,
new MO.AGetter("_spriteLayer"));a.construct=MO.FEaiChartStage_construct;return a};
MO.FEaiChartStage_construct=function(){this.__base.FE3dStage.construct.call(this);var a=this._groundLayer=MO.Class.create(MO.FDisplayLayer);this.registerLayer("GroundLayer",a);a=this._mapLayer=MO.Class.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("MapLayer",a);a=this._borderLayer=MO.Class.create(MO.FDisplayLayer);this.registerLayer("BorderLayer",a);a=this._cityRangeLayer=MO.Class.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("CityRangeLayer",a);a=this._cityLayer=
MO.Class.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("CityLayer",a);a=this._dataLayer=MO.Class.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("DataLayer",a);a=this._spriteLayer=MO.Class.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("SpriteLayer",a)};
MO.FEaiChartTotalScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._optionMapCountry=!1;a._code=MO.EEaiScene.ChartTotal;a._currentDate=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._chartTotal=null;a.onInvestment=MO.FEaiChartTotalScene_onInvestment;a.onProcess=MO.FEaiChartTotalScene_onProcess;a.construct=MO.FEaiChartTotalScene_construct;a.setup=MO.FEaiChartTotalScene_setup;a.testReady=MO.FEaiChartTotalScene_testReady;return a};
MO.FEaiChartTotalScene_onInvestment=function(a){this._chartTotal.setValue(parseInt(a.content.investment_total).toString())};
MO.FEaiChartTotalScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart&&this.testReady()){var a=document.getElementById("id_loading");a&&(a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--);this._statusLayerLevel--;0==this._statusLayerLevel&&(a&&document.body.removeChild(a),this._statusStart=this._playing=!0)}this._playing&&(this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),
a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0),this._dataTicker.process()&&(a=MO.Console.find(MO.FEaiLogicConsole).system(),a.testReady()&&(a=a.currentDate(),MO.Console.find(MO.FEaiLogicConsole).statistics().doInvestmentDynamic(this,this.onInvestment,a.format(),a.format()))),this._chartTotal.rolling()&&this._chartTotal.dirty())};
MO.FEaiChartTotalScene_construct=function(){this.__base.FEaiChartScene.construct.call(this);this._currentDate=new MO.TDate;this._dataTicker=new MO.TTicker(3E4)};MO.FEaiChartTotalScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);this._guiManager.hide();var a=this._chartTotal=MO.Class.create(MO.FGuiChartTotal);a.setup();a.build();this._guiManager.register(a)};
MO.FEaiChartTotalScene_testReady=function(){if(!this._ready){if(!this._countryReady||!this._chartTotal.ready())return!1;this._ready=!0}return this._ready};
MO.FEaiChartWorldScene=function(a){a=MO.Class.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartWorld;a._investment=MO.Class.register(a,new MO.AGetter("_investment"));a._investmentCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._24HLastTick=0;a._24HTrendInterval=3E5;a._logoBar=null;a._timeline=null;a._liveTable=null;a._livePop=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._operationFlag=!1;a._operationPoint=null;a._operationRotationX=
0;a._operationRotationY=0;a._rotationX=0;a._rotationY=0;a._worldScale=500;a._groundAutioUrl="{eai.resource}/music/statistics.mp3";a.onInvestmentDataChanged=MO.FEaiChartWorldScene_onInvestmentDataChanged;a.onProcessReady=MO.FEaiChartWorldScene_onProcessReady;a.onProcess=MO.FEaiChartWorldScene_onProcess;a.onOperationDown=MO.FEaiChartWorldScene_onOperationDown;a.onOperationMove=MO.FEaiChartWorldScene_onOperationMove;a.onOperationUp=MO.FEaiChartWorldScene_onOperationUp;a.onOperationWheel=MO.FEaiChartWorldScene_onOperationWheel;
a.onSwitchProcess=MO.FEaiChartWorldScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartWorldScene_onSwitchComplete;a.construct=MO.FEaiChartWorldScene_construct;a.setup=MO.FEaiChartWorldScene_setup;a.testReady=MO.FEaiChartWorldScene_testReady;a.showParticle=MO.FEaiChartWorldScene_showParticle;a.showFace=MO.FEaiChartWorldScene_showFace;a.fixMatrix=MO.FEaiChartWorldScene_fixMatrix;a.processResize=MO.FEaiChartWorldScene_processResize;return a};
MO.FEaiChartWorldScene_onInvestmentDataChanged=function(a){var b=a.entity,c=this._liveTable;c.setRank(a.rank);c.pushEntity(b);c.dirty();b&&this._livePop.setData(b)};MO.FEaiChartWorldScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showWorld()};
MO.FEaiChartWorldScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart&&this.testReady()){var a=document.getElementById("id_loading");a&&(a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--);this._statusLayerLevel--;0>=this._statusLayerLevel&&(a&&document.body.removeChild(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing){this._mapReady||(this._guiManager.show(),this._southSea.setVisible(!1),a=
MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);a=MO.Timer.current();a-this._24HLastTick>this._24HTrendInterval&&(this._timeline.sync(),this._24HLastTick=a);this._investment.process();var a=this._logoBar,b=a.findComponent("investmentTotal"),c=this._investment.invementTotalCurrent();b.setValue(parseInt(c).toString());a=a.findComponent("investmentDay");b=this._investment.invementDayCurrent();
a.setValue(parseInt(b).toString());this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")));a=this._mapEntity;this.fixMatrix(a.countryFaceDisplay().matrix());this.fixMatrix(a.countryBorderDisplay().matrix())}this._livePop.visible()&&this._livePop.dirty()};
MO.FEaiChartWorldScene_onOperationDown=function(a){this._operationFlag=!0;this._operationRotationX=this._rotationX;this._operationRotationY=this._rotationY;this._operationPoint.set(a.x,a.y)};MO.FEaiChartWorldScene_onOperationMove=function(a){if(this._operationFlag){var b=a.x-this._operationPoint.x;this._rotationX=this._operationRotationX-.001*(a.y-this._operationPoint.y);this._rotationY=this._operationRotationY-.002*b}};MO.FEaiChartWorldScene_onOperationUp=function(a){this._operationFlag=!1};
MO.FEaiChartWorldScene_onOperationWheel=function(a){a=a.deltaY;0<a?this._worldScale/=1.05:0>a&&(this._worldScale*=1.05)};MO.FEaiChartWorldScene_onSwitchProcess=function(a){};MO.FEaiChartWorldScene_onSwitchComplete=function(a){};MO.FEaiChartWorldScene_construct=function(){this.__base.FEaiChartScene.construct.call(this);this._operationPoint=new MO.SPoint2};
MO.FEaiChartWorldScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.LogoBar");this._guiManager.register(b);b=this._investment=MO.Class.create(MO.FEaiStatisticsInvestment);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=
MO.Class.create(MO.FGui24HTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.sync();a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FGuiLiveTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._livePop=MO.Class.create(MO.FGuiLivePop);a.setName("LivePop");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Class.create(MO.FE3dOrthoCamera);a.position().set(0,
0,-500);a.lookAt(0,0,0);a.update();b=a.projection();b.setZnear(1);b.setZfar(1E3);b.update();this._activeStage.region().selectCamera(a);a=this._worldEntity=MO.Console.find(MO.FEaiEntityConsole).mapModule().loadWorld(this);this._readyLoader.push(a)};MO.FEaiChartWorldScene_testReady=function(){return!0};
MO.FEaiChartWorldScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};MO.FEaiChartWorldScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this.processResize()};
MO.FEaiChartWorldScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-320,a.ty=0,a.tz=0,a.rx=this._rotationX,a.ry=this._rotationY,a.setScale(this._worldScale,this._worldScale,this._worldScale));a.update();this._rotationY+=.001};
MO.FEaiChartWorldScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._investment.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(1,1));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(710),b.setBottom(260));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(680));b.setHeight(250);b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|
MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(650))};MO.FEaiCompanyScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Company;return a};
MO.FEaiCountryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Country;a._countryTemplate=null;a._countryLogoBar=null;a.onTemplateLoad=MO.FEaiCountryScene_onTemplateLoad;a.setup=MO.FEaiCountryScene_setup;a.active=MO.FEaiCountryScene_active;a.deactive=MO.FEaiCountryScene_deactive;return a};MO.FEaiCountryScene_onTemplateLoad=function(a){a=this._countryTemplate.sprite().matrix();a.tx=-4;a.ty=-3;a.rx=-Math.PI/2;a.updateForce();MO.Eai.Canvas.activeStage()};
MO.FEaiCountryScene_setup=function(){this.__base.FEaiScene.setup.call(this);var a=this._countryLogoBar=MO.RConsole.find(MO.FGuiFrameConsole).get(MO.Eai.Canvas,"eai.country.LogoBar");this.registerFrame(a)};MO.FEaiCountryScene_active=function(){this.__base.FEaiScene.active.call(this)};MO.FEaiCountryScene_deactive=function(){this.__base.FEaiScene.deactive.call(this);MO.Eai.Canvas.activeStage().faceLayer().removeRenderable(this._countryLogoBar.renderable())};
MO.FEaiGroupReportScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.GroupReport;return a};MO.FEaiGroupScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Group;return a};
MO.FEaiScene=function(a){a=MO.Class.inherits(this,a,MO.FScene);a._guiManager=MO.Class.register(a,new MO.AGetter("_guiManager"));a.onOperationKeyDown=MO.FEaiScene_onOperationKeyDown;a.onOperationResize=MO.FEaiScene_onOperationResize;a.onOperationOrientation=MO.FEaiScene_onOperationOrientation;a.onProcessAfter=MO.FEaiScene_onProcessAfter;a.construct=MO.FEaiScene_construct;a.setup=MO.FEaiScene_setup;a.active=MO.FEaiScene_active;a.deactive=MO.FEaiScene_deactive;a.processLoaded=MO.FEaiScene_processLoaded;
a.processResize=MO.FEaiScene_processResize;a.processEvent=MO.FEaiScene_processEvent;a.dispose=MO.FEaiScene_dispose;return a};MO.FEaiScene_onOperationKeyDown=function(a){this.__base.FScene.onOperationKeyDown.call(this,a);a.altKey&&a.keyCode==MO.EKeyCode.P&&(a=this._application.dynamicInfo(),a.setVisible(!a.visible()))};MO.FEaiScene_onOperationResize=function(a){this.__base.FScene.onOperationResize.call(this,a);this.processResize()};
MO.FEaiScene_onOperationOrientation=function(a){this.__base.FScene.onOperationOrientation.call(this,a);this.processResize()};MO.FEaiScene_onProcessAfter=function(){this.__base.FScene.onProcessAfter.call(this);this._guiManager.process()};MO.FEaiScene_construct=function(){this.__base.FScene.construct.call(this)};
MO.FEaiScene_setup=function(){this.__base.FScene.setup.call(this);var a=this._application.desktop(),b=a.canvas2d();a.hide();var c=this._guiManager=MO.Class.create(MO.FGuiCanvasManager);c.linkGraphicContext(this);c.setDesktop(a);c.setCanvas(b);c.setup();a=this._application.dynamicInfo();c.register(a)};
MO.FEaiScene_active=function(){this.__base.FScene.active.call(this);var a=this._activeStage,b=this._application.dynamicInfo();b.setVisible(!1);b.setDisplayOrder(1E4);b.setStage(a);b.setGuiManager(this._guiManager);this._application.desktop().selectStage(a)};MO.FEaiScene_deactive=function(){this.__base.FScene.deactive.call(this);this._application.desktop().selectStage(null)};MO.FEaiScene_processLoaded=function(){var a=new MO.SEvent(this);MO.Window.lsnsLoaded.process(a);a.dispose();this._application.desktop().show()};
MO.FEaiScene_processResize=function(a){this._guiManager.dirty()};MO.FEaiScene_processEvent=function(a){this.__base.FScene.processEvent.call(this,a);this._guiManager.processEvent(a)};MO.FEaiScene_dispose=function(){this._guiManager=MO.Lang.Object.dispose(this._guiManager);this.__base.FScene.dispose.call(this)};
MO.FEaiChartHistoryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartHistory;a._ready=!1;a._mapReady=!1;a._dataReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._lastDateTick=0;a._dateInterval=120;a._startDate=null;a._endDate=null;a._currentDate=null;a._logoBar=null;a._buttonTransform=null;a._timeline=null;a._milestoneFrame=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._milestoneBars=null;a._milestoneShowed=0;a._milestoneBarShowDuration=
1E3;a._milestoneBarShowTick=0;a._milestoneBarShowing=!1;a.onLoadData=MO.FEaiChartHistoryScene_onLoadData;a.onDateSelect=MO.FEaiChartHistoryScene_onDateSelect;a.onMilestoneDone=MO.FEaiChartHistoryScene_onMilestoneDone;a.onOperationPlay=MO.FEaiChartHistoryScene_onOperationPlay;a.onOperationPause=MO.FEaiChartHistoryScene_onOperationPause;a.onOperationVisibility=MO.FEaiChartHistoryScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartHistoryScene_onProcessReady;a.onProcess=MO.FEaiChartHistoryScene_onProcess;
a.onSwitchLiveComplete=MO.FEaiChartHistoryScene_onSwitchLiveComplete;a.testReady=MO.FEaiChartHistoryScene_testReady;a.setup=MO.FEaiChartHistoryScene_setup;a.resetDate=MO.FEaiChartHistoryScene_resetDate;a.selectDate=MO.FEaiChartHistoryScene_selectDate;a.switchPlay=MO.FEaiChartHistoryScene_switchPlay;a.switchLive=MO.FEaiChartHistoryScene_switchLive;a.processResize=MO.FEaiChartHistoryScene_processResize;return a};
MO.FEaiChartHistoryScene_onLoadData=function(a){a=MO.Console.find(MO.FEaiResourceConsole).historyModule();var b=a.dates().first(),c=a.dates().last();this._currentDate.parseAuto(b.code());this._startDate.parseAuto(b.code());this._endDate.parseAuto(c.code());a=a.milestones();for(var b=this._milestoneBars=new MO.TObjects,c=a.count(),d=c-1;0<=d;d--){var e=a.at(c-d-1),f=MO.Class.create(MO.FGuiHistoryMilestoneBar);f.linkGraphicContext(this);f.setName("MilestoneBar_"+d);f.setVisible(!1);f.setDockCd(MO.EUiDock.Right);
f.setTop(90+100*d);1E4<=e.investmentTotal()?f.setRight(-371):f.setRight(-341);f.setup(e);f.build();this._guiManager.register(f);b.push(f)}this._dataReady=!0};MO.FEaiChartHistoryScene_onDateSelect=function(a){this._currentDate.date.setTime(a.date.date.getTime());this._currentDate.refresh();this.selectDate(this._currentDate.format("YYYYMMDD"))};
MO.FEaiChartHistoryScene_onMilestoneDone=function(a){this.switchPlay(!0);this._milestoneShowed++;this._milestoneBarShowTick=MO.Timer.current();this._milestoneBarShowing=!0};MO.FEaiChartHistoryScene_onOperationPlay=function(a){a=this._currentDate.format("YYYYMMDD");var b=this._endDate.format("YYYYMMDD");a==b&&(a=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().first(),MO.Lang.Date.autoParse(this._currentDate,a.code()));this.switchPlay(!0)};
MO.FEaiChartHistoryScene_onOperationPause=function(a){this.switchPlay(!1)};MO.FEaiChartHistoryScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartHistoryScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartHistoryScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);var a=this._countryEntity,b=this._mapEntity;if(!this._statusStart&&this.testReady()){var c=document.getElementById("id_loading");c&&(c.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--);this._statusLayerLevel--;0==this._statusLayerLevel&&(c&&document.body.removeChild(c),a.start(),this._mapEntity.showCountry(a),this.switchPlay(!0),this.processLoaded(),this._statusStart=!0)}c=
MO.Timer.current();this._playing&&(a.introAnimeDone()||a.process(),this._mapReady||(b.cityRangeRenderable().setVisible(!0),b.cityCenterRenderable().setVisible(!0),this._guiManager.show(),this._milestoneFrame.setVisible(!1),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.005),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0),c-this._lastTick>this._interval&&(c-this._lastDateTick>this._dateInterval&&(this._currentDate.addDay(1),
a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD"),this.selectDate(a),a==b&&(this.switchPlay(!1),this.switchLive()),this._lastDateTick=c,this._mapEntity.upload()),this._timeline.setProgress((c-this._lastDateTick)/this._dateInterval),this._timeline.dirty(),this._lastTick=c));this._milestoneBarShowing&&(c=(c-this._milestoneBarShowTick)/this._milestoneBarShowDuration,1<c&&(c=1,this._milestoneBarShowing=!1),c=(1-c)*(1-c),a=this._milestoneBars.at(this._milestoneShowed-1),1E4<=a.data().investmentTotal()?
a.setRight(20+-371*c):a.setRight(20+-341*c),a.dirty());this._milestoneFrame.visible()&&this._milestoneFrame.dirty()};MO.FEaiChartHistoryScene_onSwitchLiveComplete=function(a){this._chapter.selectSceneByCode(MO.EEaiScene.ChartLive).showFace()};MO.FEaiChartHistoryScene_testReady=function(){if(!this._ready){if(!this._dataReady)return!1;this._ready=!0}return this._ready};
MO.FEaiChartHistoryScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;var a=this._groundAutio;a.pause();a=this._groundAutio=MO.Console.find(MO.FAudioConsole).load("{eai.resource}/historyBGM.mp3");a.setLoop(!0);a.setVolume(.2);a.play();a=this._mapEntity;a.cityRangeRenderable().setVisible(!1);a.cityCenterRenderable().setVisible(!1);a=this._logoBar=MO.RConsole.find(MO.FGuiFrameConsole).get(this,"eai.history.LogoBar");
a.setLocation(5,5);this._guiManager.register(a);this._logoBar.findComponent("investment").setNoRolling(!0);a=this._buttonTransform=MO.Class.create(MO.FGuiChangeTransform);a.setInterval(10);a.setScale(.1);this.activeStage();a=this._timeline=MO.Class.create(MO.FGuiHistoryTimeline);a.linkGraphicContext(this);a.setName("Timeline");a.setDockCd(MO.EUiDock.Bottom);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(50);a.setRight(450);a.setBottom(5);a.setHeight(600);a.setTimeUnit(MO.EUiTimeUnit.Month);
a.setStartTime(this._startDate);a.setEndTime(this._endDate);a.setDegreeTime(this._currentDate);a.addDataChangedListener(this,this.onDateSelect);a.build();this._guiManager.register(a);a=this._milestoneFrame=MO.Class.create(MO.FGuiHistoryMilestoneFrame);a.linkGraphicContext(this);a.setName("MilestoneFrame");a.addDataChangedListener(this,this.onMilestoneDone);a.setup();a.build();this._guiManager.register(a);MO.Console.find(MO.FImageConsole);a=MO.Class.create(MO.FGuiPicture);a.linkGraphicContext(this);
a.setName("MilestoneBG_Top");a.setDockCd(MO.EUiDock.RightTop);a.setWidth(468);a.setHeight(464);a._displayOrder=-1;a._backResource="url:/script/ars/eai/milestone/bar_bg_top.png";a.psInitialize();a.build();this._guiManager.register(a);a=MO.Class.create(MO.FGuiPicture);a.linkGraphicContext(this);a.setName("MilestoneBG_Bottom");a.setDockCd(MO.EUiDock.RightBottom);a.setWidth(468);a.setHeight(464);a._displayOrder=-1;a._backResource="url:/script/ars/eai/milestone/bar_bg_bottom.png";a.psInitialize();a.build();
this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a);a=MO.Console.find(MO.FEaiResourceConsole).historyModule();a.addLoadListener(this,this.onLoadData);a.load()};MO.FEaiChartHistoryScene_resetDate=function(){for(var a=MO.Console.find(MO.FEaiEntityConsole).cityModule().citys(),b=a.count(),c=0;c<b;c++)a.at(c).reset()};
MO.FEaiChartHistoryScene_selectDate=function(a){var b=MO.Console.find(MO.FEaiResourceConsole).historyModule(),c=b.dates().get(a);if(b=b.milestones().get(a))this._milestoneFrame.setData(b),this._milestoneFrame.show(),this._milestoneFrame.dirty(),this.switchPlay(!1);if(c){this._timeline.setDegreeTime(this._currentDate);this._timeline.dirty();for(var b=c.citys(),d=MO.Console.find(MO.FEaiEntityConsole).cityModule().citys(),e=d.count(),f=0;f<e;f++){var g=d.at(f),h=g.data().code(),h=b.get(h);g.update(h)}this._logoBar.findComponent("date").setValue(a);
this._logoBar.findComponent("investment").setValue(parseInt(c.investmentTotal()).toString())}};MO.FEaiChartHistoryScene_switchPlay=function(a){this._playing=a};MO.FEaiChartHistoryScene_switchLive=function(){var a=MO.Class.create(MO.FGuiActionAlpha);a.setAlphaBegin(1);a.setAlphaEnd(0);a.setAlphaInterval(-.005);a.addCompleteListener(this,this.onSwitchLiveComplete);a.push(this._guiManager);this._guiManager.mainTimeline().pushAction(a)};
MO.FEaiChartHistoryScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=this._southSea;a.setDockCd(MO.EUiDock.RightBottom);a.setRight(520);a.setBottom(180)};
MO.FEaiChartCustomerDynamicInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentCount=MO.Class.register(a,[new MO.AGetter("_investmentCount"),new MO.APersistence("_investmentCount",MO.EDataType.Double)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Int32)]);
a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);a._rankUnits=MO.Class.register(a,[new MO.AGetter("_rankUnits"),new MO.APersistence("_rankUnits",MO.EDataType.Objects,MO.FEaiChartCustomerDynamicRankUnit)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartCustomerDynamicUnit)]);return a};
MO.FEaiChartCustomerDynamicRankUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.String)]);a._phone=MO.Class.register(a,[new MO.AGetter("_phone"),new MO.APersistence("_phone",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",
MO.EDataType.Double)]);return a};
MO.FEaiChartCustomerDynamicUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.String)]);a._phone=MO.Class.register(a,[new MO.AGetter("_phone"),new MO.APersistence("_phone",
MO.EDataType.String)]);a._modelLabel=MO.Class.register(a,[new MO.AGetter("_modelLabel"),new MO.APersistence("_modelLabel",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._gain=MO.Class.register(a,[new MO.AGetter("_gain"),new MO.APersistence("_gain",MO.EDataType.Double)]);return a};
MO.FEaiChartCustomerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),
0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=
MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",
MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartCustomerProcessor_onDynamicData;a.construct=MO.FEaiChartCustomerProcessor_construct;a.allocUnit=MO.FEaiChartCustomerProcessor_allocUnit;a.allocShape=MO.FEaiChartCustomerProcessor_allocShape;a.setup=MO.FEaiChartCustomerProcessor_setup;a.calculateCurrent=MO.FEaiChartCustomerProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartCustomerProcessor_focusEntity;a.process=MO.FEaiChartCustomerProcessor_process;a.dispose=MO.FEaiChartCustomerProcessor_dispose;
return a};MO.FEaiChartCustomerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartCustomerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiChartCustomerDynamicInfo);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);this._eventDataChanged=new MO.SEvent(this)};
MO.FEaiChartCustomerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartCustomerDynamicUnit));return a};MO.FEaiChartCustomerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartCustomerProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiChartCustomerProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;b.unit=a;
this.processDataChangedListener(b)};
MO.FEaiChartCustomerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d)}a=MO.Timer.current();
a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};
MO.FEaiChartCustomerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartCustomerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._24HLastTick=0;a._24HTrendInterval=3E5;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onInvestmentDataChanged=MO.FEaiChartCustomerScene_onInvestmentDataChanged;
a.onOperationVisibility=MO.FEaiChartCustomerScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartCustomerScene_onProcessReady;a.onProcess=MO.FEaiChartCustomerScene_onProcess;a.onSwitchProcess=MO.FEaiChartCustomerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartCustomerScene_onSwitchComplete;a.setup=MO.FEaiChartCustomerScene_setup;a.showParticle=MO.FEaiChartCustomerScene_showParticle;a.showFace=MO.FEaiChartCustomerScene_showFace;a.fixMatrix=MO.FEaiChartCustomerScene_fixMatrix;a.processResize=
MO.FEaiChartCustomerScene_processResize;return a};MO.FEaiChartCustomerScene_onInvestmentDataChanged=function(a){var b=a.unit,c=this._liveTable;c.setRankUnits(a.rankUnits);c.pushUnit(b);c.dirty()};MO.FEaiChartCustomerScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};
MO.FEaiChartCustomerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartCustomerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);a=MO.Timer.current();a-this._24HLastTick>this._24HTrendInterval&&
(this._timeline.sync(),this._24HLastTick=a);this._processor.process();var a=this._logoBar,b=this._processor;0<b.invementDayCurrent()&&(a.findComponent("investmentTotal").setValue(parseInt(b.invementTotalCurrent()).toString()),a.findComponent("investmentDay").setValue(parseInt(b.invementDayCurrent()).toString()));this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};
MO.FEaiChartCustomerScene_onSwitchProcess=function(a){};MO.FEaiChartCustomerScene_onSwitchComplete=function(a){};
MO.FEaiChartCustomerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.customer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartCustomerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();
a=this._timeline=MO.Class.create(MO.FEaiChartCustomerTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.sync();a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FEaiChartCustomerTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};
MO.FEaiChartCustomerScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};MO.FEaiChartCustomerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};
MO.FEaiChartCustomerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.8,a.ty=-11,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartCustomerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(260));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(780));b.setHeight(250);b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|
MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(750))};
MO.FEaiChartCustomerTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiChartCustomerTable_onImageLoad;a.onPaintBegin=MO.FEaiChartCustomerTable_onPaintBegin;a.construct=MO.FEaiChartCustomerTable_construct;a.setup=MO.FEaiChartCustomerTable_setup;a.setRankUnits=MO.FEaiChartCustomerTable_setRankUnits;a.pushUnit=MO.FEaiChartCustomerTable_pushUnit;a.drawRow=MO.FEaiChartCustomerTable_drawRow;a.dispose=MO.FEaiChartCustomerTable_dispose;return a};MO.FEaiChartCustomerTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartCustomerTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",d+.5*(f-c),
e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;b.drawGridImage(this._rankLineImage,d+6,e+this._rankTitleStart,f-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(f-167),e+3,198,40);if(this._rank)for(d=rankUnit.count(),e+=90,f=0;f<d;f++)c=rankUnit.at(f),this.drawRow(b,c,!0,f,a,e+this._rankRowHeight*f,g)};
MO.FEaiChartCustomerTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartCustomerTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);a=
this._gridRank=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!1);a.setDisplayHead(!1);a.setLocation(50,170);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(40);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");
b.setLabel();b.setDataName("image");b.setWidth(110);b.setPadding(1,1,1,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("card");b.setLabel("");b.setDataName("card");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("label_phone");b.setLabel("");b.setDataName("label_phone");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");
b.setLabel("");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,332);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font=
"Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(30);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(110);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");b.setDataName("customer_city");b.setWidth(100);
b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("customerAmount");b.setLabel("\u6295\u8d44\u989d(\u5143)");b.setDataName("customer_amount");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=
10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=
19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartCustomerTable_setRankUnits=function(a){var b=this._gridRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow();f.set("image","{eai.resource}/live/"+(d+1)+".png");f.set("card",e.card());f.set("label_phone",e.label()+" - "+e.phone());f.set("investment",e.investment());b.pushRow(f)}};
MO.FEaiChartCustomerTable_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("customer_amount",a.investment());c.insertRow(d);b=this._units;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};
MO.FEaiChartCustomerTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartCustomerTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._ready=!1;a._investmentTotal=0;a._intervalMiniute=10;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new MO.AGetSet("_triangleHeight"),
12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartCustomerTimeline_oeUpdate;a.construct=MO.FEaiChartCustomerTimeline_construct;a.sync=MO.FEaiChartCustomerTimeline_sync;a.drawTrend=MO.FEaiChartCustomerTimeline_drawTrend;a.onPaintBegin=MO.FEaiChartCustomerTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiChartCustomerTimeline_on24HDataFetch;return a};
MO.FEaiChartCustomerTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiChartCustomerTrendInfo)};
MO.FEaiChartCustomerTimeline_sync=function(){if(this._ready){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute(this._intervalMiniute);var b=this._startTime;b.assign(a);b.addDay(-1);var c=this._endTime;c.assign(a);MO.Console.find(MO.FEaiLogicConsole).statistics().marketer().doCustomerTrend(this,this.on24HDataFetch,b.format(),c.format())}}};
MO.FEaiChartCustomerTimeline_on24HDataFetch=function(a){this._trendInfo.unserializeSignBuffer(a.sign,a.content,!0);this.dirty()};MO.FEaiChartCustomerTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0,this.sync()),MO.EEventStatus.Stop};
MO.FEaiChartCustomerTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){n=this._startTime;m=this._trendInfo.units();var u=m.count(),p=m.first(),r=a._handle;r.lineCap="round";var q=1E4*g/l;g=f-p[b]/1E4*q;r.beginPath();r.moveTo(c,g);l=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(p=1;p<u;p++){var t=m.get(p),v=t[b];n.parseAuto(t.recordDate());n.refresh();t=n.date.getTime()-h;t=c+t/k*(e-c);v=f-v/1E4*q;v-=this._baseHeight;r.lineTo(t,v)}e=MO.Lang.Hex.format(l.findRate(0));
n="#"+e.substring(2);b="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";e=MO.Lang.Hex.format(l.findRate(1));m="#"+e.substring(2);e="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";h=a.createLinearGradient(0,f,0,d);h.addColorStop("0",n);h.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",b);a.addColorStop("1",e);
r.strokeStyle=h;r.lineWidth=4;r.stroke();r.fillStyle=a;r.lineTo(t,f);r.lineTo(c,f);r.lineTo(c,g);r.fill()};
MO.FEaiChartCustomerTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+60,l=e-30,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",1);for(var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",1);p=e.format("HH24:00");e.addHour(1);
if(r=!r)b.setFont("bold 20px Microsoft YaHei"),q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f.units())&&!q.isEmpty()){p=q.first();for(var v=0,m=q.count(),r=0;r<m;r++)t=q.get(r),t=t.investment(),t>v&&(v=t);this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");g=-1;h=k=0;e.parseAuto(p.recordDate());e.refresh();g=e.date.getHours();for(r=0;r<m;r++)t=q.get(r),e.parseAuto(t.recordDate()),e.refresh(),l=e.date.getHours(),g==l?k+=t.investment():
(k>h&&(h=k,k=0),g=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");g=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");k=b.textWidth(g);h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");l=b.textWidth(h);f=MO.Lang.Float.unitFormat(f.investmentTotal()/24,0,0,2,0,1E4,"\u4e07");n=b.textWidth(f);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,
a+q+k-k,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+k-l,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(f,a+q+k-n,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartCustomerTrendInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Uint32)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartCustomerTrendUnit)]);
return a};MO.FEaiChartCustomerTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Uint32)]);return a};
MO.SEaiEarthTouch=function(){this.points=new MO.TObjects;this.direction=new MO.SVector3;this.testDisableRectangles=MO.SEaiEarthTouch_testDisableRectangles;this.setInfo=MO.SEaiEarthTouch_setInfo;this.calculate=MO.SEaiEarthTouch_calculate;this.calculateFlat=MO.SEaiEarthTouch_calculateFlat;this.toString=MO.SEaiEarthTouch_toString;return this};MO.SEaiEarthTouch_testDisableRectangles=function(a,b,c){for(var d=a.count(),e=0;e<d;e++)if(a.at(e).testRange(b,c))return!0;return!1};
MO.SEaiEarthTouch_setInfo=function(a,b){for(var c=a.points(),d=this.points,e=d.count(),f=0;f<e;f++){var g=d.at(f);MO.Memory.free(g)}d.clear();e=c.count();for(f=0;f<e;f++){var h=c.at(f);b&&this.testDisableRectangles(b,h.x(),h.y())||(g=MO.Memory.alloc(MO.SEaiEarthTouchPoint),g.setInfo(h),d.push(g))}d.isEmpty()||(g=d.first(),this.direction.assign(g.direction))};MO.SEaiEarthTouch_calculate=function(a){for(var b=this.points,c=b.count(),d=0;d<c;d++)b.at(d).calculate(a)};
MO.SEaiEarthTouch_calculateFlat=function(a){for(var b=this.points,c=b.count(),d=0;d<c;d++){var e=b.at(d),f=e.position;e.calculateFlat(a,f.x,f.y)}};MO.SEaiEarthTouch_toString=function(){for(var a=new MO.TString,b=this.points,c=b.count(),d=0;d<c;d++){var e=b.at(d);a.append(e.toString())}return a.toString()};
MO.SEaiEarthTouchPoint=function(){this.originPosition=new MO.SPoint2;this.originLength=0;this.position=new MO.SPoint2;this.positionLength=0;this.direction=new MO.SVector3;this.sphereLocation=new MO.SVector3;this.mapLocation=new MO.SPoint2;this.setInfo=MO.SEaiEarthTouchPoint_setInfo;this.calculate=MO.SEaiEarthTouchPoint_calculate;this.calculateFlat=MO.SEaiEarthTouchPoint_calculateFlat;this.calculateSphere=MO.SEaiEarthTouchPoint_calculateSphere;this.toString=MO.SEaiEarthTouchPoint_toString;return this};
MO.SEaiEarthTouchPoint_setInfo=function(a){var b=2*(a.x()-.5);a=2*-(a.y()-.5);this.originPosition.set(b,a);this.originLength=this.originPosition.absolute();var b=Math.PI/2*b*1.02,c=MO.Lang.Float.toRange(Math.sqrt(b*b+a*a),0,1),d=Math.sin(c*MO.Lang.Math.PI_2);this.position.set(b,a);this.positionLength=this.position.absolute();c=this.direction;c.x=b;c.y=a;c.z=0;c.normalize();c.mul(d,d,d);b=MO.Lang.Float.toRange(Math.sqrt(c.x*c.x+c.y*c.y),0,1);c.z=-Math.sin(Math.acos(b));c.normalize()};
MO.SEaiEarthTouchPoint_calculate=function(a){var b=this.sphereLocation;a.transformPoint3(this.direction,b);b.normalize();a=this.mapLocation;a.x=Math.atan2(b.x,-b.z)/Math.PI/2+.5;a.y=.5-Math.asin(b.y)/Math.PI};
MO.SEaiEarthTouchPoint_calculateFlat=function(a,b,c){var d=MO.Lang.Float.toRange(Math.sqrt(b*b+c*c),0,1),e=Math.sin(d*MO.Lang.Math.PI_2),d=this.direction;d.x=b;d.y=c;d.z=0;d.normalize();d.mul(e,e,e);b=this.sphereLocation;c=MO.Lang.Float.toRange(Math.sqrt(d.x*d.x+d.y*d.y),0,1);d.z=-Math.sin(Math.acos(c));d.normalize();a.transformPoint3(d,b);b.normalize();a=this.mapLocation;a.x=Math.atan2(b.x,-b.z)/Math.PI/2+.5;a.y=.5-Math.asin(b.y)/Math.PI;a.mul(.5/.29,.5/.29)};
MO.SEaiEarthTouchPoint_calculateSphere=function(a,b){var c=o._graphicContext.size(),d=event.x-c.width/2,e=event.y-c.height/2,c=.5*Math.min(c.width,c.height);a=MO.Lang.Float.toRange(d/c,-1,1);b=-MO.Lang.Float.toRange(e/c,-1,1);e=MO.Lang.Float.toRange(Math.sqrt(a*a+b*b),0,1);d=new MO.SVector3;d.x=a;d.y=b;d.z=-Math.sin(Math.acos(e));d.normalize();e=o._rotationMatrix.assign(o._earthSphere.matrix());e.invert();e=e.transformPoint3(d);e.normalize();d=Math.atan2(e.x,-e.z)/Math.PI/2+.5;e=.5-Math.asin(e.y)/
Math.PI;o._earthFlat.drawTouch(d,e)};MO.SEaiEarthTouchPoint_toString=function(){return"P("+this.position.toDisplay()+") D("+this.direction.toDisplay()+") L("+this.sphereLocation.toDisplay()+") M("+this.mapLocation.toDisplay()+")"};
MO.FEaiChartCustomerSphereInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._typeCode=MO.Class.register(a,[new MO.AGetter("_typeCode"),new MO.APersistence("_typeCode",MO.EDataType.String)]);a._points=MO.Class.register(a,[new MO.AGetter("_points"),new MO.APersistence("_points",MO.EDataType.Objects,MO.FEaiChartCustomerSphereInfoPoint)]);return a};
MO.FEaiChartCustomerSphereInfoPoint=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._x=MO.Class.register(a,[new MO.AGetter("_x"),new MO.APersistence("_x",MO.EDataType.Float)]);a._y=MO.Class.register(a,[new MO.AGetter("_y"),new MO.APersistence("_y",MO.EDataType.Float)]);return a};
MO.FEaiChartCustomerSphereOperation=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._imageButton=null;a._buttonVisible=MO.Class.register(a,new MO.AGetter("_buttonVisible"),!1);a.onImageLoad=MO.FEaiChartCustomerSphereOperation_onImageLoad;a.onPaintBegin=MO.FEaiChartCustomerSphereOperation_onPaintBegin;a.construct=MO.FEaiChartCustomerSphereOperation_construct;a.showButton=MO.FEaiChartCustomerSphereOperation_showButton;a.setup=MO.FEaiChartCustomerSphereOperation_setup;return a};
MO.FEaiChartCustomerSphereOperation_onImageLoad=function(){this._ready=!0;this.dirty()};MO.FEaiChartCustomerSphereOperation_onPaintBegin=function(a){if(this._imageButton.testReady()&&this._imageRange.testReady()){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.virtualSize,d=this._imageButton.size();a=d.width/1.8;var d=d.height/1.8,e=.5*(c.width-a),c=.5*(c.height-d);this._buttonVisible?b.drawImage(this._imageButton,e,c,a,d):b.drawImage(this._imageRange,e,c,a,d)}};
MO.FEaiChartCustomerSphereOperation_construct=function(){this.__base.FGuiControl.construct.call(this)};MO.FEaiChartCustomerSphereOperation_showButton=function(a){this._buttonVisible=a;this.dirty()};MO.FEaiChartCustomerSphereOperation_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._imageButton=a.load("{eai.resource}/world/button.png");b.addLoadListener(this,this.onImageLoad);b=this._imageRange=a.load("{eai.resource}/world/button.range.png");b.addLoadListener(this,this.onImageLoad)};
MO.FEaiChartCustomerSphereScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomerSphere;a._optionMapCountry=!1;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._controlOperation=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._earthSphere=null;a._disableRectangles=null;a.onSocketTouchReceived=MO.FEaiChartCustomerSphereScene_onSocketTouchReceived;
a.onSocketSphereReceived=MO.FEaiChartCustomerSphereScene_onSocketSphereReceived;a.onOperationDown=MO.FEaiChartCustomerSphereScene_onOperationDown;a.onOperationVisibility=MO.FEaiChartCustomerSphereScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartCustomerSphereScene_onProcessReady;a.onProcessInput=MO.FEaiChartCustomerSphereScene_onProcessInput;a.onProcess=MO.FEaiChartCustomerSphereScene_onProcess;a.construct=MO.FEaiChartCustomerSphereScene_construct;a.setup=MO.FEaiChartCustomerSphereScene_setup;
a.testDisableRectangles=MO.FEaiChartCustomerSphereScene_testDisableRectangles;a.showFace=MO.FEaiChartCustomerSphereScene_showFace;a.fixMatrix=MO.FEaiChartCustomerSphereScene_fixMatrix;a.processResize=MO.FEaiChartCustomerSphereScene_processResize;a.dispose=MO.FEaiChartCustomerSphereScene_dispose;return a};
MO.FEaiChartCustomerSphereScene_onSocketTouchReceived=function(a){var b=this._guiManager,c=this._controlOperation,d=this._graphicContext.size(),e=this._info;e.unserializeBuffer(a.message,!0);var f=this._earthSphere,g=f.matrix();a=this._socketSphere;var h=f.sourceTouch();f.targetTouch();var k=e.typeCode();if("D"==k){if(!e.points().isEmpty()&&f.setSource(e,this._disableRectangles)){e=this._rotationMatrix.assign(g);e.invert();h.calculate(e);e=h.points.first();if(e.originLength<190/d.height)c.buttonVisible()?
0>e.originPosition.x?(f.reset(),a.send("reset"),c.showButton(!1)):a.send("next"):c.showButton(!0);else{d=this._earthFlat.pickIdentify(e.mapLocation.x,e.mapLocation.y);if(0<d){b=0;switch(d){case 1:b=1;break;case 2:b=8;break;case 3:b=7;break;case 4:b=6;break;case 5:b=5;break;case 6:b=4;break;case 7:b=3;break;case 8:b=2}a.send("area="+b);return}c.showButton(!1);this._earthFlat.drawTouch(e.mapLocation.x,e.mapLocation.y);this._moving=!0}b.dirty()}}else"M"==k&&this._moving?e.points().isEmpty()||(f.setTarget(e,
this._disableRectangles),f.sendRotation()):"U"==k&&(this._moving=!1)};MO.FEaiChartCustomerSphereScene_onSocketSphereReceived=function(a){var b=this._guiManager;a=a.message;var c=this._controlOperation;"phase=0"==a?c.showButton(!1):"phase=1"==a&&c.showButton(!0);b.dirty()};
MO.FEaiChartCustomerSphereScene_onOperationDown=function(a){this.__base.FEaiChartScene.onOperationDown.call(this,a);var b=this._earthSphere,c=this._graphicContext.size(),d=a.x-c.width/2;a=a.y-c.height/2;c=.5*Math.min(c.width,c.height);d=MO.Lang.Float.toRange(d/c,-1,1);a=-MO.Lang.Float.toRange(a/c,-1,1);c=this._rotationMatrix.assign(b.matrix());c.invert();b=b.sourcePoint();b.calculateFlat(c,d,a);b=b.mapLocation;this._earthFlat.drawTouch(b.x,b.y)};
MO.FEaiChartCustomerSphereScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartCustomerSphereScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._earthSphere.autoRotation(!0)};
MO.FEaiChartCustomerSphereScene_onProcessInput=function(){var a=this._earthSphere.matrix(),a=this._earthSphere.matrix();MO.Window.Keyboard.isPress(MO.EKeyCode.A)?(a.addRotationAxis(MO.Lang.Math.vectorAxisY,-.02),a.parse()):MO.Window.Keyboard.isPress(MO.EKeyCode.D)&&(a.addRotationAxis(MO.Lang.Math.vectorAxisY,.02),a.parse());MO.Window.Keyboard.isPress(MO.EKeyCode.W)?(a.addRotationAxis(MO.Lang.Math.vectorAxisX,-.02),a.parse()):MO.Window.Keyboard.isPress(MO.EKeyCode.S)&&(a.addRotationAxis(MO.Lang.Math.vectorAxisX,
.02),a.parse());MO.Window.Keyboard.isPress(MO.EKeyCode.Q)?(a.addRotationAxis(MO.Lang.Math.vectorAxisZ,-.02),a.parse()):MO.Window.Keyboard.isPress(MO.EKeyCode.E)&&(a.addRotationAxis(MO.Lang.Math.vectorAxisZ,.02),a.parse())};
MO.FEaiChartCustomerSphereScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),this._countryEntity.start(),this.processLoaded(),this._statusStart=this._playing=!0)}this._playing&&(this._socketTouch.process(),this._socketSphere.process(),this._earthSphere.process(),this.onProcessInput())};MO.FEaiChartCustomerSphereScene_construct=function(){this.__base.FEaiChartScene.construct.call(this);this._rotationMatrix=new MO.SMatrix3d;this._earthMatrix=new MO.SMatrix3d;this._info=MO.Class.create(MO.FEaiChartCustomerSphereInfo)};
MO.FEaiChartCustomerSphereScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._application.desktop().canvas3d().graphicContext(),b=this._activeStage,c=MO.Desktop.qualityCd();(this._disableRectangles=new MO.TObjects).push(new MO.SRectangle(.7,.3,.1,.1));var d=this._earthFlat=MO.Class.create(MO.FEaiEarthFlat);d.linkGraphicContext(a);d.setup();b.groundLayer().push(d);d=this._earthSphere=MO.Class.create(MO.FEaiEarthSphere);d._scene=this;d.linkGraphicContext(a);c==MO.EGraphicQuality.Highest?
d.setSplitCount(128):d.setSplitCount(64);d.setup();d.matrix().setScaleAll(200);d.matrix().update();b.selectTechnique(this,MO.FE3dSphereTechnique).passView().setSphere(d);c=MO.Class.create(MO.FE3dOrthoCamera);c.position().set(0,0,-500);c.lookAt(0,0,0);c.update();var e=c.projection();e.size().assign(a.size());e.setZnear(-1E3);e.setZfar(1E3);e.update();b.region().selectCamera(c);this.activeStage();a=this._controlOperation=MO.Class.create(MO.FEaiChartCustomerSphereOperation);a.setName("Operation");a.linkGraphicContext(this);
a.setup();a.build();this._guiManager.register(a);a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a);a=this._socketTouch=MO.Class.create(MO.FBinarySocket);a.connect("{service.touch}/touch");a.addReceiveListener(this,this.onSocketTouchReceived);a=this._socketSphere=MO.Class.create(MO.FSocket);a.connect("{service.touch}/sphere");a.addReceiveListener(this,this.onSocketSphereReceived);
d._socket=a;d=this._worldResource=MO.Console.find(MO.FEaiResourceConsole).mapModule().loadWorld();this._readyLoader.push(d);a=MO.Console.find(MO.FEaiEntityConsole);d=this._worldEntity=a.mapModule().loadWorld(this);this._readyLoader.push(d)};MO.FEaiChartCustomerSphereScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};
MO.FEaiChartCustomerSphereScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):a.setScale(100,100,100);a.update()};MO.FEaiChartCustomerSphereScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);this._graphicContext.size();var a=this._controlOperation;a.setWidth(256);a.setHeight(256)};
MO.FEaiChartCustomerSphereScene_dispose=function(){this._rotationMatrix=MO.Lang.Object.dispose(this._rotationMatrix);this._earthMatrix=MO.Lang.Object.dispose(this._earthMatrix);this._info=MO.Lang.Object.dispose(this._info);this.__base.FEaiChartScene.dispose.call(this)};
MO.FEaiEarthFlat=function(a){a=MO.Class.inherits(this,a,MO.FE3dDisplay,MO.MProcessReady);a._textureCloud=MO.Class.register(a,new MO.AGetter("_textureCloud"));a._textureLand=MO.Class.register(a,new MO.AGetter("_textureLand"));a._textureOcean=MO.Class.register(a,new MO.AGetter("_textureOcean"));a._textureWater=MO.Class.register(a,new MO.AGetter("_textureWater"));a.onProcessReady=MO.FEaiEarthFlat_onProcessReady;a.construct=MO.FEaiEarthFlat_construct;a.setup=MO.FEaiEarthFlat_setup;a.drawTouch=MO.FEaiEarthFlat_drawTouch;
a.drawBoundary=MO.FEaiEarthFlat_drawBoundary;a.drawGrid=MO.FEaiEarthFlat_drawGrid;a.pickIdentify=MO.FEaiEarthFlat_pickIdentify;a.process=MO.FEaiEarthFlat_process;a.dispose=MO.FEaiEarthFlat_dispose;return a};MO.FEaiEarthFlat_drawTouch=function(a,b){};MO.FEaiEarthFlat_drawBoundary=function(a,b,c,d,e,f,g,h){var k=b.positionCount();b=b.positions();a.beginPath();a.moveTo(b[0]*c+e,-b[1]*d+f);for(var l=0;l<k;l++)a.lineTo(b[2*l]*c+e,-b[2*l+1]*d+f);a.closePath();a.lineWidth=g;a.strokeStyle=h;a.stroke()};
MO.FEaiEarthFlat_drawGrid=function(a,b){for(var c=this._imageLand.size(),d=c.width,e=c.height,f=2*b,g=c.width/f,h=c.height/b,c=0;c<b;c++){var k=h*c;a.drawLine(0,k,d,k,"#FF75F3",1)}for(c=0;c<f;c++)d=g*c,a.drawLine(d,0,d,e,"#FF75F3",1)};
MO.FEaiEarthFlat_onProcessReady=function(){var a=this._textureCloudLoader;this._textureCloud=a.pickTexture();this._textureCloudLoader=MO.Lang.Object.dispose(a);var b=this._imageLand,c=this._graphicContext,d=b.size();this._imageSize=new MO.SSize2(d.width,d.height);var a=d.width,e=d.height,f=this._canvas=MO.Class.create(MO.FE2dCanvas);f.size().assign(d);f.build(MO.Window._hDocument);var g=f.graphicContext(),h=g._handle;g.drawImage(b,0,0,a,d.height);h.lineCap="round";for(var b=a/360,k=e/180,l=.5*a,e=
.5*e,n=this._worldResource.data().countries(),m=n.count(),u=0;u<m;u++){var p=n.at(u),r=1,q="#0085E6";"China"==p.code()&&(r=4,q="#004596");for(var p=p.boundaries(),t=p.count(),v=0;v<t;v++){var w=p.at(v);if(MO.Class.isClass(w,MO.FEaiMapBoundaryData))this.drawBoundary(h,w,b,k,l,e,r,q);else for(var w=w.items(),x=w.count(),y=0;y<x;y++){var z=w.at(y);this.drawBoundary(h,z,b,k,l,e,r,q)}}}g.drawImage(this._imageArea,0,0,a,d.height);c=this._textureLand=c.createFlatTexture();c.setCode("land");c.upload(f);b=
this._imageIdentify;d=b.size();f=this._canvasIdentify=MO.Class.create(MO.FE2dCanvas);f.size().assign(d);f.build(MO.Window._hDocument);g=f.graphicContext();g.drawImage(b,0,0,a,d.height);this._identityData=g._handle.getImageData(0,0,a,d.height);f.dispose();b.dispose();this._imageLand=null;a=this._textureOceanLoader;this._textureOcean=a.pickTexture();this._textureOceanLoader=MO.Lang.Object.dispose(a);a=this._textureWaterLoader;this._textureWater=a.pickTexture();this._textureWaterLoader=MO.Lang.Object.dispose(a);
a=this._textureWaterNormalLoader;this._textureWaterNormal=a.pickTexture();this._textureWaterNormalLoader=MO.Lang.Object.dispose(a);a=this._rectangle;a.pushTexture(this._textureCloud);a.pushTexture(this._textureLand);a.pushTexture(this._textureOcean);a.pushTexture(this._textureWater);a.pushTexture(this._textureWaterNormal);this.pushRenderable(a)};MO.FEaiEarthFlat_construct=function(){this.__base.FE3dDisplay.construct.call(this);this.__base.MProcessReady.construct.call(this)};
MO.FEaiEarthFlat_setup=function(){var a=MO.Desktop.qualityCd(),b=this._worldResource=MO.Console.find(MO.FEaiResourceConsole).mapModule().loadWorld();this._readyLoader.push(b);b=this._textureCloudLoader=MO.Class.create(MO.FE3dTextureLoader);b.linkGraphicContext(this);b.setup(MO.EG3dTexture.Flat2d,"cloud");b.loadUrl("{eai.resource}/world/cloud1024.jpg");this._readyLoader.push(b);b=this._imageLand=MO.Class.create(MO.FImage);a==MO.EGraphicQuality.Highest?b.loadUrl("{eai.resource}/world/land2048x2048.png"):
b.loadUrl("{eai.resource}/world/land1024x1024.png");this._readyLoader.push(b);b=this._imageArea=MO.Class.create(MO.FImage);b.loadUrl("{eai.resource}/world/area.png");this._readyLoader.push(b);b=this._imageIdentify=MO.Class.create(MO.FImage);b.loadUrl("{eai.resource}/world/identify.jpg");this._readyLoader.push(b);b=this._textureOceanLoader=MO.Class.create(MO.FE3dTextureLoader);b.linkGraphicContext(this);b.setup(MO.EG3dTexture.Flat2d,"ocean");a==MO.EGraphicQuality.Highest?b.loadUrl("{eai.resource}/world/ocean2048x2048.jpg"):
b.loadUrl("{eai.resource}/world/ocean1024x1024.jpg");this._readyLoader.push(b);b=this._textureWaterLoader=MO.Class.create(MO.FE3dTextureLoader);b.linkGraphicContext(this);b.setup(MO.EG3dTexture.Flat2d,"water");b.loadUrl("{eai.resource}/world/water.jpg");this._readyLoader.push(b);b=this._textureWaterNormalLoader=MO.Class.create(MO.FE3dTextureLoader);b.linkGraphicContext(this);b.setup(MO.EG3dTexture.Flat2d,"water_normal");b.loadUrl("{eai.resource}/world/water-normal.png");this._readyLoader.push(b);
a=this._rectangle=MO.Class.create(MO.FE3dRectangleArea);a.linkGraphicContext(this);a.setup();a.material().info().effectCode="eai.earth.flat"};MO.FEaiEarthFlat_pickIdentify=function(a,b){var c=this._identityData,d=parseInt(c.width*a),e=parseInt(c.height*b);return c.data[c.width*e+d<<2]};MO.FEaiEarthFlat_process=function(){this.__base.FE3dDisplay.process.call(this);this._readyLoader.testReady()};MO.MFrameProcessor_dispose=function(){this.__base.MProcessReady.dispose.call(this);this.__base.FE3dDisplay.dispose.call(this)};
MO.FEaiEarthSphere=function(a){a=MO.Class.inherits(this,a,MO.FE3dSphere,MO.MListener);a._optionRotation=!1;a._speed=1;a._speedOperate=1;a._currentTick=0;a._autoTick=0;a._startPosition=null;a._currentPosition=null;a._currentDirection=null;a._targetPosition=null;a._rotationSpeed=-.001;a._rotationSpeed=-.001;a._sourcePoint=MO.Class.register(a,new MO.AGetter("_sourcePoint"));a._sourceTouch=MO.Class.register(a,new MO.AGetter("_sourceTouch"));a._targetTouch=MO.Class.register(a,new MO.AGetter("_targetTouch"));
a._sourceDirection=MO.Class.register(a,new MO.AGetter("_sourceDirection"));a._targetDirection=MO.Class.register(a,new MO.AGetter("_targetDirection"));a.construct=MO.FEaiEarthSphere_construct;a.setSource=MO.FEaiEarthSphere_setSource;a.setTarget=MO.FEaiEarthSphere_setTarget;a.reset=MO.FEaiEarthSphere_reset;a.autoRotation=MO.FEaiEarthSphere_autoRotation;a.sendRotation=MO.FEaiEarthSphere_sendRotation;a.process=MO.FEaiEarthSphere_process;a.dispose=MO.FEaiEarthSphere_dispose;return a};
MO.FEaiEarthSphere_construct=function(){this.__base.FE3dSphere.construct.call(this);this._sourcePoint=new MO.SEaiEarthTouchPoint;this._sourceTouch=new MO.SEaiEarthTouch;this._targetTouch=new MO.SEaiEarthTouch;this._sourceDirection=new MO.SVector3;this._currentDirection=new MO.SVector3;this._targetDirection=new MO.SVector3;this._sourceMatrix=new MO.SMatrix3d;this._currentMatrix=new MO.SMatrix3d;this._rotationAxis=new MO.SVector3;this._rotationMatrix=new MO.SMatrix3d;this._rotationMatrix3x3=new MO.SMatrix3x3};
MO.FEaiEarthSphere_setSource=function(a,b){var c=this._sourceTouch;c.setInfo(a,b);if(c.points.isEmpty())return!1;this._sourceDirection.assign(c.direction);this._currentDirection.assign(c.direction);this._sourceMatrix.assign(this._matrix);this._currentMatrix.assign(this._matrix);this._autoTick=this._rotationAngle=this._currentAngle=0;return!0};
MO.FEaiEarthSphere_setTarget=function(a){var b=this._targetTouch;b.setInfo(a);this._targetDirection.assign(b.direction);this._sourceTouch.points.first();this._targetTouch.points.first();a=this._rotationAxis;a.assign(this._sourceDirection);a.cross(this._targetDirection);a.normalize();this._rotationAngle=Math.acos(this._sourceDirection.dotPoint3(this._targetDirection));this.autoRotation(!1);this._autoTick=0};
MO.FEaiEarthSphere_process=function(){this.__base.FE3dSphere.process.call(this);var a=this._matrix,b=MO.Timer.current();0!=this._currentTick&&(this._currentAngle!=this._rotationAngle?(this._currentAngle+=this._speed*(b-this._currentTick)*.001,this._currentAngle>this._rotationAngle&&(this._currentAngle=this._rotationAngle),a.assign(this._sourceMatrix),a.addRotationAxis(this._rotationAxis,-this._currentAngle),a.parse(),this.sendRotation()):this._optionRotation?(a.addRotationAxis(MO.Lang.Math.vectorAxisY,
-this._rotationSpeed),a.parse(),this.sendRotation()):0==this._autoTick?this._autoTick=b:12E4<b-this._autoTick&&(this._scene._controlOperation.showButton(!1),this._scene._guiManager.dirty(),this.reset()));this._currentTick=b};
MO.FEaiEarthSphere_reset=function(){this._targetDirection.set(0,1,0);this._matrix.transformPoint3(this._targetDirection,this._sourceDirection);this._sourceDirection.normalize();var a=this._rotationAxis;a.assign(this._sourceDirection);a.cross(this._targetDirection);a.normalize();this._rotationAngle=Math.acos(this._sourceDirection.dotPoint3(this._targetDirection));this.autoRotation(!0)};
MO.FEaiEarthSphere_autoRotation=function(a){a&&!this._optionRotation?(this._optionRotation=!0,this._currentRotation=0,this._socket.send("autoRotate=1")):!a&&this._optionRotation&&(this._optionRotation=!1,this._currentRotation=0,this._socket.send("autoRotate=0"))};MO.FEaiEarthSphere_sendRotation=function(){var a=this._matrix;this._scene._socketSphere.send("rotation="+a.rx+","+a.ry+","+a.rz)};
MO.FEaiEarthSphere_dispose=function(){this._sourceDirection=MO.Lang.Object.dispose(this._sourceDirection);this._currentDirection=MO.Lang.Object.dispose(this._currentDirection);this._targetDirection=MO.Lang.Object.dispose(this._targetDirection);this.__base.FE3dSphere.dispose.call(this)};
MO.FEaiCstInvestment3dCountryTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiCstInvestment3dCountryTable_onImageLoad;a.onPaintBegin=MO.FEaiCstInvestment3dCountryTable_onPaintBegin;a.construct=MO.FEaiCstInvestment3dCountryTable_construct;a.setup=MO.FEaiCstInvestment3dCountryTable_setup;
a.setUnits=MO.FEaiCstInvestment3dCountryTable_setUnits;a.dispose=MO.FEaiCstInvestment3dCountryTable_dispose;return a};MO.FEaiCstInvestment3dCountryTable_onImageLoad=function(){this.dirty()};
MO.FEaiCstInvestment3dCountryTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.left;var d=c.top,e=c.width;b.drawGridImage(this._backgroundImage,a,d,e,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u7406\u8d22\u5e08\u6570\u636e\u5c55\u793a\u4e2d\u5fc3");b.drawText("\u5168\u7403\u7406\u8d22\u5e08\u6570\u636e\u5c55\u793a\u4e2d\u5fc3",a+.5*(e-c),d+76,"#59FDE9");b.setFont(this._rowFontStyle)};
MO.FEaiCstInvestment3dCountryTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiCstInvestment3dCountryTable_setup=function(){(this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid2.png")).addLoadListener(this,this.onImageLoad);var a=this._gridControl=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!0);a.setLocation(50,120);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";
a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnText);b.setName("companyName");b.setLabel("\u516c\u53f8\u540d\u79f0");b.setDataName("companyName");b.setWidth(170);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerCount");b.setLabel("\u7406\u8d22\u5e08\u6570");b.setDataName("marketerCount");b.setTextAlign(MO.EUiAlign.Right);
b.setWidth(100);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("investment");b.setLabel("\u6295\u8d44\u603b\u989d(\u4e07)");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(140);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("redemption");b.setLabel("\u8d4e\u56de\u603b\u989d(\u4e07)");
b.setDataName("redemption");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(130);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("netinvestment");b.setLabel("\u51c0\u6295\u603b\u989d(\u4e07)");b.setDataName("netinvestment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(130);b.cellPadding().right=
15;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiCstInvestment3dCountryTable_setUnits=function(a){if(!a)return null;var b=MO.Console.find(MO.FEaiResourceConsole).departmentModule(),c=this._gridControl;c.clearRows();for(var d=a.count(),e=0;e<d;e++){var f=a.at(e),g=c.allocRow(),h=f.label(),k=b.findByFullLabel(h);k&&(h=k.label());g.set("companyName",h);g.set("marketerCount",f.marketerCount());g.set("investment",f.investment());g.set("redemption",f.redemption());g.set("netinvestment",f.netinvestment());c.pushRow(g)}};
MO.FEaiCstInvestment3dCountryTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCstInvestment3dInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._department2s=MO.Class.register(a,[new MO.AGetter("_department2s"),new MO.APersistence("_department2s",MO.EDataType.Objects,MO.FEaiCstInvestment3dInfoDepartment2)]);a._department4s=MO.Class.register(a,[new MO.AGetter("_department4s"),new MO.APersistence("_department4s",MO.EDataType.Objects,MO.FEaiCstInvestment3dInfoDepartment4)]);a._citys=MO.Class.register(a,[new MO.AGetter("_citys"),new MO.APersistence("_citys",
MO.EDataType.Objects,MO.FEaiCstInvestment3dInfoCity)]);return a};
MO.FEaiCstInvestment3dInfoCity=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.Uint32)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),
new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiCstInvestment3dInfoDepartment2=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._id=MO.Class.register(a,[new MO.AGetter("_id"),new MO.APersistence("_id",MO.EDataType.Uint32)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),
new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiCstInvestment3dInfoDepartment4=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._provinceCode=MO.Class.register(a,[new MO.AGetter("_provinceCode"),new MO.APersistence("_provinceCode",MO.EDataType.Uint16)]);a._id=MO.Class.register(a,[new MO.AGetter("_id"),new MO.APersistence("_id",MO.EDataType.Uint32)]);a._parentLabel=MO.Class.register(a,[new MO.AGetter("_parentLabel"),new MO.APersistence("_parentLabel",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),
new MO.APersistence("_label",MO.EDataType.String)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",
MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiCstInvestment3dLivePop=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._bgImage=null;a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._startTick=0;a._popDuration=500;a._showDuration=2E3;a._closeDuration=500;a._fullWidth=910;a._fullHeight=140;a._riseHeight=50;a._date=null;a.construct=MO.FEaiCstInvestment3dLivePop_construct;a.setup=MO.FEaiCstInvestment3dLivePop_setup;a.onPaintBegin=MO.FEaiCstInvestment3dLivePop_onPaintBegin;a.onImageLoad=MO.FEaiCstInvestment3dLivePop_onImageLoad;
a.show=MO.FEaiCstInvestment3dLivePop_show;a.dispose=MO.FEaiCstInvestment3dLivePop_dispose;return a};MO.FEaiCstInvestment3dLivePop_construct=function(){this.__base.FGuiControl.construct.call(this);this._date=new MO.TDate};
MO.FEaiCstInvestment3dLivePop_setup=function(){this.setWidth(this._fullWidth);this.setHeight(this._fullHeight);this.setLeft((MO.Eai.Canvas.logicSize().width-this._fullWidth)/3);this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight);this._bgImage=MO.Class.create(MO.FImage);this._bgImage.addLoadListener(this,this.onImageLoad);this._bgImage.loadUrl("{eai.resource}/invespop.png")};MO.FEaiCstInvestment3dLivePop_onImageLoad=function(){this.dirty()};
MO.FEaiCstInvestment3dLivePop_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);if(this._data){a=a.graphic;var b=this._clientRectangle,c=this._data,d=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(c.card()),e="";this._date.parse(c.date());e+=this._date.format("HH24:MI:SS");e+="    ";d&&(e+=d.data().label());e=e+"    "+(c.customer()+" - "+c.phone());e+="    ";e+=MO.Lang.Float.format(c.investment(),null,null,2,"0");a.setFont("36px Microsoft YaHei");popTextWidth=
a.textWidth(e);var c=MO.Timer.current()-this._startTick,d=c-this._popDuration,f=c-this._showDuration-this._popDuration,g=0;c<this._popDuration?(g=c/this._popDuration,a._handle.globalAlpha=g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight*(1-g)),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+g+")")):d<this._showDuration?(a.drawImage(this._bgImage,
b.left,b.top,this._fullWidth,this._fullHeight),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, 1)")):f<this._closeDuration?(g=f/this._closeDuration,a._handle.globalAlpha=1-g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2-this._riseHeight*g),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+(1-g)+")")):(this._data=null,this.setVisible(!1),
this.dirty())}};MO.FEaiCstInvestment3dLivePop_show=function(){o=this;o.setVisible(!0);o._startTick=MO.Timer.current();o.dirty()};MO.FEaiCstInvestment3dLivePop_dispose=function(){this._date=MO.Lang.Object.dispose(this._date);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCstInvestment3dLiveTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetSet("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._columnLabels=null;a._columnDefines=null;a._columnWidths=null;a._tableCount=0;a._entities=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,
new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiCstInvestment3dLiveTable_onImageLoad;a.onPaintBegin=MO.FEaiCstInvestment3dLiveTable_onPaintBegin;a.oeUpdate=MO.FEaiCstInvestment3dLiveTable_oeUpdate;a.construct=MO.FEaiCstInvestment3dLiveTable_construct;a.setup=MO.FEaiCstInvestment3dLiveTable_setup;a.pushEntity=MO.FEaiCstInvestment3dLiveTable_pushEntity;a.drawRow=MO.FEaiCstInvestment3dLiveTable_drawRow;a.dispose=MO.FEaiCstInvestment3dLiveTable_dispose;return a};
MO.FEaiCstInvestment3dLiveTable_onImageLoad=function(){this.dirty()};
MO.FEaiCstInvestment3dLiveTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left;a=c.top;for(var e=c.width,f=c.height,c=d+12,g=d+e-d,h=0,k=0;4>k;k++)h+=this._columnDefines[k];for(k=0;4>k;k++)this._columnWidths[k]=this._columnDefines[k]/h*g-7;b.drawGridImage(this._backgroundImage,d,a,e,f,this._backgroundPadding);b.setFont(this._headFontStyle);k=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",
d+.5*(e-k),a+76,"#59FDE9");b.setFont(this._rowFontStyle);f=a+this._rankStart;b.drawGridImage(this._rankLineImage,d+6,f+this._rankTitleStart,e-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(e-167),f+3,167,40);if(h=this._rank)for(d=h.count(),f+=90,k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!0,k,c,f+this._rankRowHeight*k,g);for(var d="",e=0,f=c,h=a+this._headStart,l=h+this._headTextTop,k=0;4>k;k++)d=this._columnLabels[k],e=b.textWidth(d),b.fillRectangle(f,h,this._columnWidths[k]-
4,this._headHeight,"#122A46"),b.drawText(d,f+.5*(this._columnWidths[k]-e-4),l,"#00B2F2"),f+=this._columnWidths[k];h=this._entities;if(!h.isEmpty())for(f=a+this._rowStart,b.clip(c,f,g-38,this._rowHeight*(this._tableCount-1)),f+=24,d=h.count(),k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!1,k,c,f+this._rowHeight*k+this._lineScroll,g)};
MO.FEaiCstInvestment3dLiveTable_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);a.isBefore()&&0>this._lineScroll&&(this._lineScroll+=1,this._lineScroll<-this._rowHeight&&(this._lineScroll=0),0<=this._lineScroll&&(a=this._entities,a.count()>this._tableCount&&a.pop(),this._lineScroll=0),this.dirty())};
MO.FEaiCstInvestment3dLiveTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._entities=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20);this._columnLabels=["\u65f6\u95f4","\u57ce\u5e02","\u7528\u6237-\u624b\u673a","\u6295\u8d44\u989d(\u5143)"];MO.Runtime.isPlatformMobile()?this._columnDefines=[130,130,180,186]:this._columnDefines=[110,110,160,166];this._columnWidths=[]};
MO.FEaiCstInvestment3dLiveTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);
b=this._rank1Image=a.load("{eai.resource}/live/1.png");b.addLoadListener(this,this.onImageLoad);b=this._rank2Image=a.load("{eai.resource}/live/2.png");b.addLoadListener(this,this.onImageLoad);b=this._rank3Image=a.load("{eai.resource}/live/3.png");b.addLoadListener(this,this.onImageLoad);this._headFontStyle="bold 36px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=
22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei",this._rowHeight=46):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="24px Microsoft YaHei",
this._rowStart=384,this._rowHeight=36)};MO.FEaiCstInvestment3dLiveTable_pushEntity=function(a){if(!a)return null;var b=this._entities;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};
MO.FEaiCstInvestment3dLiveTable_drawRow=function(a,b,c,d,e,f,g){var h=this._columnWidths;g=null;g=c?"#E5BD1D":"#59FDE9";if(c){var k=e+.5*h[0]-23,l=f-this._rankIconStart;0==d&&this._rank1Image.testReady()&&a.drawImage(this._rank1Image,k-6,l-28,58,65);1==d&&this._rank2Image.testReady()&&a.drawImage(this._rank2Image,k,l,46,37);2==d&&this._rank3Image.testReady()&&a.drawImage(this._rank3Image,k,l,46,37)}f+=this._rankTextStart;d=0;c||(this._currentDate.parse(b.date()),c=this._currentDate.format("HH24:MI:SS"),
d=a.textWidth(c),a.drawText(c,e+.5*h[0]-.5*d,f,g));e+=h[0];d=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b.card());c="";d&&(c=d.label());d=a.textWidth(c);a.drawText(c,e+.5*h[1]-.5*d,f,g);e+=h[1];c=b.customer()+" - "+b.phone();d=a.textWidth(c);a.drawText(c,e+.5*h[2]-.5*d,f,g);e+=h[2];b=MO.Lang.Float.format(b.investment(),null,null,2,"0");e=e+h[3]-15;7<b.length?(g=null,g=9<b.length?"#FDEF01":"#EB6C03",h=b.substring(0,b.length-7),b=b.substring(b.length-7,b.length),c=a.textWidth(h),
d=a.textWidth(b),a.drawText(h,e-d-c,f,g),a.drawText(b,e-d,f,"#59FDE9")):(d=a.textWidth(b),a.drawText(b,e-d,f,g))};MO.FEaiCstInvestment3dLiveTable_dispose=function(){this._entities=MO.Lang.Object.dispose(this._entities);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiCstInvestment3dProvinceTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._title=MO.Class.register(a,new MO.AGetSet("_title"),"\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868");a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiCstInvestment3dProvinceTable_onImageLoad;a.onPaintBegin=MO.FEaiCstInvestment3dProvinceTable_onPaintBegin;
a.construct=MO.FEaiCstInvestment3dProvinceTable_construct;a.setup=MO.FEaiCstInvestment3dProvinceTable_setup;a.setUnits=MO.FEaiCstInvestment3dProvinceTable_setUnits;a.dispose=MO.FEaiCstInvestment3dProvinceTable_dispose;return a};MO.FEaiCstInvestment3dProvinceTable_onImageLoad=function(){this.dirty()};
MO.FEaiCstInvestment3dProvinceTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.left;var d=c.top,e=c.width;b.drawGridImage(this._backgroundImage,a,d,e,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth(this._title);b.drawText(this._title,a+.5*(e-c),d+76,"#59FDE9");b.setFont(this._rowFontStyle)};
MO.FEaiCstInvestment3dProvinceTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiCstInvestment3dProvinceTable_setup=function(){(this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid2.png")).addLoadListener(this,this.onImageLoad);var a=this._gridControl=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!0);a.setLocation(50,120);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";
a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnText);b.setName("companyName");b.setLabel("\u7236\u516c\u53f8\u540d\u79f0");b.setDataName("companyName");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("branchName");b.setLabel("\u5b50\u516c\u53f8\u540d\u79f0");b.setDataName("branchName");b.setWidth(160);
b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerCount");b.setLabel("\u7406\u8d22\u5e08\u6570");b.setDataName("marketerCount");b.setTextAlign(MO.EUiAlign.Right);b.setWidth(90);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("investment");b.setLabel("\u6295\u8d44(\u4e07)");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("redemption");b.setLabel("\u8d4e\u56de(\u4e07)");b.setDataName("redemption");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("netinvestment");
b.setLabel("\u51c0\u6295(\u4e07)");b.setDataName("netinvestment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):
(this._tableCount=19,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiCstInvestment3dProvinceTable_setUnits=function(a){if(!a)return null;var b=MO.Console.find(MO.FEaiResourceConsole).departmentModule(),c=this._gridControl;c.clearRows();for(var d=Math.min(a.count(),40),e=0;e<d;e++){var f=a.at(e),g=c.allocRow(),h=f.parentLabel(),k=b.findByFullLabel(h);k&&(h=k.label());g.set("companyName",h);g.set("branchName",f.label());g.set("marketerCount",f.marketerCount());g.set("investment",f.investment());g.set("redemption",f.redemption());g.set("netinvestment",f.netinvestment());
c.pushRow(g)}};MO.FEaiCstInvestment3dProvinceTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCstInvestment3dScene=function(a){a=MO.Class.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomerInvestment3d;a._optionMapCity3d=!0;a._mapReady=!1;a._playing=!1;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._operationPoint=null;a._operationRotationX=0;a._operationRotationY=0;a._rotationX=0;a._rotationY=0;a._startRotateY=0;a._targetRotateY=0;a._translateY=0;a._startTranslateY=0;a._targetTranslateY=0;a._startTick=0;a._earthMoving=!1;a.__moveEarthDuration=
500;a._opMouseDown=!1;a._opMouseMoved=!1;a.__opMouseMoveThreshold=4;a._autoRotate=!0;a._showChina=!1;a._showingMktInfo=!1;a._countryTable=null;a._provinceTable=null;a._selectedProvinceCode=0;a._provinceUnits=null;a._countryUnits=null;a._worldScale=300;a._startWorldScale=500;a._targetWorldScale=500;a._cameraFrom=null;a._cameraTo=null;a._cameraDirection=null;a._ccDirection=null;a._facePosition=null;a._organizationDataTicker=null;a._organizationInfo=null;a.onOrganizationFetch=MO.FEaiCstInvestment3dScene_onOrganizationFetch;
a.onOperationDown=MO.FEaiCstInvestment3dScene_onOperationDown;a.onOperationMove=MO.FEaiCstInvestment3dScene_onOperationMove;a.onOperationUp=MO.FEaiCstInvestment3dScene_onOperationUp;a.onOperationWheel=MO.FEaiCstInvestment3dScene_onOperationWheel;a.onOperationVisibility=MO.FEaiCstInvestment3dScene_onOperationVisibility;a.onProcessReady=MO.FEaiCstInvestment3dScene_onProcessReady;a.onProcess=MO.FEaiCstInvestment3dScene_onProcess;a.onSwitchProcess=MO.FEaiCstInvestment3dScene_onSwitchProcess;a.onSwitchComplete=
MO.FEaiCstInvestment3dScene_onSwitchComplete;a.construct=MO.FEaiCstInvestment3dScene_construct;a.setup=MO.FEaiCstInvestment3dScene_setup;a.showFace=MO.FEaiCstInvestment3dScene_showFace;a.fixMatrix=MO.FEaiCstInvestment3dScene_fixMatrix;a.processResize=MO.FEaiCstInvestment3dScene_processResize;return a};
MO.FEaiCstInvestment3dScene_onOrganizationFetch=function(a){var b=this._organizationInfo;b.unserializeSignBuffer(a.sign,a.content,!0);this._countryTable.setUnits(b._department2s);var c=this._countryUnits,d=b._department4s;c.clear();for(a=0;20>a;a++)c.push(d.at(a));c=MO.Console.find(MO.FEaiEntityConsole).cityModule();b=b.citys();d=b.count();for(a=0;a<d;a++){var e=b.at(a),f=e.card();(f=c.findByCard(f))&&f.update(e)}};
MO.FEaiCstInvestment3dScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiCstInvestment3dScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showWorld();var a=this._countryEntity;a.start();this._mapEntity.showCountry(a);this._mapEntity.showCity()};
MO.FEaiCstInvestment3dScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),this.processLoaded(),this._statusStart=this._playing=!0)}this._playing&&(this._mapReady||(this._guiManager.show(),this._southSea.setVisible(!1),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0),this._organizationDataTicker.process()&&MO.Console.find(MO.FEaiLogicConsole).statistics().department().doOrganization(this,this.onOrganizationFetch,
2),a=this._mapEntity,this.fixMatrix(a.cityRangeRenderable().matrix()),this.fixMatrix(a.cityCenterRenderable().matrix()),this.fixMatrix(a.countryFaceDisplay().matrix()),this.fixMatrix(a.countryBorderDisplay().matrix()),a.process())};MO.FEaiCstInvestment3dScene_onOperationDown=function(a){this._opMouseDown=!0;this._showingMktInfo||(this._operationRotationX=this._rotationX,this._operationRotationY=this._rotationY,this._operationPoint.set(a.x,a.y))};
MO.FEaiCstInvestment3dScene_onOperationMove=function(a){if(this._opMouseDown){var b=a.x-this._operationPoint.x;Math.abs(b)>this.__opMouseMoveThreshold&&(this._autoRotate=!1,this._operationMoved=!0,b=a.x-this._operationPoint.x,this._rotationY=this._operationRotationY-.002*b)}};
MO.FEaiCstInvestment3dScene_onOperationUp=function(a){this._opMouseDown=!1;if(this._showingMktInfo){this._showingMktInfo=!1;var b=document.getElementById("id_marketer_info");b.style.display="none"}else{if(!this._operationMoved){var c=this.application().desktop().canvas3d(),b=this.activeStage().region();b.camera();var d=MO.Console.find(MO.FG3dTechniqueConsole).find(c,MO.FG3dSelectTechnique).test(b,a.offsetX,a.offsetY);if(d){if(a=MO.Console.find(MO.FG3dTechniqueConsole).find(c,MO.FEaiSelectTechnique).test(b,
d,a.offsetX,a.offsetY)){this._startTranslateY=this._translateY;this._startRotateY=this._rotationY;this._startWorldScale=this._worldScale;a=a._shape._entity;if(MO.Class.isClass(a,MO.FEaiCountry3dEntity))this._targetWorldScale=1200,"China"==a.code()?this._showChina=!0:(this._countryEntity._borderShape.setVisible(!1),this._countryEntity._faceShape.setVisible(!1),b=this._provinceTable,b.setTitle("\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868"),b.setUnits(this._countryUnits),b.dirty(),b.setVisible(!1),
this._countryTable.setVisible(!0));else if(MO.Class.isClass(a,MO.FEaiProvince3dEntity)){this._targetWorldScale=3E3;d=a.resource();c=d.code();c==this._selectedProvinceCode?(b=document.getElementById("id_marketer_info"),b.style.display="",this._showingMktInfo=!0):this._selectedProvinceCode=c;b=this._provinceTable;b.setTitle(d.label()+"\u5730\u533a\u5206\u516c\u53f8\u5217\u8868");var d=this._organizationInfo._department4s,e=d.count(),f=this._provinceUnits;f.clear();for(var g=0;g<e;g++){var h=d.at(g);
if(h.provinceCode()==c&&(f.push(h),26<f.count()))break}b.setUnits(f);b.dirty()}a=a.outline2();this._targetRotateY=Math.PI-a.center.x/180*Math.PI;this._targetTranslateY=a.center.y/90*-this._targetWorldScale*1.5;this._startTick=MO.Timer.current();this._earthMoving=!0;this._autoRotate=!1}}else this._startTranslateY=this._translateY,this._startRotateY=this._rotationY%(2*Math.PI),this._startWorldScale=this._worldScale,this._targetTranslateY=0,this._targetRotateY=this._rotationY,this._targetWorldScale=
500,this._startTick=MO.Timer.current(),this._autoRotate=this._earthMoving=!0,this._countryEntity._borderShape.setVisible(!1),this._countryEntity._faceShape.setVisible(!1),b=this._provinceTable,b.setTitle("\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868"),b.setUnits(this._countryUnits),b.dirty(),b.setVisible(!1),this._countryTable.setVisible(!0)}this._operationMoved=!1}};MO.FEaiCstInvestment3dScene_onOperationWheel=function(a){a=a.deltaY;0<a?this._worldScale/=1.05:0>a&&(this._worldScale*=1.05)};
MO.FEaiCstInvestment3dScene_onSwitchProcess=function(a){};MO.FEaiCstInvestment3dScene_onSwitchComplete=function(a){};
MO.FEaiCstInvestment3dScene_construct=function(){this.__base.FEaiChartScene.construct.call(this);this._operationPoint=new MO.SPoint2;this._organizationDataTicker=new MO.TTicker(6E4);this._organizationInfo=MO.Class.create(MO.FEaiCstInvestment3dInfo);this._cameraFrom=new MO.SPoint3;this._cameraTo=new MO.SPoint3;this._ccDirection=new MO.SVector3;this._facePosition=new MO.SPoint3;this._provinceUnits=new MO.TObjects;this._countryUnits=new MO.TObjects};
MO.FEaiCstInvestment3dScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);this._activeStage.dataLayer();var a=this._countryTable=MO.Class.create(MO.FEaiCstInvestment3dCountryTable);a.setName("countryTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._provinceTable=MO.Class.create(MO.FEaiCstInvestment3dProvinceTable);a.setName("provinceTable");a.linkGraphicContext(this);a.setup();a.build();a.setVisible(!1);this._guiManager.register(a);this._guiManager.hide();
a=MO.Class.create(MO.FE3dOrthoCamera);a.position().set(0,0,-5E3);a.lookAt(0,0,0);a.update();var b=a.projection();b.setZnear(1);b.setZfar(1E4);b.update();this._activeStage.region().selectCamera(a);a=MO.Console.find(MO.FEaiEntityConsole);b=this._worldEntity=a.mapModule().loadWorld(this);this._readyLoader.push(b);a.cityModule().build(this,MO.FEaiCity3dEntity);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry,MO.FEaiCountry3dEntity);a._borderShape.setVisible(!1);a._faceShape.setVisible(!1);
this._readyLoader.push(a)};MO.FEaiCstInvestment3dScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this.processResize()};
MO.FEaiCstInvestment3dScene_fixMatrix=function(a){var b=MO.Window.Browser.isOrientationVertical();if(this._earthMoving){var c=(MO.Timer.current()-this._startTick)/this.__moveEarthDuration;1<c&&(c=1,this._earthMoving=!1,this._showChina&&(this._countryEntity._borderShape.setVisible(!0),this._countryEntity._faceShape.setVisible(!0),this._provinceTable.setVisible(!0),this._countryTable.setVisible(!1),this._provinceTable.dirty(),this._showChina=!1));this._translateY=this._startTranslateY+(this._targetTranslateY-
this._startTranslateY)*c;this._rotationY=this._startRotateY+(this._targetRotateY-this._startRotateY)*c;this._worldScale=this._startWorldScale+(this._targetWorldScale-this._startWorldScale)*c}b?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-320,a.ty=this._translateY,a.tz=0,a.rx=this._rotationX,a.ry=this._rotationY,a.setScale(this._worldScale,this._worldScale,this._worldScale));a.update();this._autoRotate&&(this._rotationY+=.001)};
MO.FEaiCstInvestment3dScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical(),b=this._countryTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),
b.setWidth(750));b=this._provinceTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.All),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(750))};
with(MO)MO.FEaiCstInvestment3dTimeline=function(a){a=MO.Class.inherits(this,a,FGuiControl);a._startTime=MO.Class.register(a,new AGetSet("_startTime"));a._endTime=MO.Class.register(a,new AGetSet("_endTime"));a._data=null;a._ready=!1;a._investmentTotal=0;a._intervalMiniute=10;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new AGetSet("_triangleHeight"),
12);a._decoLineGap=MO.Class.register(a,new AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new AGetSet("_decoLineWidth"),30);a.oeUpdate=FEaiCstInvestment3dTimeline_oeUpdate;a.construct=FEaiCstInvestment3dTimeline_construct;a.sync=FEaiCstInvestment3dTimeline_sync;a.onPaintBegin=FEaiCstInvestment3dTimeline_onPaintBegin;a.on24HDataFetch=FEaiCstInvestment3dTimeline_on24HDataFetch;return a},MO.FEaiCstInvestment3dTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);
this._startTime=new TDate;this._endTime=new TDate},MO.FEaiCstInvestment3dTimeline_sync=function(){if(this._ready){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute(this._intervalMiniute);var b=this._startTime;b.assign(a);b.addDay(-1);this._endTime.assign(a)}}},MO.FEaiCstInvestment3dTimeline_on24HDataFetch=function(a){this._investmentTotal=0;if(a=this._data=a.content.collection)for(var b=a.length,c=0;c<b;c++)this._investmentTotal+=parseFloat(a[c].investment);
this.dirty()},MO.FEaiCstInvestment3dTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0,this.sync()),MO.EEventStatus.Stop},MO.FEaiCstInvestment3dTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();
b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),k=c-g-this.decoLineWidth(),g=d+60,l=e-30,n=l-g;b.drawLine(h,f,k,f,"#F8CB3D",
3);for(var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;!e.isAfter(m);){var t=e.date.getTime()-c,t=h+t/u*(k-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",1);p=e.format("HH24:00");e.addHour(1);if(r=!r)b.setFont("bold 20px Microsoft YaHei"),q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}e.date.setTime(c);e.refresh();if((q=this._data)&&!(1>q.length)){for(f=r=0;f<q.length;f++)m=parseInt(q[f].investment),m>r&&(r=m);p=1E4*n/r;m=parseInt(q[0].investment);
n=l-m/1E4*p;m=b._handle;m.lineCap="round";m.beginPath();m.moveTo(h,n);r=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(EEaiRate.Investment);for(f=1;f<q.length;f++){e.parseAuto(q[f].date);e.refresh();var t=e.date.getTime()-c,t=h+t/u*(k-h),v=l-q[f].investment/1E4*p,v=v-this._baseHeight;m.lineTo(t,v)}p=MO.Lang.Hex.format(r.findRate(0));u="#"+p.substring(2);k="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";
p=MO.Lang.Hex.format(r.findRate(1));f="#"+p.substring(2);r="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";p=b.createLinearGradient(0,l,0,g);p.addColorStop("0",u);p.addColorStop("1",f);g=b.createLinearGradient(0,l,0,g);g.addColorStop("0",k);g.addColorStop("1",r);m.strokeStyle=p;m.fillStyle=g;m.lineWidth=4;m.stroke();m.lineTo(t,l);m.lineTo(h,l);m.lineTo(h,n);m.fill();e.date.setTime(c);e.refresh();t=-1;h=g=0;e.parseAuto(q[0].date);
e.refresh();t=e.date.getHours();for(f=0;f<q.length;f++)e.parseAuto(q[f].date),e.refresh(),l=e.date.getHours(),t==l?g+=parseInt(q[f].investment):(g>h&&(h=g,g=0),t=l);b.setFont("bold 24px Microsoft YaHei");b.drawText("24\u5c0f\u65f6\u6295\u8d44\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u5c0f\u65f6\u5cf0\u503c\uff1a");h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");t=b.textWidth(h);g=MO.Lang.Float.unitFormat(this._investmentTotal,0,0,2,0,1E4,"\u4e07");l=b.textWidth(g);
k=MO.Lang.Float.unitFormat(this._investmentTotal/24,0,0,2,0,1E4,"\u4e07");u=b.textWidth(k);f=Math.max(Math.max(t,l),u);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+f-l,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+f-t,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(k,a+q+f-u,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartMktCustomerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,
new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,
new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=
null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartMktCustomerProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiChartMktCustomerProcessor_on24HDataFetch;a.construct=MO.FEaiChartMktCustomerProcessor_construct;
a.allocUnit=MO.FEaiChartMktCustomerProcessor_allocUnit;a.allocShape=MO.FEaiChartMktCustomerProcessor_allocShape;a.setup=MO.FEaiChartMktCustomerProcessor_setup;a.calculateCurrent=MO.FEaiChartMktCustomerProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartMktCustomerProcessor_focusEntity;a.process=MO.FEaiChartMktCustomerProcessor_process;a.dispose=MO.FEaiChartMktCustomerProcessor_dispose;return a};
MO.FEaiChartMktCustomerProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiChartMktCustomerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartMktCustomerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this)};MO.FEaiChartMktCustomerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};MO.FEaiChartMktCustomerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartMktCustomerProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiChartMktCustomerProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);null!=this._mapEntity&&this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=
this._rankUnits;b.unit=a;this.processDataChangedListener(b)};
MO.FEaiChartMktCustomerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);c=
this._24HBeginDate;c.assign(a);c.truncMinute(15);c.addDay(-1);d=this._24HEndDate;d.assign(a);d.truncMinute(15);b.marketer().doCustomerTrend(this,this.on24HDataFetch,c.format(),d.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);null!=this._mapEntity&&this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=
this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};MO.FEaiChartMktCustomerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartMktCustomerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartMktCustomerScene_onOperationDown;a.onInvestmentDataChanged=MO.FEaiChartMktCustomerScene_onInvestmentDataChanged;
a.on24HDataChanged=MO.FEaiChartMktCustomerScene_on24HDataChanged;a.onOperationVisibility=MO.FEaiChartMktCustomerScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartMktCustomerScene_onProcessReady;a.onProcess=MO.FEaiChartMktCustomerScene_onProcess;a.onSwitchProcess=MO.FEaiChartMktCustomerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartMktCustomerScene_onSwitchComplete;a.setup=MO.FEaiChartMktCustomerScene_setup;a.showFace=MO.FEaiChartMktCustomerScene_showFace;a.fixMatrix=MO.FEaiChartMktCustomerScene_fixMatrix;
a.processResize=MO.FEaiChartMktCustomerScene_processResize;return a};MO.FEaiChartMktCustomerScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartMktCustomerScene_on24HDataChanged=function(a){var b=this._timeline;b.startTime().assign(a.beginDate);b.endTime().assign(a.endDate);b.trendInfo().unserializeSignBuffer(a.sign,a.content,!0);b.dirty()};
MO.FEaiChartMktCustomerScene_onInvestmentDataChanged=function(a){var b=a.unit,c=this._liveTable;c.setRankUnits(a.rankUnits);c.pushUnit(b);c.dirty()};MO.FEaiChartMktCustomerScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};
MO.FEaiChartMktCustomerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartMktCustomerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=this._processor;
0<b.invementDayCurrent()&&(a.findComponent("investmentTotal").setValue(parseInt(b.invementTotalCurrent()).toString()),a.findComponent("investmentDay").setValue(parseInt(b.invementDayCurrent()).toString()));this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};MO.FEaiChartMktCustomerScene_onSwitchProcess=function(a){};
MO.FEaiChartMktCustomerScene_onSwitchComplete=function(a){};
MO.FEaiChartMktCustomerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.customer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartMktCustomerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b.add24HDataChangedListener(this,this.on24HDataChanged);b=
b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=MO.Class.create(MO.FEaiChartMktCustomerTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FEaiChartMktCustomerTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,
MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiChartMktCustomerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartMktCustomerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartMktCustomerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical(),b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(80)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(280));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),
b.setLeft(10),b.setRight(10),b.setBottom(920),b.setHeight(250)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(10),b.setRight(780),b.setHeight(300));b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),b.setBottom(10),
b.setWidth(760));this.fixMatrix(this._processor.display().matrix())};
MO.FEaiChartMktCustomerTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiChartMktCustomerTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktCustomerTable_onPaintBegin;a.construct=MO.FEaiChartMktCustomerTable_construct;a.setup=MO.FEaiChartMktCustomerTable_setup;a.setRankUnits=MO.FEaiChartMktCustomerTable_setRankUnits;a.pushUnit=MO.FEaiChartMktCustomerTable_pushUnit;a.drawRow=MO.FEaiChartMktCustomerTable_drawRow;a.dispose=MO.FEaiChartMktCustomerTable_dispose;return a};MO.FEaiChartMktCustomerTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktCustomerTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",d+.5*(f-
c),e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;b.drawGridImage(this._rankLineImage,d+6,e+this._rankTitleStart,f-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(f-167),e+3,198,40);if(this._rank)for(d=rankUnit.count(),e+=90,f=0;f<d;f++)c=rankUnit.at(f),this.drawRow(b,c,!0,f,a,e+this._rankRowHeight*f,g)};
MO.FEaiChartMktCustomerTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartMktCustomerTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);
a=this._gridRank=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!1);a.setDisplayHead(!1);a.setLocation(50,170);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(40);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");
b.setLabel();b.setDataName("image");b.setWidth(110);b.setPadding(1,1,1,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customer_city");b.setLabel("");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("label_phone");b.setLabel("");b.setDataName("label_phone");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");
b.setLabel("");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,332);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setTop(332);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);
a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");
b.setDataName("customer_city");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAmount");b.setLabel("\u6295\u8d44\u989d");b.setDataName("investment_amount");b.cellPadding().right=10;b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("modelLabel");b.setLabel("\u6295\u8d44\u4ea7\u54c1");b.setDataName("model_label");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentGain");b.setLabel("\u5e74\u5316\u6536\u76ca");b.setDataName("investment_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");
b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("bankGain");b.setLabel("\u94f6\u884c\u6536\u76ca");b.setDataName("bank_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,
this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=
51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartMktCustomerTable_setRankUnits=function(a){var b=this._gridRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.card(),g=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(g),h="";g&&(h=g.label());f.set("image","{eai.resource}/live/"+(d+1)+".png");f.set("customer_city",h);f.set("label_phone",e.label()+" - "+e.phone());f.set("investment",e.investment());b.pushRow(f)}};
MO.FEaiChartMktCustomerTable_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("model_label",a.modelLabel());d.set("investment_amount",a.investment());d.set("investment_gain",a.gain());d.set("bank_gain",a.bankGain());c.insertRow(d);b=this._units;b.unshift(a);
this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiChartMktCustomerTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktCustomerTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,
new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartMktCustomerTimeline_oeUpdate;a.construct=MO.FEaiChartMktCustomerTimeline_construct;a.sync=MO.FEaiChartMktCustomerTimeline_sync;a.drawTrend=MO.FEaiChartMktCustomerTimeline_drawTrend;a.onPaintBegin=MO.FEaiChartMktCustomerTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiChartMktCustomerTimeline_on24HDataFetch;
return a};MO.FEaiChartMktCustomerTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiLogicInfoCustomerTrend)};MO.FEaiChartMktCustomerTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartMktCustomerTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){n=this._startTime;m=this._trendInfo.units();var u=m.count(),p=m.first(),r=a._handle;r.lineCap="round";var q=1E4*g/l;g=f-p[b]/1E4*q;r.beginPath();r.moveTo(c,g);l=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(p=1;p<u;p++){var t=m.get(p),v=t[b];n.parseAuto(t.recordDate());n.refresh();t=n.date.getTime()-h;t=c+t/k*(e-c);v=f-v/1E4*q;v-=this._baseHeight;r.lineTo(t,v)}e=MO.Lang.Hex.format(l.findRate(0));
n="#"+e.substring(2);b="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";e=MO.Lang.Hex.format(l.findRate(1));m="#"+e.substring(2);e="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";h=a.createLinearGradient(0,f,0,d);h.addColorStop("0",n);h.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",b);a.addColorStop("1",e);
r.strokeStyle=h;r.lineWidth=4;r.stroke();r.fillStyle=a;r.lineTo(t,f);r.lineTo(c,f);r.lineTo(c,g);r.fill()};
MO.FEaiChartMktCustomerTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-50;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+90,l=e-50,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",3);var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;for(b.setFont("bold 20px Microsoft YaHei");!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",
1);p=e.format("HH24:MI");e.addHour(1);e.truncHour();if(r=!r)q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}b.drawLine(g,f-this.degreeLineHeight(),g,f,"#FFFFFF",1);m=m.format("HH24:MI");m!=p&&(q=b.textWidth(m),b.drawText(m,g-q/2,f+40,"#59FDE9"));e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f.units())&&!q.isEmpty()){var r=q.first(),v=0;p=q.count();for(m=0;m<p;m++)t=q.get(m),t=t.investment(),t>v&&(v=t);this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");g=-1;h=k=0;e.parseAuto(r.recordDate());
e.refresh();g=e.date.getHours();for(m=0;m<p;m++)t=q.get(m),e.parseAuto(t.recordDate()),e.refresh(),l=e.date.getHours(),g==l?k+=t.investment():(k>h&&(h=k,k=0),g=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d+30,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=60;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");g=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");k=b.textWidth(g);h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");l=b.textWidth(h);f=MO.Lang.Float.unitFormat(f.investmentTotal()/
24,0,0,2,0,1E4,"\u4e07");n=b.textWidth(f);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+k-k,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+k-l,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(f,a+q+k-n,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartMktMarketerDynamicInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentCount=MO.Class.register(a,[new MO.AGetter("_investmentCount"),new MO.APersistence("_investmentCount",MO.EDataType.Double)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Int32)]);
a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);a._rankDayUnits=MO.Class.register(a,[new MO.AGetter("_rankDayUnits"),new MO.APersistence("_rankDayUnits",MO.EDataType.Objects,MO.FEaiChartMktMarketerDynamicRankUnit)]);a._rankWeekUnits=MO.Class.register(a,[new MO.AGetter("_rankWeekUnits"),new MO.APersistence("_rankWeekUnits",MO.EDataType.Objects,MO.FEaiChartMktMarketerDynamicRankUnit)]);a._rankMonthUnits=MO.Class.register(a,
[new MO.AGetter("_rankMonthUnits"),new MO.APersistence("_rankMonthUnits",MO.EDataType.Objects,MO.FEaiChartMktMarketerDynamicRankUnit)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartMktMarketerDynamicUnit)]);return a};
MO.FEaiChartMktMarketerDynamicRankUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._departmentLabel=MO.Class.register(a,[new MO.AGetter("_departmentLabel"),new MO.APersistence("_departmentLabel",MO.EDataType.String)]);a._marketerLabel=MO.Class.register(a,[new MO.AGetter("_marketerLabel"),new MO.APersistence("_marketerLabel",MO.EDataType.String)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);
a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Int32)]);a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);return a};
MO.FEaiChartMktMarketerDynamicUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._departmentLabel=MO.Class.register(a,[new MO.AGetter("_departmentLabel"),new MO.APersistence("_departmentLabel",MO.EDataType.String)]);a._marketerLabel=MO.Class.register(a,[new MO.AGetter("_marketerLabel"),new MO.APersistence("_marketerLabel",MO.EDataType.String)]);a._customerLabel=
MO.Class.register(a,[new MO.AGetter("_customerLabel"),new MO.APersistence("_customerLabel",MO.EDataType.String)]);a._customerCard=MO.Class.register(a,[new MO.AGetter("_customerCard"),new MO.APersistence("_customerCard",MO.EDataType.String)]);a._customerPhone=MO.Class.register(a,[new MO.AGetter("_customerPhone"),new MO.APersistence("_customerPhone",MO.EDataType.String)]);a._customerActionCd=MO.Class.register(a,[new MO.AGetter("_customerActionCd"),new MO.APersistence("_customerActionCd",MO.EDataType.Uint8)]);
a._customerActionAmount=MO.Class.register(a,[new MO.AGetter("_customerActionAmount"),new MO.APersistence("_customerActionAmount",MO.EDataType.Double)]);a._customerActionInterest=MO.Class.register(a,[new MO.AGetter("_customerActionInterest"),new MO.APersistence("_customerActionInterest",MO.EDataType.Double)]);return a};
MO.FEaiChartMktMarketerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,
new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._investmentTotal=MO.Class.register(a,new MO.AGetter("_investmentTotal"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=
MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged",
"24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartMktMarketerProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiChartMktMarketerProcessor_on24HDataFetch;a.construct=MO.FEaiChartMktMarketerProcessor_construct;a.allocUnit=MO.FEaiChartMktMarketerProcessor_allocUnit;a.allocShape=MO.FEaiChartMktMarketerProcessor_allocShape;a.setup=MO.FEaiChartMktMarketerProcessor_setup;a.calculateCurrent=MO.FEaiChartMktMarketerProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartMktMarketerProcessor_focusEntity;a.process=
MO.FEaiChartMktMarketerProcessor_process;a.dispose=MO.FEaiChartMktMarketerProcessor_dispose;return a};MO.FEaiChartMktMarketerProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiChartMktMarketerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankDayUnits());var c=this._units;c.append(b.units());this._tableInterval=(c=c.count())?6E4*this._intervalMinute/c:6E4*this._intervalMinute;this._tableTick=0;c=this._eventDataChanged;c.rankUnits=a;c.rankDayUnits=b._rankDayUnits;c.rankWeekUnits=b._rankWeekUnits;c.rankMonthUnits=b._rankMonthUnits;c.unit=null;this.processDataChangedListener(c)};
MO.FEaiChartMktMarketerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiChartMktMarketerDynamicInfo);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this)};MO.FEaiChartMktMarketerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktMarketerDynamicUnit));return a};MO.FEaiChartMktMarketerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartMktMarketerProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++){var f=c.at(e),g=f.customerActionCd(),f=f.customerActionAmount();1==g&&(b-=f,a-=f)}this._investmentTotal=a;this._invementDayCurrent=b};
MO.FEaiChartMktMarketerProcessor_focusEntity=function(a){if(1==a.customerActionCd()){var b=a.customerCard();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.customerActionAmount(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}}b=this._eventDataChanged;
b.rankUnits=this._rankUnits;b.unit=a;this.processDataChangedListener(b)};
MO.FEaiChartMktMarketerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doMarketerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);c=
this._24HBeginDate;c.assign(a);c.truncMinute(15);c.addDay(-1);d=this._24HEndDate;d.assign(a);d.truncMinute(15);b.marketer().doMarketerTrend(this,this.on24HDataFetch,c.format(),d.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();
a._investmentPoolFreeCount=this._unitPool.frees().count()}};MO.FEaiChartMktMarketerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartMktMarketerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartMarketerMarketer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartMktMarketerScene_onOperationDown;a.onInvestmentDataChanged=MO.FEaiChartMktMarketerScene_onInvestmentDataChanged;
a.on24HDataChanged=MO.FEaiChartMktMarketerScene_on24HDataChanged;a.onOperationVisibility=MO.FEaiChartMktMarketerScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartMktMarketerScene_onProcessReady;a.onProcess=MO.FEaiChartMktMarketerScene_onProcess;a.onSwitchProcess=MO.FEaiChartMktMarketerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartMktMarketerScene_onSwitchComplete;a.setup=MO.FEaiChartMktMarketerScene_setup;a.showFace=MO.FEaiChartMktMarketerScene_showFace;a.fixMatrix=MO.FEaiChartMktMarketerScene_fixMatrix;
a.processResize=MO.FEaiChartMktMarketerScene_processResize;return a};MO.FEaiChartMktMarketerScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartMktMarketerScene_on24HDataChanged=function(a){var b=this._timeline;b.startTime().assign(a.beginDate);b.endTime().assign(a.endDate);b.trendInfo().unserializeSignBuffer(a.sign,a.content,!0);b.dirty()};
MO.FEaiChartMktMarketerScene_onInvestmentDataChanged=function(a){var b=a.unit,c=this._liveTable;c.setRankDayUnits(a.rankDayUnits);c.setRankWeekUnits(a.rankWeekUnits);c.setRankMonthUnits(a.rankMonthUnits);c.pushUnit(b);c.dirty()};
MO.FEaiChartMktMarketerScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartMktMarketerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartMktMarketerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=this._processor;
0<b.invementDayCurrent()&&(a.findComponent("investmentTotalCount").setValue(parseInt(b.investmentTotal()).toString()),a.findComponent("investmentTotal").setValue(parseInt(b.invementDayCurrent()).toString()));this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};MO.FEaiChartMktMarketerScene_onSwitchProcess=function(a){};
MO.FEaiChartMktMarketerScene_onSwitchComplete=function(a){};
MO.FEaiChartMktMarketerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.marketer-marketer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartMktMarketerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b.add24HDataChangedListener(this,this.on24HDataChanged);
b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=MO.Class.create(MO.FEaiChartMktMarketerTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FEaiChartMktMarketerTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,
MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiChartMktMarketerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartMktMarketerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.8,a.ty=-11,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartMktMarketerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(260));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(780));b.setHeight(250);b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.All),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),
b.setBottom(10),b.setWidth(750))};
MO.FEaiChartMktMarketerTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineMonthImage=null;a._rankLineWeeksImage=null;a._rankLineDayImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._dayImage=null;a._weeksImage=null;a._monthImage=null;a._tableCount=
0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartMktMarketerTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktMarketerTable_onPaintBegin;a.construct=MO.FEaiChartMktMarketerTable_construct;a.setup=MO.FEaiChartMktMarketerTable_setup;a.pushUnit=MO.FEaiChartMktMarketerTable_pushUnit;a.setRankDayUnits=MO.FEaiChartMktMarketerTable_setRankDayUnits;a.setRankWeekUnits=MO.FEaiChartMktMarketerTable_setRankWeekUnits;
a.setRankMonthUnits=MO.FEaiChartMktMarketerTable_setRankMonthUnits;a.drawRow=MO.FEaiChartMktMarketerTable_drawRow;a.dispose=MO.FEaiChartMktMarketerTable_dispose;return a};MO.FEaiChartMktMarketerTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktMarketerTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u7406\u8d22\u5e08\u4e1a\u7ee9\u5c55\u793a\u4e2d\u5fc3");b.drawText("\u7406\u8d22\u5e08\u4e1a\u7ee9\u5c55\u793a\u4e2d\u5fc3",d+.5*(f-c),e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;
d+=6;b.drawGridImage(this._rankLineMonthImage,d,e+this._rankTitleStart,f-22,this._rankWeeksHeight,this._rankLinePadding);b.drawGridImage(this._rankLineWeeksImage,d,e+this._rankTitleStart+174,f-22,139,this._rankLinePadding);b.drawGridImage(this._rankLineDayImage,d,e+this._rankTitleStart+175+139,f-22,137,this._rankLinePadding);b.drawImage(this._dayImage,d,e+44,56,130);b.drawImage(this._weeksImage,d,e+177,56,137);b.drawImage(this._monthImage,d,e+317,56,130);if(this._rank)for(f=rankUnit.count(),e+=90,
d=0;d<f;d++)c=rankUnit.at(d),this.drawRow(b,c,!0,d,a,e+this._rankRowHeight*d,g)};MO.FEaiChartMktMarketerTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartMktMarketerTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/marketer/right.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/marketer/title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineMonthImage=a.load("{eai.resource}/marketer/rank2.png");b.addLoadListener(this,this.onImageLoad);
b=this._rankLineWeeksImage=a.load("{eai.resource}/marketer/rank3.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineDayImage=a.load("{eai.resource}/marketer/rank4.png");b.addLoadListener(this,this.onImageLoad);b=this._rank1Image=a.load("{eai.resource}/live/1.png");b.addLoadListener(this,this.onImageLoad);b=this._rank2Image=a.load("{eai.resource}/live/2.png");b.addLoadListener(this,this.onImageLoad);b=this._rank3Image=a.load("{eai.resource}/live/3.png");b.addLoadListener(this,this.onImageLoad);
b=this._dayImage=a.load("{eai.resource}/marketer/day.png");b.addLoadListener(this,this.onImageLoad);b=this._weeksImage=a.load("{eai.resource}/marketer/weeks.png");b.addLoadListener(this,this.onImageLoad);b=this._monthImage=a.load("{eai.resource}/marketer/month.png");b.addLoadListener(this,this.onImageLoad);a=this._gridMonthRank=MO.Class.create(MO.FGuiGridControl);a.setLocation(50,112);a.setSize(800,200);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);
a.headPadding().set(0,0,0,10);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");b.setLabel();b.setDataName("month_images");b.setWidth(40);
b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthDepartmentLabel");b.setLabel("\u516c\u53f8");b.setDataName("month_department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthMarketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("month_marketer_label");b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);
b.setName("monthInvestmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("month_investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthCustomerCount");b.setLabel("\u5ba2\u6237\u6570");b.setDataName("month_customer_count");b.setWidth(80);b.setPadding(1,1,0,1);a.pushColumn(b);this.push(a);
a=this._gridWeeksRank=MO.Class.create(MO.FGuiGridControl);a.setDisplayHead(!1);a.setLocation(50,290);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");
b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("weeksRank");b.setLabel();b.setDataName("weeks_images");b.setWidth(40);b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("weeksDepartmentLabel");b.setLabel("\u516c\u53f8");b.setDataName("weeks_department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);
b.setName("weeksMarketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("weeks_marketer_label");b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("weeksInvestmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("weeks_investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);
b.setName("weeksCustomerCount");b.setLabel("\u5ba2\u6237\u6570");b.setDataName("weeks_customer_count");b.setWidth(80);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridDayRank=MO.Class.create(MO.FGuiGridControl);a.setDisplayHead(!1);a.setLocation(50,430);a.setSize(800,130);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";
a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");b.setLabel();b.setDataName("images");b.setWidth(40);b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("departmentLabel");b.setLabel("\u516c\u53f8");
b.setDataName("department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("marketer_label");b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");
b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCount");b.setLabel("\u5ba2\u6237\u6570");b.setDataName("customer_count");b.setWidth(80);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setLocation(50,570);a.setSize(800,430);a.setPadding(0,0,0,10);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);
a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(30);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(110);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("departmentLabel");
b.setLabel("\u516c\u53f8");b.setDataName("department_label");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("marketer_label");b.setWidth(110);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCard");b.setLabel("\u57ce\u5e02");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);
b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("customerAmount");b.setLabel("\u6295\u8d44\u989d(\u5143)");b.setDataName("customer_amount");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);
this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=5,this._rankHeight=174,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankWeeksHeight=
this._rankHeight=174,this._rankMonthHeight=139,this._rankDayHeight=137,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartMktMarketerTable_setRankDayUnits=function(a){var b=this._gridDayRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("images","{eai.resource}/marketer/"+(d+1)+".png");f.set("department_label",g);f.set("marketer_label",e.marketerLabel());f.set("investment_total",e.investmentTotal());f.set("customer_count",e.customerTotal());b.pushRow(f)}};
MO.FEaiChartMktMarketerTable_setRankWeekUnits=function(a){var b=this._gridWeeksRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("weeks_images","{eai.resource}/marketer/"+(d+1)+".png");f.set("weeks_department_label",g);f.set("weeks_marketer_label",e.marketerLabel());f.set("weeks_investment_total",e.investmentTotal());f.set("weeks_customer_count",
e.customerTotal());b.pushRow(f)}};
MO.FEaiChartMktMarketerTable_setRankMonthUnits=function(a){var b=this._gridMonthRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("month_images","{eai.resource}/marketer/"+(d+1)+".png");f.set("month_department_label",g);f.set("month_marketer_label",e.marketerLabel());f.set("month_investment_total",e.investmentTotal());f.set("month_customer_count",
e.customerTotal());b.pushRow(f)}};
MO.FEaiChartMktMarketerTable_pushUnit=function(a){if(!a)return null;var b=a.departmentLabel(),c=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(b);c&&(b=c.label());var c=a.customerCard(),d=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(c),c="";d&&(c=d.label());var d=this._gridControl,e=d.allocRow();e.set("record_date",a.recordDate());e.set("department_label",b);e.set("marketer_label",a.marketerLabel());e.set("customer_city",c);e.set("customer_info",a.customerLabel()+
" - "+a.customerPhone());e.set("customer_amount",a.customerActionAmount());d.insertRow(e);b=this._units;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiChartMktMarketerTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktMarketerTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,
new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartMktMarketerTimeline_oeUpdate;a.construct=MO.FEaiChartMktMarketerTimeline_construct;a.sync=MO.FEaiChartMktMarketerTimeline_sync;a.drawTrend=MO.FEaiChartMktMarketerTimeline_drawTrend;a.onPaintBegin=MO.FEaiChartMktMarketerTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiChartMktMarketerTimeline_on24HDataFetch;
return a};MO.FEaiChartMktMarketerTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiChartMktMarketerTrendInfo)};MO.FEaiChartMktMarketerTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartMktMarketerTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){var u=this._startTime,p=this._trendInfo.units(),r=p.count(),q=p.first(),t=a._handle;t.lineCap="round";g=1E4*g/l;q=f-q[b]/1E4*g;t.beginPath();t.moveTo(c,q);q=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(l=1;l<r;l++){var v=p.get(l),w=v[b];u.parseAuto(v.recordDate());u.refresh();v=u.date.getTime()-h;v=c+v/k*(e-c);w=f-w/1E4*g;w-=this._baseHeight;t.lineTo(v,w)}c=MO.Lang.Hex.format(q.findRate(0));
b="rgba("+MO.Lang.Hex.parse(c.substring(2,4))+","+MO.Lang.Hex.parse(c.substring(4,6))+","+MO.Lang.Hex.parse(c.substring(6,8))+",0.5)";c=MO.Lang.Hex.format(q.findRate(1));c="rgba("+MO.Lang.Hex.parse(c.substring(2,4))+","+MO.Lang.Hex.parse(c.substring(4,6))+","+MO.Lang.Hex.parse(c.substring(6,8))+",0.5)";e=a.createLinearGradient(0,f,0,d);e.addColorStop("0",n);e.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",b);a.addColorStop("1",c);t.strokeStyle=e;t.lineWidth=4;t.stroke()};
MO.FEaiChartMktMarketerTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+60,l=e-30,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",3);var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;for(b.setFont("bold 20px Microsoft YaHei");!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",
1);p=e.format("HH24:MI");e.addHour(1);e.truncHour();if(r=!r)q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}b.drawLine(g,f-this.degreeLineHeight(),g,f,"#FFFFFF",1);p=m.format("HH24:MI");q=b.textWidth(p);b.drawText(p,g-q/2,f+40,"#59FDE9");e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f.units())&&!q.isEmpty()){p=q.first();for(var v=0,m=q.count(),r=0;r<m;r++)t=q.get(r),t=t.investment(),t>v&&(v=t);this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");e.date.setTime(c);e.refresh();
g=-1;h=k=0;e.parseAuto(p.recordDate());e.refresh();g=e.date.getHours();for(r=0;r<m;r++)t=q.get(r),e.parseAuto(t.recordDate()),e.refresh(),l=e.date.getHours(),g!=l&&(k>h&&(h=k,k=0),g=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");g=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");k=b.textWidth(g);h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");l=
b.textWidth(h);f=MO.Lang.Float.unitFormat(f.investmentTotal()/24,0,0,2,0,1E4,"\u4e07");n=b.textWidth(f);u=Math.max(k);b.drawText("\u6295\u8d44\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+u-k,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+u-l,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(f,a+q+u-n,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartMktMarketerTrendInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartMktMarketerTrendUnit)]);return a};
MO.FEaiChartMktMarketerTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);return a};MO.EGuiArcDirection=new function(){this.Left="Left";this.Top="Top";this.Right="Right";this.Bottom="Bottom";this.Liner="Liner";return this};
MO.SBezierCurve=function(){this.ecp=this.scp=this.endPoint=this.startPoint=null;this.__cy=this.__by=this.__ay=this.__cx=this.__bx=this.__ax=0;this.calcCoefficient=MO.SBezierCurve_calcCoefficient;this.pointAt=MO.SBezierCurve_pointAt;this.tangentAt=MO.SBezierCurve_tangentAt;this.assign=MO.SBezierCurve_assign;this.dispose=MO.SBezierCurve_dispose;return this};
MO.SBezierCurve_calcCoefficient=function(){var a=this.startPoint,b=this.scp,c=this.ecp,d=this.endPoint,e=3*(b.x-a.x),f=3*(c.x-b.x)-e,g=d.x-a.x-e-f,h=3*(b.y-a.y),b=3*(c.y-b.y)-h,a=d.y-a.y-h-b;this.__cx=e;this.__bx=f;this.__ax=g;this.__cy=h;this.__by=b;this.__ay=a};MO.SBezierCurve_pointAt=function(a,b){var c=a*a,d=c*a;b.x=this.__ax*d+this.__bx*c+this.__cx*a+this.startPoint.x;b.y=this.__ay*d+this.__by*c+this.__cy*a+this.startPoint.y};
MO.SBezierCurve_tangentAt=function(a,b,c){var d=this.startPoint,e=this.scp,f=this.ecp,g=this.endPoint;b.x=d.x+(e.x-d.x)*a;b.y=d.y+(e.y-d.y)*a;c.x=f.x+(g.x-f.x)*a;c.y=f.y+(g.y-f.y)*a};MO.SBezierCurve_assign=function(a){this.startPoint.assign(a.startPoint);this.endPoint.assign(a.endPoint);this.scp.assign(a.scp);this.ecp.assign(a.ecp);this.calcCoefficient()};
MO.SBezierCurve_dispose=function(){this.startPoint=MO.Lang.Object.dispose(this.startPoint);this.endPoint=MO.Lang.Object.dispose(this.endPoint);this.scp=MO.Lang.Object.dispose(this.scp);this.ecp=MO.Lang.Object.dispose(this.ecp)};MO.SGuiBubbleStyle=function(){this.radius=50;this.lineWidth=3;this.foreFillColor="#f9a800";this.backFillColor="#007cb0";this.strokeColor="#1f3855";this.assign=MO.SGuiBubbleStyle_assign;this.dispose=MO.SGuiBubbleStyle_dispose;return this};
MO.SGuiBubbleStyle_assign=function(a){this.radius=a.radius;this.lineWidth=a.lineWidth;this.foreFillColor=a.foreFillColor;this.backFillColor=a.backFillColor;this.strokeColor=a.strokeColor};MO.SGuiBubbleStyle_dispose=function(){};
MO.SGuiTransferCurveStyle=function(){this.lineWidth=5;this.pointFillStyle="#45adbd";this.flarePointStyle="#16a6fd";this.arcStepHeight=10;this.arcDirection=MO.EUiDock.Left;this.flowPeriod=2E3;this.showDuration=1E4;this.arcAngle=1;this.assign=MO.SGuiTransferCurveStyle_assign;this.dispose=MO.SGuiTransferCurveStyle_dispose;return this};
MO.SGuiTransferCurveStyle_assign=function(a){this.lineWidth=a.lineWidth;this.flareColor=a.flareColor;this.lineColor=a.lineColor;this.arcStepHeight=a.arcStepHeight;this.arcDirection=a.arcDirection};MO.SGuiTransferCurveStyle_dispose=function(){};
MO.FEaiChartMktProductCircle=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._ready=!1;a._circleRadius=MO.Class.register(a,new MO.AGetSet("_circleRadius"),10);a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._TenderBef=MO.Class.register(a,new MO.AGetSet("_TenderBef"));a._FirstLoad=MO.Class.register(a,new MO.AGetSet("_FirstLoad"));a._circleStyle=MO.Class.register(a,new MO.AGetSet("_circleStyle"));a._circleAirRadius=MO.Class.register(a,new MO.AGetSet("_airRadius"),7);a._circlelColor=
MO.Class.register(a,new MO.AGetSet("_circlelColor"),"#ffffff");a.oeUpdate=MO.FEaiChartMktProductCircle_oeUpdate;a.construct=MO.FEaiChartMktProductCircle_construct;a.onPaintBegin=MO.FEaiChartMktProductCircle_onPaintBegin;a.on24HDataFetch=MO.FEaiChartMktProductCircle_on24HDataFetch;a.setCircleStyle=MO.FEaiChartMktProductCircle_setCircleStyle;a.dispose=MO.FEaiChartMktProductCircle_dispose;a.draw=MO.FEaiChartMktProductCircle_draw;return a};
MO.FEaiChartMktProductCircle_setCircleStyle=function(a,b,c){this.setCircleRadius(this._circleStyle.radius);this.setCircleAirRadius(11*this.__circleStyle.radius/15);this.setCircleColor(this.__circleStyle.circlelColor);this.setTatolColor(this.__circleStyle.tatolColor)};MO.FEaiChartMktProductCircle_dispose=function(){this._trendInfo=MO.Lang.Object.dispose(this._trendInfo);this._circleStyle=MO.Lang.Object.dispose(this._circleStyle);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktProductCircle_construct=function(){this.__base.FGuiControl.construct.call(this);this._trendInfo=MO.Class.create(MO.FEaiLogicInfoTrendUnit)};MO.FEaiChartMktProductCircle_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartMktProductCircle_draw=function(a){if(this._ready&&this._trendInfo){var b=a.graphic,c=a.rectangle;a=this.circleRadius();var d=this.circleAirRadius(),e=c.left+c.width/30+a,f=c.top,c=c.top+c.productRadius,g="",g=this.circlelColor();b._handle.beginPath();b._handle.arc(e,c,a,0*Math.PI,2*Math.PI);b._handle.closePath();b._handle.strokeStyle=g;b._handle.stroke();b._handle.beginPath();b._handle.arc(e,c,d,0*Math.PI,2*Math.PI,!1);b._handle.closePath();b._handle.strokeStyle=g;b._handle.stroke();b._handle.beginPath();
b._handle.arc(e,c,a,0*Math.PI-Math.PI/2,2*Math.PI*tendRate-Math.PI/2,!1);b._handle.arc(e,c,d,2*Math.PI*tendRate-Math.PI/2,0*Math.PI-Math.PI/2,!0);b._handle.closePath();b._handle.fillStyle=g;b._handle.fill();textPx="px Microsoft YaHei";textSize=28;textPx=textSize+textPx;b.setFont(textPx);lable=persentRate+"%";productText_w=b.textWidth(lable)/2;b.drawText(lable,e-productText_w,f+a+productInterval+i*(2*a+productInterval)+textSize/2,"#FFFFFF");yearRate=unit.rate().toFixed(2);productText=unit.label();
b.drawText(productText,text_x,c,g);yearRate="\u5e74\u5316\u5229\u7387 :"+yearRate+"%";b.setFont("20px Microsoft YaHei");b.drawText(yearRate,text_x,c,"#FFFFFF");tatolLable=(unit.invesmentTotal()/1E8).toFixed(2);lable="\u603b\u8ba1:   "+tatolLable+"\u4ebf";b.drawText(lable,text_x,c,"#FFFFFF");dayLable=unit.invesmentDay()/1E8;lable="\u5f53\u65e5:    "+dayLable+"\u4ebf";b.drawText(lable,text_x,c,"#FFFFFF")}};
MO.FEaiChartMktProductCircle_onPaintBegin=function(a){if(this._ready&&f){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.top;var d=c.left+5,e=this._trendInfo,f=this._trendInfo.units(),g=c.height/f.count()*5/12,h=c.height/f.count()*11/36,k=c.height/f.count()*1/9,l=0,n=f.count(),m=l=0,u=0,m=0,l=e=m=l=l="",p=this._FirstLoad,r=d+c.width/2,d=d+2*c.width/3,c=c.height/36,u=m=0,q=l="";if(f)for(var t=0;t<n;t++){e=f.get(t);l=this._TenderBef[t];m=e.tenderInvesment();u=e.tenderTotal();
l>=m?l=m:p[t]?(l=m,p[t]=!1):1E7<m-l?l+=1E7:1E6<m-l?l+=1E6:1E5<m-l?l+=1E5:1E4<m-l&&(l+=1E4);this._TenderBef[t]=l;switch(t){case 0:q="#00c6ed";break;case 1:q="#10d19c";break;case 2:q="#7b47d7";break;case 3:q="#ea3256";break;case 4:q="#ff6817";break;case 5:q="#ffeb4a"}l/=u;m=(100*(m/u).toFixed(2)).toFixed(0);b._handle.beginPath();b._handle.arc(r,a+g+k+t*(2*g+k),g,0*Math.PI,2*Math.PI);b._handle.closePath();b._handle.strokeStyle=q;b._handle.stroke();b._handle.beginPath();b._handle.arc(r,a+g+k+t*(2*g+k),
h,0*Math.PI,2*Math.PI,!1);b._handle.closePath();b._handle.strokeStyle=q;b._handle.stroke();b._handle.beginPath();b._handle.arc(r,a+g+k+t*(2*g+k),g,0*Math.PI-Math.PI/2,2*Math.PI*l-Math.PI/2,!1);b._handle.arc(r,a+g+k+t*(2*g+k),h,2*Math.PI*l-Math.PI/2,0*Math.PI-Math.PI/2,!0);b._handle.closePath();b._handle.fillStyle=q;b._handle.fill();l="px Microsoft YaHei";u=28;l=u+l;b.setFont(l);l=m+"%";m=b.textWidth(l)/2;b.drawText(l,r-m,a+g+k+t*(2*g+k)+u/2,"#FFFFFF");m=e.rate().toFixed(2);l=e.label();b.drawText(l,
d,a+g+k+t*(2*g+k)-2*c,q);m="\u5e74\u5316\u5229\u7387 :"+m+"%";b.setFont("20px Microsoft YaHei");b.drawText(m,d,a+g+k+t*(2*g+k),"#FFFFFF");l=(e.invesmentTotal()/1E8).toFixed(2);l="\u603b\u8ba1:   "+l+"\u4ebf";b.drawText(l,d,a+g+k+t*(2*g+k)+c,"#FFFFFF");e=e.invesmentDay()/1E8;l="\u5f53\u65e5:    "+e+"\u4ebf";b.drawText(l,d,a+g+k+t*(2*g+k)+2*c,"#FFFFFF")}}};
MO.FEaiChartMktProductProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),
0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=
MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tenderUnits=MO.Class.register(a,new MO.AGetter("_tenderUnits"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=
null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._eventTrenderDataChanged=null;a._listenersTrenderDataChanged=MO.Class.register(a,new MO.AListener("_listenersTrenderDataChanged","TrenderDataChanged"));a.onDynamicData=MO.FEaiChartMktProductProcessor_onDynamicData;a.onTrenderData=MO.FEaiChartMktProductProcessor_onTrenderData;a.construct=MO.FEaiChartMktProductProcessor_construct;a.allocUnit=MO.FEaiChartMktProductProcessor_allocUnit;a.allocShape=
MO.FEaiChartMktProductProcessor_allocShape;a.setup=MO.FEaiChartMktProductProcessor_setup;a.calculateCurrent=MO.FEaiChartMktProductProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartMktProductProcessor_focusEntity;a.process=MO.FEaiChartMktProductProcessor_process;a.dispose=MO.FEaiChartMktProductProcessor_dispose;return a};
MO.FEaiChartMktProductProcessor_onTrenderData=function(a){var b=this._tenderUnits;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._eventTrenderDataChanged;a.tenderUnits=b.units();this.processTrenderDataChangedListener(a)};
MO.FEaiChartMktProductProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartMktProductProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);this._rankUnits=new MO.TObjects;this._tenderUnits=MO.Class.create(MO.FEaiLogicInfoTender);this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._eventTrenderDataChanged=new MO.SEvent(this)};MO.FEaiChartMktProductProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};MO.FEaiChartMktProductProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartMktProductProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiChartMktProductProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;b.unit=
a;this.processDataChangedListener(b)};
MO.FEaiChartMktProductProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);b.tender().doInfo(this,
this.onTrenderData)}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};
MO.FEaiChartMktProductProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartMktProductScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._liveTable=null;a._circleProduct=null;a._bubbleCanvas=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartMktProductScene_onOperationDown;a.onInvestmentDataChanged=
MO.FEaiChartMktProductScene_onInvestmentDataChanged;a.onTrendDataChanged=MO.FEaiChartMktProductScene_onTrendDataChanged;a.onOperationVisibility=MO.FEaiChartMktProductScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartMktProductScene_onProcessReady;a.onProcess=MO.FEaiChartMktProductScene_onProcess;a.onSwitchProcess=MO.FEaiChartMktProductScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartMktProductScene_onSwitchComplete;a.setup=MO.FEaiChartMktProductScene_setup;a.showParticle=MO.FEaiChartMktProductScene_showParticle;
a.showFace=MO.FEaiChartMktProductScene_showFace;a.fixMatrix=MO.FEaiChartMktProductScene_fixMatrix;a.processResize=MO.FEaiChartMktProductScene_processResize;return a};MO.FEaiChartMktProductScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartMktProductScene_onTrendDataChanged=function(a){var b=this._bubbleCanvas;b.setTenderUnits(a.tenderUnits);b.dirty()};MO.FEaiChartMktProductScene_onInvestmentDataChanged=function(a){var b=this._liveTable;b.pushUnit(a.unit);b.dirty();this._circleProduct.dirty()};
MO.FEaiChartMktProductScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartMktProductScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartMktProductScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing){a=this._countryEntity;a.introAnimeDone()||a.process();this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=
this._processor;0<b.invementDayCurrent()&&(a.findComponent("investmentTotal").setValue(parseInt(b.invementTotalCurrent()).toString()),a.findComponent("investmentDay").setValue(parseInt(b.invementDayCurrent()).toString()));this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}};MO.FEaiChartMktProductScene_onSwitchProcess=function(a){};
MO.FEaiChartMktProductScene_onSwitchComplete=function(a){};
MO.FEaiChartMktProductScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.customer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartMktProductProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b.addTrenderDataChangedListener(this,this.onTrendDataChanged);
b=b.display();this.fixMatrix(b.matrix());a.push(b);a=this._liveTable=MO.Class.create(MO.FEaiChartMktProductTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._bubbleCanvas=MO.Class.create(MO.FGuiBubbleCanvas);a.setName("BubbleCanvas");a.linkGraphicContext(this);a.build();this._guiManager.register(a);a=this._circleProduct=MO.Class.create(MO.FEaiChartMktProductCircle);a.setName("circleProduct");a.linkGraphicContext(this);a.build();this._guiManager.register(a);
this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};
MO.FEaiChartMktProductScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};
MO.FEaiChartMktProductScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartMktProductScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartMktProductScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(280));b=this._circleProduct;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(750));b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):
(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(20),b.setRight(780),b.setHeight(250));a=this._bubbleCanvas;a.setDockCd(MO.EUiDock.Right);a.setAnchorCd(MO.EUiAnchor.Top|MO.EUiAnchor.Bottom|MO.EUiAnchor.Right);a.setTop(10);a.setBottom(20);a.setRight(10);a.setWidth(800);a.setHeight(1050)};
MO.FEaiChartMktProductTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartMktProductTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktProductTable_onPaintBegin;a.construct=MO.FEaiChartMktProductTable_construct;a.setup=
MO.FEaiChartMktProductTable_setup;a.pushUnit=MO.FEaiChartMktProductTable_pushUnit;a.drawRow=MO.FEaiChartMktProductTable_drawRow;a.dispose=MO.FEaiChartMktProductTable_dispose;return a};MO.FEaiChartMktProductTable_onImageLoad=function(){this.dirty()};MO.FEaiChartMktProductTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.rectangle;a.graphic.drawGridImage(this._backgroundImage,b.left,b.top,b.width,b.height,this._backgroundPadding)};
MO.FEaiChartMktProductTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartMktProductTable_setup=function(){this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid.png");var a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,32);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";
a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");b.setDataName("customer_city");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);
b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAmount");b.setLabel("\u6295\u8d44\u989d");b.setDataName("investment_amount");b.cellPadding().right=10;b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);
b.setName("modelLabel");b.setLabel("\u6295\u8d44\u4ea7\u54c1");b.setDataName("model_label");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentGain");b.setLabel("\u5e74\u5316\u6536\u76ca");b.setDataName("investment_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);
b.setName("bankGain");b.setLabel("\u94f6\u884c\u6536\u76ca");b.setDataName("bank_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=
22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",
this._rowStart=384)};
MO.FEaiChartMktProductTable_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("model_label",a.modelLabel());d.set("investment_amount",a.investment());d.set("investment_gain",a.gain());d.set("bank_gain",a.bankGain());c.insertRow(d);b=this._units;b.unshift(a);
this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiChartMktProductTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FGuiBubble=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGuiSize);a._bubbleStyle=MO.Class.register(a,new MO.AGetSet("_bubbleStyle"));a._data=MO.Class.register(a,new MO.AGetSet("_data"));a.construct=MO.FGuiBubble_construct;a.bubbleStyle=MO.FGuiBubble_bubbleStyle;a.setBubbleStyle=MO.FGuiBubble_setBubbleStyle;a.setup=MO.FGuiBubble_setup;a.draw=MO.FGuiBubble_draw;a.dispose=MO.FGuiBubble_dispose;return a};MO.FGuiBubble_construct=function(){this.__base.FObject.construct.call(this);this.__base.MGuiSize.construct.call(this)};
MO.FGuiBubble_setup=function(){};MO.FGuiBubble_draw=function(a){a=a.graphic;var b=this.left()+this.width()/2,c=this.top()+this.height()/2,d=this._bubbleStyle;a.drawCircle(b,c,d.radius,d.lineWidth,d.strokeColor,d.backFillColor);var e=a._handle;e.save();e.beginPath();e.arc(b,c,d.radius,0,2*Math.PI,!1);e.clip();var f=this.top()+.382*this.height();a.fillRectangle(this.left(),f,this.width(),this.height(),d.foreFillColor);a.drawCircle(b,c,d.radius,d.lineWidth,d.strokeColor,"");e.restore()};
MO.FGuiBubble_dispose=function(){this._date=MO.Lang.Object.dispose(this._date);this._bubbleStyle=MO.Lang.Object.dispose(this._bubbleStyle);this.__base.FGuiControl.dispose.call(this)};
MO.FGuiBubbleCanvas=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._gap=MO.Class.register(a,new MO.AGetter("_gap"),20);a._ready=MO.Class.register(a,new MO.AGetter("_ready"),!1);a._tenderUnits=MO.Class.register(a,new MO.AGetter("_tenderUnits"),!1);a._bubbles=MO.Class.register(a,new MO.AGetSet("_bubbles"));a._curves=MO.Class.register(a,new MO.AGetter("_curves"));a.construct=MO.FGuiBubbleCanvas_construct;a.onPaintBegin=MO.FGuiBubbleCanvas_onPaintBegin;a.setTenderUnits=MO.FGuiBubbleCanvas_setTenderUnits;
a.dispose=MO.FGuiBubbleCanvas_dispose;return a};MO.FGuiBubbleCanvas_construct=function(){this.__base.FGuiControl.construct.call(this);this._bubbles=new MO.TObjects;this._curves=new MO.TDictionary};MO.FGuiBubbleCanvas_setTenderUnits=function(a){this._tenderUnits=a};MO.FGuiBubbleCanvas_showTransferCurve=function(a){};
MO.FGuiBubbleCanvas_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=this._clientRectangle;a.graphic.drawRectangle(b.left,b.top,b.width,b.height,"red",2);for(var c=this._bubbles,d=c.count(),b=0;b<d;b++)c.at(b).draw(a);c=this._curves;d=c.count();for(b=0;b<d;b++)c.at(b).draw(a)};MO.FGuiBubbleCanvas_dispose=function(){this._bubbles=MO.Lang.Object.dispose(this._bubbles);this.__base.FGuiControl.dispose.call(this)};
MO.FGuiTransferCurve=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGuiSize);a._curveStyle=MO.Class.register(a,new MO.AGetSet("_curveStyle"));a._curveData=MO.Class.register(a,new MO.AGetSet("_curveData"));a._arcLevel=1;a._startTick=0;a._drawPoint=null;a._sTangentPoint=null;a._eTangentPoint=null;a._tangentVector=null;a.construct=MO.FGuiTransferCurve_construct;a.setup=MO.FGuiTransferCurve_setup;a.draw=MO.FGuiTransferCurve_draw;a.dispose=MO.FGuiTransferCurve_dispose;return a};
MO.FGuiTransferCurve_construct=function(){this.__base.FObject.construct.call(this);this.__base.MGuiSize.construct.call(this);this._drawPoint=new MO.SPoint2(0,0);this._sTangentPoint=new MO.SPoint2(0,0);this._eTangentPoint=new MO.SPoint2(0,0);this._stPoint3=new MO.SPoint3(0,0,0);this._etPoint3=new MO.SPoint3(0,0,0);this._tangentVector=new MO.SVector3(0,0,0)};
MO.FGuiTransferCurve_setup=function(a,b,c,d){a=new MO.SPoint2(a,b);c=new MO.SPoint2(c,d);d=.5*(c.x-a.x);b=.5*(c.y-a.y);var e=.5*(a.x+c.x),f=.5*(a.y+c.y),g,h,k,l,n=this._curveStyle;switch(n.arcDirection){case MO.EGuiArcDirection.Left:g=h=e-=n.arcStepHeight*this._arcLevel;k=l=f;k-=b*n.arcAngle;l+=b*n.arcAngle;break;case MO.EGuiArcDirection.Top:k=l=f-=n.arcStepHeight*this._arcLevel;g=h=e;g-=d*n.arcAngle;h+=d*n.arcAngle;break;case MO.EGuiArcDirection.Right:g=h=e+=n.arcStepHeight*this._arcLevel;k=l=f;
k-=b*n.arcAngle;l+=b*n.arcAngle;break;case MO.EGuiArcDirection.Bottom:k=l=f+=n.arcStepHeight*this._arcLevel,g=h=e,g-=d*n.arcAngle,h+=d*n.arcAngle}d=this._curveData=new MO.SBezierCurve;d.startPoint=a;d.endPoint=c;d.scp=new MO.SPoint2(g,k);d.ecp=new MO.SPoint2(h,l);d.calcCoefficient();this._startTick=MO.Timer.current()};
MO.FGuiTransferCurve_draw=function(a){a=a.graphic;var b=this._curveStyle,c=this._curveData,d=c.startPoint,e=c.endPoint,f=c.scp,g=c.ecp;a._handle.beginPath();a._handle.moveTo(d.x,d.y);a._handle.bezierCurveTo(f.x,f.y,g.x,g.y,e.x,e.y);a._handle.lineWidth=b.lineWidth;a._handle.strokeStyle=b.flarePointStyle;a._handle.stroke();var b=(MO.Timer.current()-this._startTick)/b.flowPeriod,h=b-parseInt(b),b=this._drawPoint;c.pointAt(h,b);var k=a._handle.createRadialGradient(b.x,b.y,0,b.x,b.y,10);k.addColorStop("0",
"rgba(255, 0, 0, 1.0");k.addColorStop("1","rgba(255, 0, 0, 0");var k=this._sTangentPoint,l=this._eTangentPoint;c.tangentAt(h,k,l);var n=this._stPoint3,m=this._etPoint3;n.set(k.x,k.y,0);m.set(l.x,l.y,0);this._tangentVector.direction(n,m).normalize();k=new MO.SPoint2;c.pointAt(h-.1,k);c=a._handle.createRadialGradient(b.x,b.y,0,k.x,k.y,50);c.addColorStop("0","rgba(255, 156, 0, 1.0");c.addColorStop("1","rgba(251, 107, 0, 0");a._handle.save();a._handle.beginPath();a._handle.moveTo(d.x-2,d.y);a._handle.bezierCurveTo(f.x-
2,f.y,g.x-2,g.y,e.x-2,e.y);a._handle.lineTo(e.x+2,e.y);a._handle.bezierCurveTo(g.x+2,g.y,f.x+2,f.y,d.x+2,d.y);a._handle.closePath();a._handle.clip();a.drawCircle(b.x,b.y,50,0,"",c);a._handle.restore()};MO.FGuiTransferCurve_dispose=function(){this._curveStyle=MO.Lang.Object.dispose(this._curveStyle);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktManageCountryTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartMktManageCountryTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktManageCountryTable_onPaintBegin;a.construct=MO.FEaiChartMktManageCountryTable_construct;a.setup=MO.FEaiChartMktManageCountryTable_setup;
a.setUnits=MO.FEaiChartMktManageCountryTable_setUnits;a.dispose=MO.FEaiChartMktManageCountryTable_dispose;return a};MO.FEaiChartMktManageCountryTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktManageCountryTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.left;var d=c.top,e=c.width;b.drawGridImage(this._backgroundImage,a,d,e,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u7406\u8d22\u5e08\u6570\u636e\u5c55\u793a\u4e2d\u5fc3");b.drawText("\u5168\u7403\u7406\u8d22\u5e08\u6570\u636e\u5c55\u793a\u4e2d\u5fc3",a+.5*(e-c),d+76,"#59FDE9");b.setFont(this._rowFontStyle)};
MO.FEaiChartMktManageCountryTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartMktManageCountryTable_setup=function(){(this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid2.png")).addLoadListener(this,this.onImageLoad);var a=this._gridControl=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!0);a.setLocation(50,120);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";
a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnText);b.setName("companyName");b.setLabel("\u516c\u53f8\u540d\u79f0");b.setDataName("companyName");b.setWidth(170);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerCount");b.setLabel("\u7406\u8d22\u5e08\u6570");b.setDataName("marketerCount");b.setTextAlign(MO.EUiAlign.Right);
b.setWidth(100);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("investment");b.setLabel("\u6295\u8d44\u603b\u989d(\u4e07)");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(140);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("redemption");b.setLabel("\u8d4e\u56de\u603b\u989d(\u4e07)");
b.setDataName("redemption");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(130);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("netinvestment");b.setLabel("\u51c0\u6295\u603b\u989d(\u4e07)");b.setDataName("netinvestment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(130);b.cellPadding().right=
15;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartMktManageCountryTable_setUnits=function(a){if(!a)return null;var b=MO.Console.find(MO.FEaiResourceConsole).departmentModule(),c=this._gridControl;c.clearRows();for(var d=a.count(),e=0;e<d;e++){var f=a.at(e),g=c.allocRow(),h=f.label(),k=b.findByFullLabel(h);k&&(h=k.label());g.set("companyName",h);g.set("marketerCount",f.marketerCount());g.set("investment",f.investment());g.set("redemption",f.redemption());g.set("netinvestment",f.netinvestment());c.pushRow(g)}};
MO.FEaiChartMktManageCountryTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktManageInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._department2s=MO.Class.register(a,[new MO.AGetter("_department2s"),new MO.APersistence("_department2s",MO.EDataType.Objects,MO.FEaiChartMktManageInfoDepartment2)]);a._department4s=MO.Class.register(a,[new MO.AGetter("_department4s"),new MO.APersistence("_department4s",MO.EDataType.Objects,MO.FEaiChartMktManageInfoDepartment4)]);a._citys=MO.Class.register(a,[new MO.AGetter("_citys"),new MO.APersistence("_citys",
MO.EDataType.Objects,MO.FEaiChartMktManageInfoCity)]);return a};
MO.FEaiChartMktManageInfoCity=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._card=MO.Class.register(a,[new MO.AGetter("_card"),new MO.APersistence("_card",MO.EDataType.Uint32)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),
new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiChartMktManageInfoDepartment2=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._id=MO.Class.register(a,[new MO.AGetter("_id"),new MO.APersistence("_id",MO.EDataType.Uint32)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),
new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiChartMktManageInfoDepartment4=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._provinceCode=MO.Class.register(a,[new MO.AGetter("_provinceCode"),new MO.APersistence("_provinceCode",MO.EDataType.Uint16)]);a._id=MO.Class.register(a,[new MO.AGetter("_id"),new MO.APersistence("_id",MO.EDataType.Uint32)]);a._parentLabel=MO.Class.register(a,[new MO.AGetter("_parentLabel"),new MO.APersistence("_parentLabel",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),
new MO.APersistence("_label",MO.EDataType.String)]);a._marketerCount=MO.Class.register(a,[new MO.AGetter("_marketerCount"),new MO.APersistence("_marketerCount",MO.EDataType.Uint32)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",
MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiChartMktManageLivePop=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._bgImage=null;a._data=MO.Class.register(a,new MO.AGetSet("_data"));a._startTick=0;a._popDuration=500;a._showDuration=2E3;a._closeDuration=500;a._fullWidth=910;a._fullHeight=140;a._riseHeight=50;a._date=null;a.construct=MO.FEaiChartMktManageLivePop_construct;a.setup=MO.FEaiChartMktManageLivePop_setup;a.onPaintBegin=MO.FEaiChartMktManageLivePop_onPaintBegin;a.onImageLoad=MO.FEaiChartMktManageLivePop_onImageLoad;a.show=
MO.FEaiChartMktManageLivePop_show;a.dispose=MO.FEaiChartMktManageLivePop_dispose;return a};MO.FEaiChartMktManageLivePop_construct=function(){this.__base.FGuiControl.construct.call(this);this._date=new MO.TDate};
MO.FEaiChartMktManageLivePop_setup=function(){this.setWidth(this._fullWidth);this.setHeight(this._fullHeight);this.setLeft((MO.Eai.Canvas.logicSize().width-this._fullWidth)/3);this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight);this._bgImage=MO.Class.create(MO.FImage);this._bgImage.addLoadListener(this,this.onImageLoad);this._bgImage.loadUrl("{eai.resource}/invespop.png")};MO.FEaiChartMktManageLivePop_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktManageLivePop_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);if(this._data){a=a.graphic;var b=this._clientRectangle,c=this._data,d=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(c.card()),e="";this._date.parse(c.date());e+=this._date.format("HH24:MI:SS");e+="    ";d&&(e+=d.data().label());e=e+"    "+(c.customer()+" - "+c.phone());e+="    ";e+=MO.Lang.Float.format(c.investment(),null,null,2,"0");a.setFont("36px Microsoft YaHei");popTextWidth=
a.textWidth(e);var c=MO.Timer.current()-this._startTick,d=c-this._popDuration,f=c-this._showDuration-this._popDuration,g=0;c<this._popDuration?(g=c/this._popDuration,a._handle.globalAlpha=g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2+this._riseHeight*(1-g)),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+g+")")):d<this._showDuration?(a.drawImage(this._bgImage,
b.left,b.top,this._fullWidth,this._fullHeight),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, 1)")):f<this._closeDuration?(g=f/this._closeDuration,a._handle.globalAlpha=1-g,a.drawImage(this._bgImage,b.left,b.top,this._fullWidth,this._fullHeight),a._handle.globalAlpha=1,this.setTop((MO.Eai.Canvas.logicSize().height-this._fullHeight)/2-this._riseHeight*g),a.drawText(e,b.left+(b.width-popTextWidth)/2,b.top+80,"rgba(255, 241, 0, "+(1-g)+")")):(this._data=null,this.setVisible(!1),
this.dirty())}};MO.FEaiChartMktManageLivePop_show=function(){o=this;o.setVisible(!0);o._startTick=MO.Timer.current();o.dirty()};MO.FEaiChartMktManageLivePop_dispose=function(){this._date=MO.Lang.Object.dispose(this._date);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktManageLiveTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetSet("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._columnLabels=null;a._columnDefines=null;a._columnWidths=null;a._tableCount=0;a._entities=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,
new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartMktManageLiveTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktManageLiveTable_onPaintBegin;a.oeUpdate=MO.FEaiChartMktManageLiveTable_oeUpdate;a.construct=MO.FEaiChartMktManageLiveTable_construct;a.setup=MO.FEaiChartMktManageLiveTable_setup;a.pushEntity=MO.FEaiChartMktManageLiveTable_pushEntity;a.drawRow=MO.FEaiChartMktManageLiveTable_drawRow;a.dispose=MO.FEaiChartMktManageLiveTable_dispose;return a};
MO.FEaiChartMktManageLiveTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktManageLiveTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left;a=c.top;for(var e=c.width,f=c.height,c=d+12,g=d+e-d,h=0,k=0;4>k;k++)h+=this._columnDefines[k];for(k=0;4>k;k++)this._columnWidths[k]=this._columnDefines[k]/h*g-7;b.drawGridImage(this._backgroundImage,d,a,e,f,this._backgroundPadding);b.setFont(this._headFontStyle);k=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",
d+.5*(e-k),a+76,"#59FDE9");b.setFont(this._rowFontStyle);f=a+this._rankStart;b.drawGridImage(this._rankLineImage,d+6,f+this._rankTitleStart,e-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(e-167),f+3,167,40);if(h=this._rank)for(d=h.count(),f+=90,k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!0,k,c,f+this._rankRowHeight*k,g);for(var d="",e=0,f=c,h=a+this._headStart,l=h+this._headTextTop,k=0;4>k;k++)d=this._columnLabels[k],e=b.textWidth(d),b.fillRectangle(f,h,this._columnWidths[k]-
4,this._headHeight,"#122A46"),b.drawText(d,f+.5*(this._columnWidths[k]-e-4),l,"#00B2F2"),f+=this._columnWidths[k];h=this._entities;if(!h.isEmpty())for(f=a+this._rowStart,b.clip(c,f,g-38,this._rowHeight*(this._tableCount-1)),f+=24,d=h.count(),k=0;k<d;k++)e=h.at(k),this.drawRow(b,e,!1,k,c,f+this._rowHeight*k+this._lineScroll,g)};
MO.FEaiChartMktManageLiveTable_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);a.isBefore()&&0>this._lineScroll&&(this._lineScroll+=1,this._lineScroll<-this._rowHeight&&(this._lineScroll=0),0<=this._lineScroll&&(a=this._entities,a.count()>this._tableCount&&a.pop(),this._lineScroll=0),this.dirty())};
MO.FEaiChartMktManageLiveTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._entities=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20);this._columnLabels=["\u65f6\u95f4","\u57ce\u5e02","\u7528\u6237-\u624b\u673a","\u6295\u8d44\u989d(\u5143)"];MO.Runtime.isPlatformMobile()?this._columnDefines=[130,130,180,186]:this._columnDefines=[110,110,160,166];this._columnWidths=[]};
MO.FEaiChartMktManageLiveTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);
b=this._rank1Image=a.load("{eai.resource}/live/1.png");b.addLoadListener(this,this.onImageLoad);b=this._rank2Image=a.load("{eai.resource}/live/2.png");b.addLoadListener(this,this.onImageLoad);b=this._rank3Image=a.load("{eai.resource}/live/3.png");b.addLoadListener(this,this.onImageLoad);this._headFontStyle="bold 36px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=
22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei",this._rowHeight=46):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="24px Microsoft YaHei",
this._rowStart=384,this._rowHeight=36)};MO.FEaiChartMktManageLiveTable_pushEntity=function(a){if(!a)return null;var b=this._entities;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};
MO.FEaiChartMktManageLiveTable_drawRow=function(a,b,c,d,e,f,g){var h=this._columnWidths;g=null;g=c?"#E5BD1D":"#59FDE9";if(c){var k=e+.5*h[0]-23,l=f-this._rankIconStart;0==d&&this._rank1Image.testReady()&&a.drawImage(this._rank1Image,k-6,l-28,58,65);1==d&&this._rank2Image.testReady()&&a.drawImage(this._rank2Image,k,l,46,37);2==d&&this._rank3Image.testReady()&&a.drawImage(this._rank3Image,k,l,46,37)}f+=this._rankTextStart;d=0;c||(this._currentDate.parse(b.date()),c=this._currentDate.format("HH24:MI:SS"),
d=a.textWidth(c),a.drawText(c,e+.5*h[0]-.5*d,f,g));e+=h[0];d=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b.card());c="";d&&(c=d.label());d=a.textWidth(c);a.drawText(c,e+.5*h[1]-.5*d,f,g);e+=h[1];c=b.customer()+" - "+b.phone();d=a.textWidth(c);a.drawText(c,e+.5*h[2]-.5*d,f,g);e+=h[2];b=MO.Lang.Float.format(b.investment(),null,null,2,"0");e=e+h[3]-15;7<b.length?(g=null,g=9<b.length?"#FDEF01":"#EB6C03",h=b.substring(0,b.length-7),b=b.substring(b.length-7,b.length),c=a.textWidth(h),
d=a.textWidth(b),a.drawText(h,e-d-c,f,g),a.drawText(b,e-d,f,"#59FDE9")):(d=a.textWidth(b),a.drawText(b,e-d,f,g))};MO.FEaiChartMktManageLiveTable_dispose=function(){this._entities=MO.Lang.Object.dispose(this._entities);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FEaiEntity.dispose.call(this)};
MO.FEaiChartMktManageProvinceTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._title=MO.Class.register(a,new MO.AGetSet("_title"),"\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868");a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartMktManageProvinceTable_onImageLoad;a.onPaintBegin=MO.FEaiChartMktManageProvinceTable_onPaintBegin;
a.construct=MO.FEaiChartMktManageProvinceTable_construct;a.setup=MO.FEaiChartMktManageProvinceTable_setup;a.setUnits=MO.FEaiChartMktManageProvinceTable_setUnits;a.dispose=MO.FEaiChartMktManageProvinceTable_dispose;return a};MO.FEaiChartMktManageProvinceTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartMktManageProvinceTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.left;var d=c.top,e=c.width;b.drawGridImage(this._backgroundImage,a,d,e,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth(this._title);b.drawText(this._title,a+.5*(e-c),d+76,"#59FDE9");b.setFont(this._rowFontStyle)};
MO.FEaiChartMktManageProvinceTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartMktManageProvinceTable_setup=function(){(this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid2.png")).addLoadListener(this,this.onImageLoad);var a=this._gridControl=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!0);a.setLocation(50,120);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";
a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnText);b.setName("companyName");b.setLabel("\u7236\u516c\u53f8\u540d\u79f0");b.setDataName("companyName");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("branchName");b.setLabel("\u5b50\u516c\u53f8\u540d\u79f0");b.setDataName("branchName");b.setWidth(160);
b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerCount");b.setLabel("\u7406\u8d22\u5e08\u6570");b.setDataName("marketerCount");b.setTextAlign(MO.EUiAlign.Right);b.setWidth(90);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("investment");b.setLabel("\u6295\u8d44(\u4e07)");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("redemption");b.setLabel("\u8d4e\u56de(\u4e07)");b.setDataName("redemption");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnBigNumber);b.setName("netinvestment");
b.setLabel("\u51c0\u6295(\u4e07)");b.setDataName("netinvestment");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):
(this._tableCount=19,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartMktManageProvinceTable_setUnits=function(a){if(!a)return null;var b=MO.Console.find(MO.FEaiResourceConsole).departmentModule(),c=this._gridControl;c.clearRows();for(var d=Math.min(a.count(),40),e=0;e<d;e++){var f=a.at(e),g=c.allocRow(),h=f.parentLabel(),k=b.findByFullLabel(h);k&&(h=k.label());g.set("companyName",h);g.set("branchName",f.label());g.set("marketerCount",f.marketerCount());g.set("investment",f.investment());g.set("redemption",f.redemption());g.set("netinvestment",f.netinvestment());
c.pushRow(g)}};MO.FEaiChartMktManageProvinceTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartMktManageScene=function(a){a=MO.Class.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartWorld;a._optionMapCity3d=!0;a._mapReady=!1;a._playing=!1;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a._operationPoint=null;a._operationRotationX=0;a._operationRotationY=0;a._rotationX=0;a._rotationY=0;a._startRotateY=0;a._targetRotateY=0;a._translateY=0;a._startTranslateY=0;a._targetTranslateY=0;a._startTick=0;a._earthMoving=!1;a.__moveEarthDuration=500;a._opMouseDown=
!1;a._opMouseMoved=!1;a.__opMouseMoveThreshold=4;a._autoRotate=!0;a._showChina=!1;a._showingMktInfo=!1;a._countryTable=null;a._provinceTable=null;a._selectedProvinceCode=0;a._provinceUnits=null;a._countryUnits=null;a._worldScale=300;a._startWorldScale=500;a._targetWorldScale=500;a._cameraFrom=null;a._cameraTo=null;a._cameraDirection=null;a._ccDirection=null;a._facePosition=null;a._organizationDataTicker=null;a._organizationInfo=null;a.onOrganizationFetch=MO.FEaiChartMktManageScene_onOrganizationFetch;
a.onOperationDown=MO.FEaiChartMktManageScene_onOperationDown;a.onOperationMove=MO.FEaiChartMktManageScene_onOperationMove;a.onOperationUp=MO.FEaiChartMktManageScene_onOperationUp;a.onOperationWheel=MO.FEaiChartMktManageScene_onOperationWheel;a.onOperationVisibility=MO.FEaiChartMktManageScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartMktManageScene_onProcessReady;a.onProcess=MO.FEaiChartMktManageScene_onProcess;a.onSwitchProcess=MO.FEaiChartMktManageScene_onSwitchProcess;a.onSwitchComplete=
MO.FEaiChartMktManageScene_onSwitchComplete;a.construct=MO.FEaiChartMktManageScene_construct;a.setup=MO.FEaiChartMktManageScene_setup;a.showFace=MO.FEaiChartMktManageScene_showFace;a.fixMatrix=MO.FEaiChartMktManageScene_fixMatrix;a.processResize=MO.FEaiChartMktManageScene_processResize;return a};
MO.FEaiChartMktManageScene_onOrganizationFetch=function(a){var b=this._mapEntity,c=this._organizationInfo;c.unserializeSignBuffer(a.sign,a.content,!0);this._countryTable.setUnits(c._department2s);var d=this._countryUnits,e=c._department4s;d.clear();for(a=0;20>a;a++)d.push(e.at(a));d=MO.Console.find(MO.FEaiEntityConsole).cityModule();c=c.citys();e=c.count();for(a=0;a<e;a++){var f=c.at(a),g=f.card();(g=d.findByCard(g))&&g.update(f)}b.upload()};
MO.FEaiChartMktManageScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartMktManageScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showWorld();var a=this._countryEntity;a.start();this._mapEntity.showCountry(a);this._mapEntity.showCity()};
MO.FEaiChartMktManageScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),this.processLoaded(),this._statusStart=this._playing=!0)}this._playing&&(this._mapReady||(this._guiManager.show(),this._southSea.setVisible(!1),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0),this._organizationDataTicker.process()&&MO.Console.find(MO.FEaiLogicConsole).statistics().department().doOrganization(this,this.onOrganizationFetch,
2),a=this._mapEntity,this.fixMatrix(a.cityRangeRenderable().matrix()),this.fixMatrix(a.cityCenterRenderable().matrix()),this.fixMatrix(a.countryFaceDisplay().matrix()),this.fixMatrix(a.countryBorderDisplay().matrix()),a.process())};MO.FEaiChartMktManageScene_onOperationDown=function(a){this._opMouseDown=!0;this._showingMktInfo||(this._operationRotationX=this._rotationX,this._operationRotationY=this._rotationY,this._operationPoint.set(a.x,a.y))};
MO.FEaiChartMktManageScene_onOperationMove=function(a){if(this._opMouseDown){var b=a.x-this._operationPoint.x;Math.abs(b)>this.__opMouseMoveThreshold&&(this._autoRotate=!1,this._operationMoved=!0,b=a.x-this._operationPoint.x,this._rotationY=this._operationRotationY-.002*b)}};
MO.FEaiChartMktManageScene_onOperationUp=function(a){this._opMouseDown=!1;if(this._showingMktInfo){this._showingMktInfo=!1;var b=document.getElementById("id_marketer_info");b.style.display="none"}else{if(!this._operationMoved){var c=this.application().desktop().canvas3d(),b=this.activeStage().region();b.camera();var d=MO.Console.find(MO.FG3dTechniqueConsole).find(c,MO.FG3dSelectTechnique).test(b,a.offsetX,a.offsetY);if(d){if(a=MO.Console.find(MO.FG3dTechniqueConsole).find(c,MO.FEaiSelectTechnique).test(b,
d,a.offsetX,a.offsetY)){this._startTranslateY=this._translateY;this._startRotateY=this._rotationY;this._startWorldScale=this._worldScale;a=a._shape._entity;if(MO.Class.isClass(a,MO.FEaiCountry3dEntity))this._targetWorldScale=1200,"China"==a.code()?this._showChina=!0:(this._countryEntity._borderShape.setVisible(!1),this._countryEntity._faceShape.setVisible(!1),b=this._provinceTable,b.setTitle("\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868"),b.setUnits(this._countryUnits),b.dirty(),b.setVisible(!1),
this._countryTable.setVisible(!0));else if(MO.Class.isClass(a,MO.FEaiProvince3dEntity)){this._targetWorldScale=3E3;d=a.resource();c=d.code();c==this._selectedProvinceCode?(b=document.getElementById("id_marketer_info"),b.style.display="",this._showingMktInfo=!0):this._selectedProvinceCode=c;b=this._provinceTable;b.setTitle(d.label()+"\u5730\u533a\u5206\u516c\u53f8\u5217\u8868");var d=this._organizationInfo._department4s,e=d.count(),f=this._provinceUnits;f.clear();for(var g=0;g<e;g++){var h=d.at(g);
if(h.provinceCode()==c&&(f.push(h),26<f.count()))break}b.setUnits(f);b.dirty()}a=a.outline2();this._targetRotateY=Math.PI-a.center.x/180*Math.PI;this._targetTranslateY=a.center.y/90*-this._targetWorldScale*1.5;this._startTick=MO.Timer.current();this._earthMoving=!0;this._autoRotate=!1}}else this._startTranslateY=this._translateY,this._startRotateY=this._rotationY%(2*Math.PI),this._startWorldScale=this._worldScale,this._targetTranslateY=0,this._targetRotateY=this._rotationY,this._targetWorldScale=
500,this._startTick=MO.Timer.current(),this._autoRotate=this._earthMoving=!0,this._countryEntity._borderShape.setVisible(!1),this._countryEntity._faceShape.setVisible(!1),b=this._provinceTable,b.setTitle("\u5927\u9646\u5730\u533a\u516c\u53f8\u5217\u8868"),b.setUnits(this._countryUnits),b.dirty(),b.setVisible(!1),this._countryTable.setVisible(!0)}this._operationMoved=!1}};MO.FEaiChartMktManageScene_onOperationWheel=function(a){a=a.deltaY;0<a?this._worldScale/=1.05:0>a&&(this._worldScale*=1.05)};
MO.FEaiChartMktManageScene_onSwitchProcess=function(a){};MO.FEaiChartMktManageScene_onSwitchComplete=function(a){};
MO.FEaiChartMktManageScene_construct=function(){this.__base.FEaiChartScene.construct.call(this);this._operationPoint=new MO.SPoint2;this._organizationDataTicker=new MO.TTicker(6E4);this._organizationInfo=MO.Class.create(MO.FEaiChartMktManageInfo);this._cameraFrom=new MO.SPoint3;this._cameraTo=new MO.SPoint3;this._ccDirection=new MO.SVector3;this._facePosition=new MO.SPoint3;this._provinceUnits=new MO.TObjects;this._countryUnits=new MO.TObjects};
MO.FEaiChartMktManageScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);this._activeStage.dataLayer();var a=this._countryTable=MO.Class.create(MO.FEaiChartMktManageCountryTable);a.setName("countryTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._provinceTable=MO.Class.create(MO.FEaiChartMktManageProvinceTable);a.setName("provinceTable");a.linkGraphicContext(this);a.setup();a.build();a.setVisible(!1);this._guiManager.register(a);this._guiManager.hide();
a=MO.Class.create(MO.FE3dOrthoCamera);a.position().set(0,0,-5E3);a.lookAt(0,0,0);a.update();var b=a.projection();b.setZnear(1);b.setZfar(1E4);b.update();this._activeStage.region().selectCamera(a);a=MO.Console.find(MO.FEaiEntityConsole);b=this._worldEntity=a.mapModule().loadWorld(this);this._readyLoader.push(b);a.cityModule().build(this,MO.FEaiCity3dEntity);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry,MO.FEaiCountry3dEntity);a._borderShape.setVisible(!1);a._faceShape.setVisible(!1);
this._readyLoader.push(a)};MO.FEaiChartMktManageScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this.processResize()};
MO.FEaiChartMktManageScene_fixMatrix=function(a){var b=MO.Window.Browser.isOrientationVertical();if(this._earthMoving){var c=(MO.Timer.current()-this._startTick)/this.__moveEarthDuration;1<c&&(c=1,this._earthMoving=!1,this._showChina&&(this._countryEntity._borderShape.setVisible(!0),this._countryEntity._faceShape.setVisible(!0),this._provinceTable.setVisible(!0),this._countryTable.setVisible(!1),this._provinceTable.dirty(),this._showChina=!1));this._translateY=this._startTranslateY+(this._targetTranslateY-
this._startTranslateY)*c;this._rotationY=this._startRotateY+(this._targetRotateY-this._startRotateY)*c;this._worldScale=this._startWorldScale+(this._targetWorldScale-this._startWorldScale)*c}b?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-320,a.ty=this._translateY,a.tz=0,a.rx=this._rotationX,a.ry=this._rotationY,a.setScale(this._worldScale,this._worldScale,this._worldScale));a.update();this._autoRotate&&(this._rotationY+=.001)};
MO.FEaiChartMktManageScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical(),b=this._countryTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(750));
b=this._provinceTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.All),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(750))};
with(MO)MO.FEaiChartMktManageTimeline=function(a){a=MO.Class.inherits(this,a,FGuiControl);a._startTime=MO.Class.register(a,new AGetSet("_startTime"));a._endTime=MO.Class.register(a,new AGetSet("_endTime"));a._data=null;a._ready=!1;a._investmentTotal=0;a._intervalMiniute=10;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new AGetSet("_triangleHeight"),
12);a._decoLineGap=MO.Class.register(a,new AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new AGetSet("_decoLineWidth"),30);a.oeUpdate=FEaiChartMktManageTimeline_oeUpdate;a.construct=FEaiChartMktManageTimeline_construct;a.sync=FEaiChartMktManageTimeline_sync;a.onPaintBegin=FEaiChartMktManageTimeline_onPaintBegin;a.on24HDataFetch=FEaiChartMktManageTimeline_on24HDataFetch;return a},MO.FEaiChartMktManageTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=
new TDate;this._endTime=new TDate},MO.FEaiChartMktManageTimeline_sync=function(){if(this._ready){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute(this._intervalMiniute);var b=this._startTime;b.assign(a);b.addDay(-1);this._endTime.assign(a)}}},MO.FEaiChartMktManageTimeline_on24HDataFetch=function(a){this._investmentTotal=0;if(a=this._data=a.content.collection)for(var b=a.length,c=0;c<b;c++)this._investmentTotal+=parseFloat(a[c].investment);this.dirty()},
MO.FEaiChartMktManageTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0,this.sync()),MO.EEventStatus.Stop},MO.FEaiChartMktManageTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,
f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),k=c-g-this.decoLineWidth(),g=d+60,l=e-30,n=l-g;b.drawLine(h,f,k,f,"#F8CB3D",3);for(var e=this.startTime(),
m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;!e.isAfter(m);){var t=e.date.getTime()-c,t=h+t/u*(k-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",1);p=e.format("HH24:00");e.addHour(1);if(r=!r)b.setFont("bold 20px Microsoft YaHei"),q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}e.date.setTime(c);e.refresh();if((q=this._data)&&!(1>q.length)){for(f=r=0;f<q.length;f++)m=parseInt(q[f].investment),m>r&&(r=m);p=1E4*n/r;m=parseInt(q[0].investment);n=l-m/1E4*
p;m=b._handle;m.lineCap="round";m.beginPath();m.moveTo(h,n);r=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(EEaiRate.Investment);for(f=1;f<q.length;f++){e.parseAuto(q[f].date);e.refresh();var t=e.date.getTime()-c,t=h+t/u*(k-h),v=l-q[f].investment/1E4*p,v=v-this._baseHeight;m.lineTo(t,v)}p=MO.Lang.Hex.format(r.findRate(0));u="#"+p.substring(2);k="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";p=MO.Lang.Hex.format(r.findRate(1));
f="#"+p.substring(2);r="rgba("+MO.Lang.Hex.parse(p.substring(2,4))+","+MO.Lang.Hex.parse(p.substring(4,6))+","+MO.Lang.Hex.parse(p.substring(6,8))+",0.5)";p=b.createLinearGradient(0,l,0,g);p.addColorStop("0",u);p.addColorStop("1",f);g=b.createLinearGradient(0,l,0,g);g.addColorStop("0",k);g.addColorStop("1",r);m.strokeStyle=p;m.fillStyle=g;m.lineWidth=4;m.stroke();m.lineTo(t,l);m.lineTo(h,l);m.lineTo(h,n);m.fill();e.date.setTime(c);e.refresh();t=-1;h=g=0;e.parseAuto(q[0].date);e.refresh();t=e.date.getHours();
for(f=0;f<q.length;f++)e.parseAuto(q[f].date),e.refresh(),l=e.date.getHours(),t==l?g+=parseInt(q[f].investment):(g>h&&(h=g,g=0),t=l);b.setFont("bold 24px Microsoft YaHei");b.drawText("24\u5c0f\u65f6\u6295\u8d44\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u5c0f\u65f6\u5cf0\u503c\uff1a");h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");t=b.textWidth(h);g=MO.Lang.Float.unitFormat(this._investmentTotal,0,0,2,0,1E4,"\u4e07");l=b.textWidth(g);k=MO.Lang.Float.unitFormat(this._investmentTotal/
24,0,0,2,0,1E4,"\u4e07");u=b.textWidth(k);f=Math.max(Math.max(t,l),u);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+f-l,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+f-t,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(k,a+q+f-u,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartDptMarketerDynamicInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentCount=MO.Class.register(a,[new MO.AGetter("_investmentCount"),new MO.APersistence("_investmentCount",MO.EDataType.Double)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._redemptionCount=MO.Class.register(a,[new MO.AGetter("_redemptionCount"),new MO.APersistence("_redemptionCount",MO.EDataType.Double)]);
a._redemptionTotal=MO.Class.register(a,[new MO.AGetter("_redemptionTotal"),new MO.APersistence("_redemptionTotal",MO.EDataType.Double)]);a._netinvestmentCount=MO.Class.register(a,[new MO.AGetter("_netinvestmentCount"),new MO.APersistence("_netinvestmentCount",MO.EDataType.Double)]);a._netinvestmentTotal=MO.Class.register(a,[new MO.AGetter("_netinvestmentTotal"),new MO.APersistence("_netinvestmentTotal",MO.EDataType.Double)]);a._interestCount=MO.Class.register(a,[new MO.AGetter("_interestCount"),new MO.APersistence("_interestCount",
MO.EDataType.Double)]);a._interestTotal=MO.Class.register(a,[new MO.AGetter("_interestTotal"),new MO.APersistence("_interestTotal",MO.EDataType.Double)]);a._performanceCount=MO.Class.register(a,[new MO.AGetter("_performanceCount"),new MO.APersistence("_performanceCount",MO.EDataType.Double)]);a._performanceTotal=MO.Class.register(a,[new MO.AGetter("_performanceTotal"),new MO.APersistence("_interestTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),
new MO.APersistence("_customerCount",MO.EDataType.Int32)]);a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);a._rankDayUnits=MO.Class.register(a,[new MO.AGetter("_rankDayUnits"),new MO.APersistence("_rankDayUnits",MO.EDataType.Objects,MO.FEaiChartDptMarketerDynamicRankUnit)]);a._rankWeekUnits=MO.Class.register(a,[new MO.AGetter("_rankWeekUnits"),new MO.APersistence("_rankWeekUnits",MO.EDataType.Objects,MO.FEaiChartDptMarketerDynamicRankUnit)]);
a._rankMonthUnits=MO.Class.register(a,[new MO.AGetter("_rankMonthUnits"),new MO.APersistence("_rankMonthUnits",MO.EDataType.Objects,MO.FEaiChartDptMarketerDynamicRankUnit)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartDptMarketerDynamicUnit)]);return a};
MO.FEaiChartDptMarketerDynamicRankUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._departmentLabel=MO.Class.register(a,[new MO.AGetter("_departmentLabel"),new MO.APersistence("_departmentLabel",MO.EDataType.String)]);a._marketerLabel=MO.Class.register(a,[new MO.AGetter("_marketerLabel"),new MO.APersistence("_marketerLabel",MO.EDataType.String)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);
a._redemptionTotal=MO.Class.register(a,[new MO.AGetter("_redemptionTotal"),new MO.APersistence("_redemptionTotal",MO.EDataType.Double)]);a._netinvestmentTotal=MO.Class.register(a,[new MO.AGetter("_netinvestmentTotal"),new MO.APersistence("_netinvestmentTotal",MO.EDataType.Double)]);a._interestTotal=MO.Class.register(a,[new MO.AGetter("_interestTotal"),new MO.APersistence("_interestTotal",MO.EDataType.Double)]);a._performanceTotal=MO.Class.register(a,[new MO.AGetter("_performanceTotal"),new MO.APersistence("_performanceTotal",
MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Int32)]);a._customerTotal=MO.Class.register(a,[new MO.AGetter("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Int32)]);return a};
MO.FEaiChartDptMarketerDynamicUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._departmentLabel=MO.Class.register(a,[new MO.AGetter("_departmentLabel"),new MO.APersistence("_departmentLabel",MO.EDataType.String)]);a._marketerLabel=MO.Class.register(a,[new MO.AGetter("_marketerLabel"),new MO.APersistence("_marketerLabel",MO.EDataType.String)]);a._customerLabel=
MO.Class.register(a,[new MO.AGetter("_customerLabel"),new MO.APersistence("_customerLabel",MO.EDataType.String)]);a._customerCard=MO.Class.register(a,[new MO.AGetter("_customerCard"),new MO.APersistence("_customerCard",MO.EDataType.String)]);a._customerPhone=MO.Class.register(a,[new MO.AGetter("_customerPhone"),new MO.APersistence("_customerPhone",MO.EDataType.String)]);a._customerActionCd=MO.Class.register(a,[new MO.AGetter("_customerActionCd"),new MO.APersistence("_customerActionCd",MO.EDataType.Uint8)]);
a._customerActionAmount=MO.Class.register(a,[new MO.AGetter("_customerActionAmount"),new MO.APersistence("_customerActionAmount",MO.EDataType.Double)]);a._customerActionInterest=MO.Class.register(a,[new MO.AGetter("_customerActionInterest"),new MO.APersistence("_customerActionInterest",MO.EDataType.Double)]);return a};
MO.FEaiChartDptMarketerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),
0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=
MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._investmentTotal=MO.Class.register(a,new MO.AGetter("_investmentTotal"));a._redemptionTotal=MO.Class.register(a,new MO.AGetter("_redemptionTotal"));a._netinvestmentTotal=MO.Class.register(a,new MO.AGetter("_netinvestmentTotal"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,
new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartDptMarketerProcessor_onDynamicData;a.construct=MO.FEaiChartDptMarketerProcessor_construct;a.allocUnit=MO.FEaiChartDptMarketerProcessor_allocUnit;a.allocShape=MO.FEaiChartDptMarketerProcessor_allocShape;a.setup=
MO.FEaiChartDptMarketerProcessor_setup;a.calculateCurrent=MO.FEaiChartDptMarketerProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartDptMarketerProcessor_focusEntity;a.process=MO.FEaiChartDptMarketerProcessor_process;a.dispose=MO.FEaiChartDptMarketerProcessor_dispose;return a};
MO.FEaiChartDptMarketerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankDayUnits());var c=this._units;c.append(b.units());this._tableInterval=(c=c.count())?6E4*this._intervalMinute/c:6E4*this._intervalMinute;this._tableTick=0;c=this._eventDataChanged;c.rankUnits=a;c.rankDayUnits=b._rankDayUnits;c.rankWeekUnits=b._rankWeekUnits;c.rankMonthUnits=b._rankMonthUnits;c.unit=null;this.processDataChangedListener(c)};
MO.FEaiChartDptMarketerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiChartDptMarketerDynamicInfo);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);this._eventDataChanged=new MO.SEvent(this)};
MO.FEaiChartDptMarketerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartDptMarketerDynamicUnit));return a};MO.FEaiChartDptMarketerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartDptMarketerProcessor_calculateCurrent=function(){var a=this._dynamicInfo,b=a.investmentCount(),c=a.redemptionCount(),d=a.interestCount(),e=a.performanceCount(),f=a.investmentTotal(),g=a.redemptionTotal();a.netinvestmentTotal();for(var a=this._units,h=a.count(),k=0;k<h;k++){var l=a.at(k),n=l.customerActionCd(),m=l.customerActionAmount(),l=l.customerActionInterest();1==n?(b-=m,e-=m,f-=m):2==n&&(c-=m,d-=l,g-=m)}this._investmentTotal=f;this._redemptionTotal=g;this._netinvestmentTotal=f-g;
this._invementDayCurrent=b;this._redemptionDayCurrent=c;this._netinvestmentDayCurrent=b-c;this._interestDayCurrent=d;this._performanceDayCurrent=e};
MO.FEaiChartDptMarketerProcessor_focusEntity=function(a){if(1==a.customerActionCd()){var b=a.customerCard();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.customerActionAmount(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}}b=this._eventDataChanged;
b.rankUnits=this._rankUnits;b.unit=a;this.processDataChangedListener(b)};
MO.FEaiChartDptMarketerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.department().doMarketerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d)}a=
MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};
MO.FEaiChartDptMarketerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartDptMarketerScene=function(a){a=MO.Class.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartDepartmentMarketer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._24HLastTick=0;a._24HTrendInterval=3E5;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartDptMarketerScene_onOperationDown;
a.onInvestmentDataChanged=MO.FEaiChartDptMarketerScene_onInvestmentDataChanged;a.onOperationVisibility=MO.FEaiChartDptMarketerScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartDptMarketerScene_onProcessReady;a.onProcess=MO.FEaiChartDptMarketerScene_onProcess;a.onSwitchProcess=MO.FEaiChartDptMarketerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartDptMarketerScene_onSwitchComplete;a.setup=MO.FEaiChartDptMarketerScene_setup;a.showParticle=MO.FEaiChartDptMarketerScene_showParticle;a.showFace=
MO.FEaiChartDptMarketerScene_showFace;a.fixMatrix=MO.FEaiChartDptMarketerScene_fixMatrix;a.processResize=MO.FEaiChartDptMarketerScene_processResize;return a};MO.FEaiChartDptMarketerScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartDptMarketerScene_onInvestmentDataChanged=function(a){var b=a.unit,c=this._liveTable;c.setRankDayUnits(a.rankDayUnits);c.setRankWeekUnits(a.rankWeekUnits);c.setRankMonthUnits(a.rankMonthUnits);c.pushUnit(b);c.dirty()};
MO.FEaiChartDptMarketerScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartDptMarketerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartDptMarketerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);a=MO.Timer.current();a-this._24HLastTick>this._24HTrendInterval&&
(this._timeline.sync(),this._24HLastTick=a);this._processor.process();var a=this._logoBar,b=this._processor;0<b.invementDayCurrent()&&(a.findComponent("investmentTotalCount").setValue(parseInt(b.investmentTotal()).toString()),a.findComponent("redemptionTotalCount").setValue(parseInt(b.redemptionTotal()).toString()),a.findComponent("netinvestmentTotalCount").setValue(parseInt(b.netinvestmentTotal()).toString()),a.findComponent("investmentTotal").setValue(parseInt(b.invementDayCurrent()).toString()),
a.findComponent("redemptionTotal").setValue(parseInt(b.redemptionDayCurrent()).toString()),a.findComponent("netinvestmentTotal").setValue(parseInt(b.netinvestmentDayCurrent()).toString()));this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};MO.FEaiChartDptMarketerScene_onSwitchProcess=function(a){};MO.FEaiChartDptMarketerScene_onSwitchComplete=function(a){};
MO.FEaiChartDptMarketerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.marketer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartDptMarketerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();
a=this._timeline=MO.Class.create(MO.FEaiChartDptMarketerTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.sync();a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FEaiChartDptMarketerTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);
this._readyLoader.push(a)};MO.FEaiChartDptMarketerScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};
MO.FEaiChartDptMarketerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartDptMarketerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.8,a.ty=-11,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartDptMarketerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(260));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(780));b.setHeight(250);b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.All),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),
b.setBottom(10),b.setWidth(750))};
MO.FEaiChartDptMarketerTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rankLineMonthImage=null;a._rankLineWeeksImage=null;a._rankLineDayImage=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._dayImage=null;a._weeksImage=null;a._monthImage=null;a._tableCount=
0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a.onImageLoad=MO.FEaiChartDptMarketerTable_onImageLoad;a.onPaintBegin=MO.FEaiChartDptMarketerTable_onPaintBegin;a.construct=MO.FEaiChartDptMarketerTable_construct;a.setup=MO.FEaiChartDptMarketerTable_setup;a.pushUnit=MO.FEaiChartDptMarketerTable_pushUnit;a.setRankDayUnits=MO.FEaiChartDptMarketerTable_setRankDayUnits;a.setRankWeekUnits=MO.FEaiChartDptMarketerTable_setRankWeekUnits;
a.setRankMonthUnits=MO.FEaiChartDptMarketerTable_setRankMonthUnits;a.drawRow=MO.FEaiChartDptMarketerTable_drawRow;a.dispose=MO.FEaiChartDptMarketerTable_dispose;return a};MO.FEaiChartDptMarketerTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartDptMarketerTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u7406\u8d22\u5e08\u4e1a\u7ee9\u5c55\u793a\u4e2d\u5fc3");b.drawText("\u7406\u8d22\u5e08\u4e1a\u7ee9\u5c55\u793a\u4e2d\u5fc3",d+.5*(f-c),e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;
d+=6;b.drawGridImage(this._rankLineMonthImage,d,e+this._rankTitleStart,f-22,this._rankWeeksHeight,this._rankLinePadding);b.drawGridImage(this._rankLineWeeksImage,d,e+this._rankTitleStart+174,f-22,139,this._rankLinePadding);b.drawGridImage(this._rankLineDayImage,d,e+this._rankTitleStart+175+139,f-22,137,this._rankLinePadding);b.drawImage(this._dayImage,d,e+44,56,130);b.drawImage(this._weeksImage,d,e+177,56,137);b.drawImage(this._monthImage,d,e+317,56,130);if(this._rank)for(f=rankUnit.count(),e+=90,
d=0;d<f;d++)c=rankUnit.at(d),this.drawRow(b,c,!0,d,a,e+this._rankRowHeight*d,g)};MO.FEaiChartDptMarketerTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartDptMarketerTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/marketer/right.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/marketer/title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineMonthImage=a.load("{eai.resource}/marketer/rank2.png");b.addLoadListener(this,this.onImageLoad);
b=this._rankLineWeeksImage=a.load("{eai.resource}/marketer/rank3.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineDayImage=a.load("{eai.resource}/marketer/rank4.png");b.addLoadListener(this,this.onImageLoad);b=this._rank1Image=a.load("{eai.resource}/live/1.png");b.addLoadListener(this,this.onImageLoad);b=this._rank2Image=a.load("{eai.resource}/live/2.png");b.addLoadListener(this,this.onImageLoad);b=this._rank3Image=a.load("{eai.resource}/live/3.png");b.addLoadListener(this,this.onImageLoad);
b=this._dayImage=a.load("{eai.resource}/marketer/day.png");b.addLoadListener(this,this.onImageLoad);b=this._weeksImage=a.load("{eai.resource}/marketer/weeks.png");b.addLoadListener(this,this.onImageLoad);b=this._monthImage=a.load("{eai.resource}/marketer/month.png");b.addLoadListener(this,this.onImageLoad);a=this._gridMonthRank=MO.Class.create(MO.FGuiGridControl);a.setLocation(50,112);a.setSize(800,900);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);
a.headPadding().set(0,0,0,10);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");b.setLabel();b.setDataName("month_images");b.setWidth(40);
b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthDepartmentLabel");b.setLabel("\u516c\u53f8");b.setDataName("month_department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthMarketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("month_marketer_label");b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);
b.setName("monthInvestmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("month_investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("monthRedemptionTotal");b.setLabel("\u8d4e\u56de");b.setDataName("month_redemption_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(118);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("monthNetinvestmentTotal");b.setLabel("\u51c0\u6295");b.setDataName("month_netinvestment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(127);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("monthCustomerCount");
b.setLabel("\u5ba2\u6237\u6570");b.setDataName("month_customer_count");b.setWidth(80);b.setPadding(1,1,0,1);a.pushColumn(b);this.push(a);a=this._gridWeeksRank=MO.Class.create(MO.FGuiGridControl);a.setDisplayHead(!1);a.setLocation(50,290);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font=
"Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("weeksRank");b.setLabel();b.setDataName("weeks_images");b.setWidth(40);b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("weeksDepartmentLabel");b.setLabel("\u516c\u53f8");
b.setDataName("weeks_department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("weeksMarketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("weeks_marketer_label");b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("weeksInvestmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("weeks_investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("weeksRedemptionTotal");b.setLabel("\u8d4e\u56de");b.setDataName("weeks_redemption_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(118);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("weeksNetinvestmentTotal");
b.setLabel("\u51c0\u6295");b.setDataName("weeks_netinvestment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(127);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("weeksCustomerCount");b.setLabel("\u5ba2\u6237\u6570");b.setDataName("weeks_customer_count");b.setWidth(80);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridDayRank=MO.Class.create(MO.FGuiGridControl);
a.setDisplayHead(!1);a.setLocation(50,430);a.setSize(800,130);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnText);b.setName("");b.setLabel("");b.setDataName("");b.setWidth(56);b.setPadding(0,1,0,
1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");b.setLabel();b.setDataName("images");b.setWidth(40);b.setPadding(0,1,0,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("departmentLabel");b.setLabel("\u516c\u53f8");b.setDataName("department_label");b.setWidth(100);b.setPadding(0,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("marketer_label");
b.setWidth(98);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentTotal");b.setLabel("\u6295\u8d44");b.setDataName("investment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(123);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("redemptionTotal");b.setLabel("\u8d4e\u56de");b.setDataName("redemption_total");
b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(118);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("netinvestmentTotal");b.setLabel("\u51c0\u6295");b.setDataName("netinvestment_total");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(127);b.setPadding(1,1,1,
1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCount");b.setLabel("\u5ba2\u6237\u6570");b.setDataName("customer_count");b.setWidth(80);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setLocation(50,570);a.setSize(800,430);a.setPadding(0,0,0,10);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(32);a.setHeadBackColor("#122A46");a.headFont().font=
"Microsoft YaHei";a.headFont().size=20;a.headFont().color="#00B2F2";a.setRowHeight(30);a.rowFont().font="Microsoft YaHei";a.rowFont().size=18;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(110);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("departmentLabel");b.setLabel("\u516c\u53f8");b.setDataName("department_label");
b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("marketerLabel");b.setLabel("\u7406\u8d22\u5e08");b.setDataName("marketer_label");b.setWidth(110);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCard");b.setLabel("\u57ce\u5e02");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");
b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("customerAmount");b.setLabel("\u6295\u8d44\u989d(\u5143)");b.setDataName("customer_amount");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?
(this._tableCount=11,this._rankStart=100,this._rankTitleStart=5,this._rankHeight=174,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankWeeksHeight=this._rankHeight=174,this._rankMonthHeight=139,this._rankDayHeight=137,this._rankRowHeight=
40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartDptMarketerTable_setRankDayUnits=function(a){var b=this._gridDayRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("images","{eai.resource}/marketer/"+(d+1)+".png");f.set("department_label",g);f.set("marketer_label",e.marketerLabel());f.set("investment_total",e.investmentTotal());f.set("redemption_total",e.redemptionTotal());f.set("netinvestment_total",
e.netinvestmentTotal());f.set("customer_count",e.customerTotal());b.pushRow(f)}};
MO.FEaiChartDptMarketerTable_setRankWeekUnits=function(a){var b=this._gridWeeksRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("weeks_images","{eai.resource}/marketer/"+(d+1)+".png");f.set("weeks_department_label",g);f.set("weeks_marketer_label",e.marketerLabel());f.set("weeks_investment_total",e.investmentTotal());f.set("weeks_redemption_total",
e.redemptionTotal());f.set("weeks_netinvestment_total",e.netinvestmentTotal());f.set("weeks_customer_count",e.customerTotal());b.pushRow(f)}};
MO.FEaiChartDptMarketerTable_setRankMonthUnits=function(a){var b=this._gridMonthRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.departmentLabel(),h=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(g);h&&(g=h.label());f.set("month_images","{eai.resource}/marketer/"+(d+1)+".png");f.set("month_department_label",g);f.set("month_marketer_label",e.marketerLabel());f.set("month_investment_total",e.investmentTotal());f.set("month_redemption_total",
e.redemptionTotal());f.set("month_netinvestment_total",e.netinvestmentTotal());f.set("month_customer_count",e.customerTotal());b.pushRow(f)}};
MO.FEaiChartDptMarketerTable_pushUnit=function(a){if(!a)return null;var b=a.departmentLabel(),c=MO.Console.find(MO.FEaiResourceConsole).departmentModule().findByFullLabel(b);c&&(b=c.label());var c=a.customerCard(),d=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(c),c="";d&&(c=d.label());var d=this._gridControl,e=d.allocRow();e.set("record_date",a.recordDate());e.set("department_label",b);e.set("marketer_label",a.marketerLabel());e.set("customer_city",c);e.set("customer_info",a.customerLabel()+
" - "+a.customerPhone());1==a.customerActionCd()?e.set("customer_amount",a.customerActionAmount()):e.set("customer_amount",-a.customerActionAmount());d.insertRow(e);b=this._units;b.unshift(a);this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiChartDptMarketerTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartDptMarketerTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._ready=!1;a._investmentTotal=0;a._intervalMiniute=10;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new MO.AGetSet("_triangleHeight"),
12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartDptMarketerTimeline_oeUpdate;a.construct=MO.FEaiChartDptMarketerTimeline_construct;a.sync=MO.FEaiChartDptMarketerTimeline_sync;a.drawTrend=MO.FEaiChartDptMarketerTimeline_drawTrend;a.onPaintBegin=MO.FEaiChartDptMarketerTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiChartDptMarketerTimeline_on24HDataFetch;return a};
MO.FEaiChartDptMarketerTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiChartDptMarketerTrendInfo)};
MO.FEaiChartDptMarketerTimeline_sync=function(){if(this._ready){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute(this._intervalMiniute);var b=this._startTime;b.assign(a);b.addDay(-1);var c=this._endTime;c.assign(a);MO.Console.find(MO.FEaiLogicConsole).statistics().department().doMarketerTrend(this,this.on24HDataFetch,b.format(),c.format())}}};
MO.FEaiChartDptMarketerTimeline_on24HDataFetch=function(a){this._trendInfo.unserializeSignBuffer(a.sign,a.content,!0);this.dirty()};MO.FEaiChartDptMarketerTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0,this.sync()),MO.EEventStatus.Stop};
MO.FEaiChartDptMarketerTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){var u=this._startTime,p=this._trendInfo.units(),r=p.count(),q=p.first(),t=a._handle;t.lineCap="round";g=1E4*g/l;q=f-q[b]/1E4*g;t.beginPath();t.moveTo(c,q);q=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(l=1;l<r;l++){var v=p.get(l),w=v[b];u.parseAuto(v.recordDate());u.refresh();v=u.date.getTime()-h;v=c+v/k*(e-c);w=f-w/1E4*g;w-=this._baseHeight;t.lineTo(v,w)}c=MO.Lang.Hex.format(q.findRate(0));
b="rgba("+MO.Lang.Hex.parse(c.substring(2,4))+","+MO.Lang.Hex.parse(c.substring(4,6))+","+MO.Lang.Hex.parse(c.substring(6,8))+",0.5)";c=MO.Lang.Hex.format(q.findRate(1));c="rgba("+MO.Lang.Hex.parse(c.substring(2,4))+","+MO.Lang.Hex.parse(c.substring(4,6))+","+MO.Lang.Hex.parse(c.substring(6,8))+",0.5)";e=a.createLinearGradient(0,f,0,d);e.addColorStop("0",n);e.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",b);a.addColorStop("1",c);t.strokeStyle=e;t.lineWidth=4;t.stroke()};
MO.FEaiChartDptMarketerTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-30;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+60,l=e-30,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",3);for(var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",1);p=e.format("HH24:00");e.addHour(1);
if(r=!r)b.setFont("bold 20px Microsoft YaHei"),q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f.units())&&!q.isEmpty()){p=q.first();for(var v=0,m=q.count(),r=0;r<m;r++){var t=q.get(r),w=t.investment();w>v&&(v=w);t=t.redemption();t>v&&(v=t)}this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");this.drawTrend(b,"_redemption",h,k,g,l,n,c,u,v,"#0088FF","#0000FF");e.date.setTime(c);e.refresh();h=-1;k=g=0;e.parseAuto(p.recordDate());
e.refresh();h=e.date.getHours();for(r=0;r<m;r++)t=q.get(r),e.parseAuto(t.recordDate()),e.refresh(),l=e.date.getHours(),h==l?g+=t.redemption():(g>k&&(k=g,g=0),h=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=30;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");h=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");g=b.textWidth(h);k=MO.Lang.Float.unitFormat(f.redemptionTotal(),0,0,2,0,1E4,"\u4e07");l=b.textWidth(k);
n=MO.Lang.Float.unitFormat(f.netinvestmentTotal(),0,0,2,0,1E4,"\u4e07");u=b.textWidth(n);f=MO.Lang.Float.unitFormat(f.interestTotal(),0,0,2,0,1E4,"\u4e07");m=b.textWidth(f);r=Math.max(Math.max(Math.max(g,l),u),m);b.drawText("\u6295\u8d44\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(h,a+q+r-g,d+0,"#00B5F6");b.drawText("\u8d4e\u56de\u603b\u989d\uff1a",a,d+22+5,"#00CFFF");b.drawText(k,a+q+r-l,d+22+5,"#00B5F6");b.drawText("\u51c0\u6295\u603b\u989d\uff1a",a,d+44+10,"#00CFFF");b.drawText(n,a+q+r-u,d+
44+10,"#00B5F6");b.drawText("\u5229\u606f\u603b\u989d\uff1a",a,d+66+15,"#00CFFF");b.drawText(f,a+q+r-m,d+66+15,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartDptMarketerTrendInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._redemptionTotal=MO.Class.register(a,[new MO.AGetter("_redemptionTotal"),new MO.APersistence("_redemptionTotal",MO.EDataType.Double)]);a._netinvestmentTotal=MO.Class.register(a,[new MO.AGetter("_netinvestmentTotal"),new MO.APersistence("_netinvestmentTotal",MO.EDataType.Double)]);
a._interestTotal=MO.Class.register(a,[new MO.AGetter("_interestTotal"),new MO.APersistence("_interestTotal",MO.EDataType.Double)]);a._performanceTotal=MO.Class.register(a,[new MO.AGetter("_performanceTotal"),new MO.APersistence("_performanceTotal",MO.EDataType.Double)]);a._units=MO.Class.register(a,[new MO.AGetter("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiChartDptMarketerTrendUnit)]);return a};
MO.FEaiChartDptMarketerTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,
[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._interest=MO.Class.register(a,[new MO.AGetter("_interest"),new MO.APersistence("_interest",MO.EDataType.Double)]);a._performance=MO.Class.register(a,[new MO.AGetter("_performance"),new MO.APersistence("_performance",MO.EDataType.Double)]);return a};
MO.FEaiChartPerfMarketerChart=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._backgroundImage=null;a._dayImage=null;a._monthImage=null;a._cumulativeImage=null;a.__chartBackgroundImage=null;a._rankLinePadding=null;a._backgroundPadding=null;a._logoPadding=null;a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._monthStart=MO.Class.register(a,new MO.AGetSet("_monthStart"));a._monthEnd=MO.Class.register(a,new MO.AGetSet("_monthEnd"));
a._yearStart=MO.Class.register(a,new MO.AGetSet("_yearStart"));a._yearEnd=MO.Class.register(a,new MO.AGetSet("_yearEnd"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),
10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.setup=MO.FEaiChartPerfMarketerChart_setup;a.onImageLoad=MO.FEaiChartPerfMarketerChart_onImageLoad;a.oeUpdate=MO.FEaiChartPerfMarketerChart_oeUpdate;a.construct=MO.FEaiChartPerfMarketerChart_construct;a.sync=MO.FEaiChartPerfMarketerChart_sync;a.drawTrend=MO.FEaiChartPerfMarketerChart_drawTrend;a.onPaintBegin=MO.FEaiChartPerfMarketerChart_onPaintBegin;a.on24HDataFetch=MO.FEaiChartPerfMarketerChart_on24HDataFetch;a.onCalculate=
MO.FEaiChartPerfMarketerChart_onCalculate;return a};MO.FEaiChartPerfMarketerChart_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._logoPadding=new MO.SPadding(0,0,0,0);this._monthStart=new MO.TDate;this._monthEnd=new MO.TDate;this._yearStart=new MO.TDate;this._yearEnd=new MO.TDate};MO.FEaiChartPerfMarketerChart_onImageLoad=function(){this.dirty()};
MO.FEaiChartPerfMarketerChart_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._backgroundImage=a.load("{eai.resource}/performence_marketer/bg2.png");b.addLoadListener(this,this.onImageLoad);b=this._chartBackgroundImage=a.load("{eai.resource}/performence_marketer/right.png");b.addLoadListener(this,this.onImageLoad);b=this._dayImage=a.load("{eai.resource}/performence_marketer/3.png");b.addLoadListener(this,this.onImageLoad);b=this._monthImage=a.load("{eai.resource}/performence_marketer/2.png");
b.addLoadListener(this,this.onImageLoad);b=this._cumulativeImage=a.load("{eai.resource}/performence_marketer/1.png");b.addLoadListener(this,this.onImageLoad)};MO.FEaiChartPerfMarketerChart_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartPerfMarketerChart_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m,u,p,r,q,t){d=c.count();n=c.first();l=1E4*l/u;var v=k-n[e]/1E4*l;b.parseAuto(n.recordDate());b.refresh();n=b.date.getTime();u=a._handle;u.lineCap="round";u.beginPath();u.moveTo(f,v);for(var w=0;w<d;w++){var x=c.get(w),v=x[e];b.parseAuto(x.recordDate());b.refresh();x=b.date.getTime()-n;x=f+x/m*(h-f);v=k-v/1E4*l;v-=this._baseHeight;u.lineTo(x,v)}v=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);
w=MO.Lang.Hex.format(v.findRate(0));w.substring(2);MO.Lang.Hex.parse(w.substring(2,4));MO.Lang.Hex.parse(w.substring(4,6));MO.Lang.Hex.parse(w.substring(6,8));w=MO.Lang.Hex.format(v.findRate(1));w.substring(2);MO.Lang.Hex.parse(w.substring(2,4));MO.Lang.Hex.parse(w.substring(4,6));MO.Lang.Hex.parse(w.substring(6,8));g=a.createLinearGradient(0,k,0,g);g.addColorStop("0",p);g.addColorStop("1",r);u.strokeStyle=g;u.lineWidth=2;u.stroke();for(p=0;p<d;p++)x=c.get(p),v=x[e],b.parseAuto(x.recordDate()),b.refresh(),
r=b.date.getTime()-n,x=f+r/m*(h-f),v=k-v/1E4*l,v-=this._baseHeight,a.drawCircle(x,v,5,2,t,q)};MO.FEaiChartPerfMarketerChart_onCalculate=function(){};
MO.FEaiChartPerfMarketerChart_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.left,f=c.width,g=c.height;a=c.left+433;var c=c.left+c.width-20,h=f-a;b.drawGridImage(this._backgroundImage,e,d,f,g,this._logoPadding);e+=20;g=(g-164)/3;b.drawGridImage(this._dayImage,e,d+41,82,g,this._logoPadding);b.drawGridImage(this._dayImage,e,d+41,82,g,this._logoPadding);b.drawGridImage(this._chartBackgroundImage,a,d+41,h,g,this._logoPadding);
b.drawGridImage(this._monthImage,e,d+g+82,82,g,this._logoPadding);b.drawGridImage(this._chartBackgroundImage,a,d+g+82,h,g,this._logoPadding);b.drawGridImage(this._cumulativeImage,e,d+2*g+123,82,g,this._logoPadding);b.drawGridImage(this._chartBackgroundImage,a,d+2*g+123,h,g,this._logoPadding);a+=this.decoLineWidth();var c=c-this.decoLineWidth(),f=d+41,h=f+g-75,d=this.startTime(),e=this.endTime(),k=24,l=e.hour/k,n=e.date.getTime()-d.date.getTime(),e=d.date.getTime(),m,u=0,p=f+g-15;b.setFont("20px Microsoft YaHei");
d.date.getTime();for(var r=(c-a)/k,q=0;q<=k;q++)m=q,0!=q&&(m=10>q?"0"+q:q),m+="h",u=b.textWidth(m),b.drawText(m,a+r*q-u/2,p,"#eeb92f");d.date.setTime(e);d.refresh();var t=this._trendInfo;if(null!=t&&(n=t._day._ticks)&&!n.isEmpty()){for(var r=n.first(),v=0,u=n.count(),q=0;q<u;q++)m=n.get(q),m=m.investment(),m>v&&(v=m);this.drawTrend(b,d,n,l,"_investment",a,f,c,h,155,e,864E5,v,"#fb2509","#fb2509","#fff","#fb2509");this.drawTrend(b,d,n,l,"_redemption",a,f,c,h,155,e,864E5,v,"#457eff","#457eff","#fff",
"#457eff");this.drawTrend(b,d,n,l,"_netinvestment",a,f,c,h,155,e,864E5,v,"#02fb49","#02fb49","#fff","#02fb49");var l=-1,w=v=0;d.parseAuto(r.recordDate());d.refresh();l=d.date.getHours();for(q=0;q<u;q++)m=n.get(q),d.parseAuto(m.recordDate()),d.refresh(),k=d.date.getHours(),l==k?v+=m.investment():(v>w&&(w=v,v=0),l=k);var k=this.monthStart(),l=this.monthEnd(),w=k.day,x=l.day/w;l.date.getTime();k.date.getTime();l=k.date.getTime();u=0;b.setFont("20px Microsoft YaHei");v=w;r=(c-a)/(w-1);for(q=1;q<=v;q++)m=
q,0!=q&&(m=10>q?"0"+q:q,u=b.textWidth(q)),b.drawText(m,a+r*(q-1)-u/2,p+g+38,"#eeb92f");if((n=t._month._ticks)&&!n.isEmpty()){r=n.first();v=0;u=n.count();for(q=0;q<u;q++)m=n.get(q),m=m.investment(),m>v&&(v=m);t=280;q=f+t;m=h+t;this.drawTrend(b,k,n,x,"_redemption",a,q,c,m,155,l,864E5*(w-1),v,"#457eff","#457eff","#fff","#457eff");this.drawTrend(b,k,n,x,"_investment",a,q,c,m,155,l,864E5*(w-1),v,"#fb2509","#fb2509","#fff","#fb2509");this.drawTrend(b,k,n,x,"_netinvestment",a,q,c,m,155,l,864E5*(w-1),v,"#02fb49",
"#02fb49","#fff","#02fb49");var w=-1,y=x=0;k.parseAuto(r.recordDate());k.refresh();w=k.date.getDay();for(q=0;q<u;q++)m=n.get(q),k.parseAuto(m.recordDate()),k.refresh(),v=k.date.getDay(),w==v?x+=m.investment():(x>y&&(y=x,x=0),w=v);w=this.yearStart();u=this.yearEnd();q=w.month;x=u.month/q;n=u.date.getTime()-w.date.getTime();y=w.date.getTime();b.setFont("20px Microsoft YaHei");var z=q;w.date.setTime(y);w.refresh();r=(c-a)/12;for(q=1;12>=q;q++)m=10>q?"0"+q:q,u=b.textWidth(m),w.addMonth(1),b.drawText(m,
a+(r*(q-1)-u/2),p+2*(g+38+1),"#eeb92f");w.date.setTime(y);w.refresh();if((z=this._trendInfo._year._ticks)&&!z.isEmpty()){r=z.first();v=0;u=z.count();for(q=0;q<u;q++)m=z.get(q),m=m.investment(),m>v&&(v=m);var g=-1,A=p=0;w.parseAuto(r.recordDate());w.refresh();g=w.date.getMonth();for(q=0;q<u;q++)m=z.get(q),w.parseAuto(m.recordDate()),w.refresh(),r=w.date.getMonth(),g==r?p+=m.investment():(p>A&&(A=p,p=0),g=r);t*=2;g=f+t;h+=t;this.drawTrend(b,w,z,x,"_redemption",a,g,c,h,155,y,n,v,"#457eff","#457eff",
"#fff","#457eff");this.drawTrend(b,w,z,x,"_investment",a,g,c,h,155,y,n,v,"#fb2509","#fb2509","#fff","#fb2509");this.drawTrend(b,w,z,x,"_netinvestment",a,g,c,h,155,y,n,v,"#02fb49","#02fb49","#fff","#02fb49");w.date.setTime(y);w.refresh();k.date.setTime(l);k.refresh();d.date.setTime(e);d.refresh()}}}}};
MO.FEaiChartPerfMarketerHead=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._logoimg=null;a._backgroundImage=null;a._titleImage=null;a._rankLinePadding=null;a._backgroundPadding=null;a._logoPadding=null;a.onImageLoad=MO.FEaiChartPerfMarketerHead_onImageLoad;a.onPaintBegin=MO.FEaiChartPerfMarketerHead_onPaintBegin;a.construct=MO.FEaiChartPerfMarketerHead_construct;a.setup=MO.FEaiChartPerfMarketerHead_setup;a.dispose=MO.FEaiChartPerfMarketerHead_dispose;return a};
MO.FEaiChartPerfMarketerHead_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoimg=a.load("{eai.resource}/performence_marketer/logo.png");b.addLoadListener(this,this.onImageLoad);b=this._titleImage=a.load("{eai.resource}/performence_marketer/telte.png");b.addLoadListener(this,this.onImageLoad)};
MO.FEaiChartPerfMarketerHead_construct=function(){this.__base.FGuiControl.construct.call(this);this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(0,0,0,0);this._logoPadding=new MO.SPadding(0,0,0,0)};MO.FEaiChartPerfMarketerHead_onImageLoad=function(){this.dirty()};
MO.FEaiChartPerfMarketerHead_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic;a=a.rectangle;var c=a.width;b.drawGridImage(this._logoimg,a.left,a.top,202,176,this._logoPadding);b.drawGridImage(this._titleImage,c/2-364,70,728,67,this._logoPadding);b.setFont("bold 24px Microsoft YaHei");b.drawCircle(c-565,176,10,0,"#fb2509","#fb2509");b.drawText("\u6295\u8d44",c-550,184,"#fb2509");b.drawCircle(c-435,176,10,0,"#457eff","#457eff");b.drawText("\u8d4e\u56de",c-420,
184,"#457eff");b.drawCircle(c-305,176,10,0,"#02fb49","#02fb49");b.drawText("\u51c0\u6295",c-290,184,"#02fb49")};MO.FEaiChartPerfMarketerHead_dispose=function(){};
MO.FEaiChartPerfMarketerInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._day=MO.Class.register(a,[new MO.AGetter("_day"),new MO.APersistence("_day",MO.EDataType.Object,MO.FEaiChartPerfMarketerInfoSpan)]);a._month=MO.Class.register(a,[new MO.AGetter("_month"),new MO.APersistence("_month",MO.EDataType.Object,MO.FEaiChartPerfMarketerInfoSpan)]);a._year=MO.Class.register(a,[new MO.AGetter("_year"),new MO.APersistence("_year",MO.EDataType.Object,MO.FEaiChartPerfMarketerInfoSpan)]);
return a};
MO.FEaiChartPerfMarketerInfoSpan=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);a._memberRegister=MO.Class.register(a,
[new MO.AGetter("_memberRegister"),new MO.APersistence("_memberRegister",MO.EDataType.Uint32)]);a._customerRegister=MO.Class.register(a,[new MO.AGetter("_customerRegister"),new MO.APersistence("_customerRegister",MO.EDataType.Uint32)]);a._ticks=MO.Class.register(a,[new MO.AGetter("_ticks"),new MO.APersistence("_ticks",MO.EDataType.Objects,MO.FEaiChartPerfMarketerInfoTick)]);return a};
MO.FEaiChartPerfMarketerInfoTick=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetter("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetter("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._redemption=MO.Class.register(a,[new MO.AGetter("_redemption"),new MO.APersistence("_redemption",MO.EDataType.Double)]);a._netinvestment=MO.Class.register(a,
[new MO.AGetter("_netinvestment"),new MO.APersistence("_netinvestment",MO.EDataType.Double)]);return a};
MO.FEaiChartPerfMarketerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,
new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,
new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._performanceDate=MO.Class.register(a,new MO.AGetter("_performanceDate"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));
a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a._eventPerformanceDateChanged=null;a._listenersPerformanceDateChanged=MO.Class.register(a,new MO.AListener("_listenersPerformanceDateChanged",
"PerformanceDataChanged"));a.onDynamicData=MO.FEaiChartPerfMarketerProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiChartPerfMarketerProcessor_on24HDataFetch;a.onPerformanceDate=MO.FEaiChartPerfMarketerProcessor_onPerformanceDate;a.construct=MO.FEaiChartPerfMarketerProcessor_construct;a.allocUnit=MO.FEaiChartPerfMarketerProcessor_allocUnit;a.allocShape=MO.FEaiChartPerfMarketerProcessor_allocShape;a.setup=MO.FEaiChartPerfMarketerProcessor_setup;a.calculateCurrent=MO.FEaiChartPerfMarketerProcessor_calculateCurrent;
a.focusEntity=MO.FEaiChartPerfMarketerProcessor_focusEntity;a.process=MO.FEaiChartPerfMarketerProcessor_process;a.dispose=MO.FEaiChartPerfMarketerProcessor_dispose;a._eventDayDataChanged=null;a._monthStartTime=MO.Class.register(a,new MO.AGetter("_monthStartTime"));a._monthEndTime=MO.Class.register(a,new MO.AGetter("_monthEndTime"));a._yearStartTime=MO.Class.register(a,new MO.AGetter("_yearStartTime"));a._yearEndTime=MO.Class.register(a,new MO.AGetter("_yearEndTime"));return a};
MO.FEaiChartPerfMarketerProcessor_onPerformanceDate=function(a){var b=this._performanceDate;b.beginDate=this._24HBeginDate;b.endDate=this._24HEndDate;b.unserializeSignBuffer(a.sign,a.content,!0);b.monthStarDate=this._monthStartTime;b.monthEndDate=this._monthEndTime;b.yearStarDate=this._yearStartTime;b.yearEndDate=this._yearEndTime;this.processPerformanceDataChangedListener(b)};MO.FEaiChartPerfMarketerProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiChartPerfMarketerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartPerfMarketerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._performanceDate=MO.Class.create(MO.FEaiChartPerfMarketerInfo);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);
this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this);this._listenersPerformanceDateChanged=new MO.SEvent(this);this._monthStartTime=new MO.TDate;this._monthEndTime=new MO.TDate;this._yearStartTime=new MO.TDate;this._yearEndTime=new MO.TDate};MO.FEaiChartPerfMarketerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};
MO.FEaiChartPerfMarketerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartPerfMarketerProcessor_calculateCurrent=function(){var a=this._performanceDate,b=a._year,c=a._month,d=a._day;if(b&&c&&d){var a=d.investment(),e=d.netinvestment(),f=d.redemption(),g=d.customerRegister(),d=d.memberRegister(),h=c.investment(),k=c.netinvestment(),l=c.redemption(),n=c.customerRegister(),c=c.memberRegister(),m=b.investment(),u=b.netinvestment(),p=b.redemption(),r=b.customerRegister(),b=b.memberRegister(),q=this._units,t=q.count();console.log(t+"...............................");
for(var v=0;v<t;v++){var w=q.at(v);w.customerActionCd();w.customerActionAmount();w.customerActionInterest()}this._dayInvestment=a;this._dayNetinvestment=e;this._dayRedemption=f;this._dayCustomerRegister=g;this._dayMemberRegister=d;this._monthInvestment=h;this._monthNetinvestment=k;this._monthRedemption=l;this._monthCustomerRegister=n;this._monthMemberRegister=c;this._yearInvestment=m;this._yearNetinvestment=u;this._yearRedemption=p;this._yearCustomerRegister=r;this._yearhMemberRegister=b}};
MO.FEaiChartPerfMarketerProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;b.unit=
a;this.processDataChangedListener(b)};
MO.FEaiChartPerfMarketerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){var b=a.currentDate();b.truncMinute();this._dateSetup||(this._endDate.assign(b),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var a=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(b);c.assign(d);c=this._24HBeginDate;c.assign(b);c.truncHour();c.addHour(-b.hour);this._24HEndDate.assign(b);
var e=this._monthStartTime;e.assign(b);e.addDay(-b.day);var f=this._monthEndTime;f.assign(b);var g=this._yearStartTime;g.assign(b);g.truncDay();g.setDay(1);g.setMonth(1);g.refresh();b=this._yearEndTime;b.assign(g);b.addYear(1);a.achievement().doDynamic(this,this.onPerformanceDate,c.format(),d.format(),e.format(),f.format(),g.format(),b.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(d=this._units,d.isEmpty()||(d=d.shift(),this.focusEntity(d)),this.calculateCurrent(),this._tableTick=
a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};
MO.FEaiChartPerfMarketerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this._eventDayDataChanged=MO.Lang.Object.dispose(this._eventDayDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartPerfMarketerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._optionMapCountry=!1;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._head=null;a._charts=null;a._calculate=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.on24HDataChanged=MO.FEaiChartPerfMarketerScene_on24HDataChanged;
a.onProcessReady=MO.FEaiChartPerfMarketerScene_onProcessReady;a.onProcess=MO.FEaiChartPerfMarketerScene_onProcess;a.onSwitchProcess=MO.FEaiChartPerfMarketerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartPerfMarketerScene_onSwitchComplete;a.setup=MO.FEaiChartPerfMarketerScene_setup;a.showFace=MO.FEaiChartPerfMarketerScene_showFace;a.fixMatrix=MO.FEaiChartPerfMarketerScene_fixMatrix;a.processResize=MO.FEaiChartPerfMarketerScene_processResize;a.onPerformanceDataChangedListener=MO.FEaiChartPerfMarketerScene_onPerformanceDataChangedListener;
return a};MO.FEaiChartPerfMarketerScene_onPerformanceDataChangedListener=function(a){var b=this._charts;b.setStartTime(a.beginDate);b.setEndTime(a.endDate);b.setMonthStart(a.monthStarDate);b.setMonthEnd(a.monthEndDate);b.setYearStart(a.yearStarDate);b.setYearEnd(a.yearEndDate);b.setTrendInfo(a);b.dirty()};
MO.FEaiChartPerfMarketerScene_on24HDataChanged=function(a){var b=this._timeline;b.startTime().assign(a.beginDate);b.endTime().assign(a.endDate);b.trendInfo().unserializeSignBuffer(a.sign,a.content,!0);b.dirty()};MO.FEaiChartPerfMarketerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartPerfMarketerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=this._processor;0<b._yearInvestment&&(a.findComponent("dayInvestment").setValue(parseInt(b._dayInvestment).toString()),
a.findComponent("dayNetinvestment").setValue(parseInt(b._dayNetinvestment).toString()),a.findComponent("dayRedemption").setValue(parseInt(b._dayRedemption).toString()),a.findComponent("dayCustomerRegister").setValue(parseInt(b._dayCustomerRegister).toString()),a.findComponent("dayMemberRegister").setValue(parseInt(b._dayMemberRegister).toString()),a.findComponent("monthInvestment").setValue(parseInt(b._monthInvestment).toString()),a.findComponent("monthNetinvestment").setValue(parseInt(b._monthNetinvestment).toString()),
a.findComponent("monthRedemption").setValue(parseInt(b._monthRedemption).toString()),a.findComponent("monthCustomerRegister").setValue(parseInt(b._monthCustomerRegister).toString()),a.findComponent("monthMemberRegister").setValue(parseInt(b._monthMemberRegister).toString()),a.findComponent("yearInvestment").setValue(parseInt(b._yearInvestment).toString()),a.findComponent("yearNetinvestment").setValue(parseInt(b._yearNetinvestment).toString()),a.findComponent("yearRedemption").setValue(parseInt(b._yearRedemption).toString()),
a.findComponent("yearCustomerRegister").setValue(parseInt(b._yearCustomerRegister).toString()),a.findComponent("yearhMemberRegister").setValue(parseInt(b._yearhMemberRegister).toString()));this._nowTicker.process()&&this._nowDate.setNow()}};MO.FEaiChartPerfMarketerScene_onSwitchProcess=function(a){};MO.FEaiChartPerfMarketerScene_onSwitchComplete=function(a){};
MO.FEaiChartPerfMarketerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.performence-marketer.LogoBar");b.setDisplayOrder(10);b.findComponent("dayCustomerRegister").setBasicUnitText("\u4eba");b.findComponent("dayMemberRegister").setBasicUnitText("\u4eba");b.findComponent("monthCustomerRegister").setBasicUnitText("\u4eba");b.findComponent("monthMemberRegister").setBasicUnitText("\u4eba");
b.findComponent("yearCustomerRegister").setBasicUnitText("\u4eba");b.findComponent("yearhMemberRegister").setBasicUnitText("\u4eba");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartPerfMarketerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.add24HDataChangedListener(this,this.on24HDataChanged);b.addPerformanceDataChangedListener(this,this.onPerformanceDataChangedListener);b=b.display();this.fixMatrix(b.matrix());a.push(b);a=this._head=MO.Class.create(MO.FEaiChartPerfMarketerHead);
a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);a=this._charts=MO.Class.create(MO.FEaiChartPerfMarketerChart);a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();MO.Console.find(MO.FEaiEntityConsole).cityModule().build(this)};MO.FEaiChartPerfMarketerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};
MO.FEaiChartPerfMarketerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartPerfMarketerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._head;a?(b.setDockCd(MO.EUiDock.RightTop),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):
(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Bottom),b.setTop(26),b.setRight(0),b.setLeft(11),b.setBottom(0),b.setHeight(176),b.setWidth(1894));b=this._charts;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setTop(0),
b.setRight(24),b.setLeft(24),b.setBottom(20),b.setHeight(862),b.setWidth(1876))};
MO.FEaiChartStatMarketerBarChart=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._infoProvince=MO.Class.register(a,new MO.AGetSet("_infoProvince"));a._provinceTextFont=MO.Class.register(a,new MO.AGetSet("_provinceTextFont"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,
new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartStatMarketerBarChart_oeUpdate;a.construct=MO.FEaiChartStatMarketerBarChart_construct;a.sync=MO.FEaiChartStatMarketerBarChart_sync;a.drawTrend=MO.FEaiChartStatMarketerBarChart_drawTrend;
a.onPaintBegin=MO.FEaiChartStatMarketerBarChart_onPaintBegin;a.on24HDataFetch=MO.FEaiChartStatMarketerBarChart_on24HDataFetch;return a};
MO.FEaiChartStatMarketerBarChart_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiLogicInfoCustomerTrend);this._infoProvince=MO.Class.create(MO.FEaiChartStatMarketerInfo);this._provinceTextFont=new MO.SUiFont;this._provinceTextFont.size=20;this._provinceTextFont.bold=!0;this._provinceTextFont.color="#59FDE9"};
MO.FEaiChartStatMarketerBarChart_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartStatMarketerBarChart_onPaintBegin=function(a){if(this._ready){var b=this._infoProvince._provinces;if(b){this.__base.FGuiControl.onPaintBegin.call(this,a);var c=a.graphic,d=a.rectangle;a=d.top+d.height;var e=d.left+5,f=d.left+d.width-5;this.triangleWidth();this.decoLineGap();var g=(d.width+d.left)/71,h=(d.width+d.left)/33,k=0,l="#ba0010 #ba0010 #ba0010 #ba0010 #ba4a00 #b97800 #b9b300 #6ab000 #009845 #028071 #115e75 #164c6f #193d6a #242e61 #3c2460".split(" ");c._handle.beginPath();for(var n=
0;n<b.count();n++){var m=b.get(n);k<m.investmentTotal()&&(k=m.investmentTotal())}c.drawLine(e,a-70,f,a-70,"#F8CB3D",3);var f=0,u=this._provinceTextFont,p=1*d.height/15*13/22,d=1*d.height/15*9/22;if(b)for(n=0;n<b.count();n++){var m=b.get(n),r=m.code(),r=MO.Console.find(MO.FEaiResourceConsole).provinceModule().findByCode(r),q="";if(r&&r.label())for(q=r.label(),f++,m.investmentTotal(),c.setFont("9px Microsoft YaHei"),c.drawTextVertical(q,e+f*h,a-45,u),m=m.investmentTotal(),m=m>=k?15:m>=.93*k?14:m>=.86*
k?13:m>=.8*k?12:m>=.73*k?11:m>=.66*k?10:m>=.6*k?9:m>=.53*k?8:m>=.46*k?7:m>=.4*k?6:m>=.33*k?5:m>=.26*k?4:m>=.2*k?3:m>=.13*k?2:1,r=1;r<=m;r++)c.fillRectangle(e+f*h,a-80-r*d-r*p,g,p,l[15-r])}}}};
MO.FEaiChartStatMarketerInfo=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Uint32)]);a._investmentAvg=MO.Class.register(a,[new MO.AGetter("_investmentAvg"),new MO.APersistence("_investmentAvg",MO.EDataType.Double)]);a._provinces=
MO.Class.register(a,[new MO.AGetter("_provinces"),new MO.APersistence("_provinces",MO.EDataType.Objects,MO.FEaiChartStatMarketerInfoProvince)]);return a};
MO.FEaiChartStatMarketerInfoProvince=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._code=MO.Class.register(a,[new MO.AGetter("_code"),new MO.APersistence("_code",MO.EDataType.String)]);a._label=MO.Class.register(a,[new MO.AGetter("_label"),new MO.APersistence("_label",MO.EDataType.String)]);a._investmentTotal=MO.Class.register(a,[new MO.AGetter("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetter("_customerCount"),
new MO.APersistence("_customerCount",MO.EDataType.Uint32)]);a._investmentAvg=MO.Class.register(a,[new MO.AGetter("_investmentAvg"),new MO.APersistence("_investmentAvg",MO.EDataType.Double)]);return a};
MO.FEaiChartStatMarketerProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._infoProvince=MO.Class.register(a,new MO.AGetter("_infoProvince"));a._365BeginDate=MO.Class.register(a,new MO.AGetter("_365BeginDate"));
a._365EndDate=MO.Class.register(a,new MO.AGetter("_365EndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=
MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=
MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._eventInfoProvinceChanged=null;a._listenersInfoProvinceDataChanged=MO.Class.register(a,new MO.AListener("_listenersInfoProvinceDataChanged","InfoProvinceDataChanged"));
a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartStatMarketerProcessor_onDynamicData;a.onInfoProvince=MO.FEaiChartStatMarketerProcessor_onInfoProvince;a.construct=MO.FEaiChartStatMarketerProcessor_construct;a.allocUnit=MO.FEaiChartStatMarketerProcessor_allocUnit;a.allocShape=MO.FEaiChartStatMarketerProcessor_allocShape;a.setup=MO.FEaiChartStatMarketerProcessor_setup;a.calculateCurrent=
MO.FEaiChartStatMarketerProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartStatMarketerProcessor_focusEntity;a.process=MO.FEaiChartStatMarketerProcessor_process;a.dispose=MO.FEaiChartStatMarketerProcessor_dispose;a._peopleCounts=MO.Class.register(a,new MO.AGetter("_peopleCounts"));return a};MO.FEaiChartStatMarketerProcessor_onInfoProvince=function(a){var b=this._infoProvince;b.unserializeSignBuffer(a.sign,a.content,!0);this.processInfoProvinceDataChangedListener(b)};
MO.FEaiChartStatMarketerProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartStatMarketerProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._365BeginDate=new MO.TDate;this._365EndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);
this._infoProvince=MO.Class.create(MO.FEaiChartStatMarketerInfo);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this);this._peopleCounts=new MO.TDate};MO.FEaiChartStatMarketerProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};
MO.FEaiChartStatMarketerProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartStatMarketerProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiChartStatMarketerProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;b.unit=
a;this.processDataChangedListener(b)};
MO.FEaiChartStatMarketerProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);
b.customer().doProvince(this,this.onInfoProvince)}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();a._investmentPoolFreeCount=this._unitPool.frees().count()}};
MO.FEaiChartStatMarketerProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartStatMarketerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._provinceTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartStatMarketerScene_onOperationDown;a.on24HDataChanged=MO.FEaiChartStatMarketerScene_on24HDataChanged;
a.onInfoProvinceDataChanged=MO.FEaiChartStatMarketerScene_onInfoProvinceDataChanged;a.onOperationVisibility=MO.FEaiChartStatMarketerScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartStatMarketerScene_onProcessReady;a.onProcess=MO.FEaiChartStatMarketerScene_onProcess;a.onSwitchProcess=MO.FEaiChartStatMarketerScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartStatMarketerScene_onSwitchComplete;a.setup=MO.FEaiChartStatMarketerScene_setup;a.showParticle=MO.FEaiChartStatMarketerScene_showParticle;
a.showFace=MO.FEaiChartStatMarketerScene_showFace;a.fixMatrix=MO.FEaiChartStatMarketerScene_fixMatrix;a.processResize=MO.FEaiChartStatMarketerScene_processResize;return a};MO.FEaiChartStatMarketerScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartStatMarketerScene_on24HDataChanged=function(a){this._timeline.dirty()};
MO.FEaiChartStatMarketerScene_onInfoProvinceDataChanged=function(a){for(var b=this._timeline,c=a.provinces(),d=c.count(),e=0,f=0;f<d;f++)var g=c.at(f),e=e+g.customerCount();this._logoBar.findComponent("investmentDay").setValue(e.toString());b.setInfoProvince(a);b.dirty();b=this._provinceTable;b.setInfoProvince(a);b.setRankUnits();b.dirty()};
MO.FEaiChartStatMarketerScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiChartStatMarketerScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartStatMarketerScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=this._processor;
0<b.invementDayCurrent()&&a.findComponent("investmentTotal").setValue(parseInt(b.invementTotalCurrent()).toString());this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};MO.FEaiChartStatMarketerScene_onSwitchProcess=function(a){};MO.FEaiChartStatMarketerScene_onSwitchComplete=function(a){};
MO.FEaiChartStatMarketerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.statistic.LogoBar");b.findComponent("investmentDay").setBasicUnitText("\u4eba");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartStatMarketerProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.add24HDataChangedListener(this,this.on24HDataChanged);
b.addInfoProvinceDataChangedListener(this,this.onInfoProvinceDataChanged);b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=MO.Class.create(MO.FEaiChartStatMarketerBarChart);a.setName("Timeline");a.linkGraphicContext(this);a.build();this._guiManager.register(a);a=this._provinceTable=MO.Class.create(MO.FEaiChartStatMarketerTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);
a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiChartStatMarketerScene_showParticle=function(a,b){var c=this._particle,d=b.location();c.color().set(1,1,0,1);for(var e=0;4>e;e++){var f=parseInt(100*Math.random());Math.random();c.setItemCount(f);c.position().assign(d);c.position().z=a.currentZ();c.setDelay(10*e);c.setSpeed(4+.4*e);c.setAcceleration(0);c.setAttenuation(.8);c.start()}};
MO.FEaiChartStatMarketerScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartStatMarketerScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartStatMarketerScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical();this.fixMatrix(this._processor.display().matrix());var b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(100)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(660),b.setBottom(280));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),
b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(920)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(30),b.setRight(660));b.setHeight(250);b=this._provinceTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.All),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setWidth(1060),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),
b.setBottom(10),b.setWidth(640))};
MO.FEaiChartStatMarketerTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiChartStatMarketerTable_onImageLoad;a.onPaintBegin=MO.FEaiChartStatMarketerTable_onPaintBegin;a.construct=MO.FEaiChartStatMarketerTable_construct;a.setup=MO.FEaiChartStatMarketerTable_setup;a.setRankUnits=MO.FEaiChartStatMarketerTable_setRankUnits;a.pushUnit=MO.FEaiChartStatMarketerTable_pushUnit;a.drawRow=MO.FEaiChartStatMarketerTable_drawRow;a.dispose=MO.FEaiChartStatMarketerTable_dispose;a._infoProvince=MO.Class.register(a,new MO.AGetSet("_infoProvince"));return a};
MO.FEaiChartStatMarketerTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartStatMarketerTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle;a=c.left;var d=c.top,e=c.width;b.drawGridImage(this._backgroundImage,a,d,e,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u56fd\u5404\u7701\u6295\u8d44\u603b\u989d\u5c55\u793a\u4e2d\u5fc3");b.drawText("\u5168\u56fd\u5404\u7701\u6295\u8d44\u603b\u989d\u5c55\u793a\u4e2d\u5fc3",a+.5*(e-c),d+76,"#59FDE9");b.setFont(this._rowFontStyle)};
MO.FEaiChartStatMarketerTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20);this._infoProvince=MO.Class.create(MO.FEaiChartStatMarketerInfo)};
MO.FEaiChartStatMarketerTable_setup=function(){(this._backgroundImage=MO.Console.find(MO.FImageConsole).load("{eai.resource}/live/grid.png")).addLoadListener(this,this.onImageLoad);var a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,120);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=
20;a.headFont().color="#00B2F2";a.setRowHeight(28);a.rowFont().font="Microsoft YaHei";a.rowFont().size=20;a.rowFont().color="#59FDE9";var b=MO.Class.create(MO.FGuiGridColumnText);b.setName("provinceName");b.setLabel("\u7701\u4efd");b.setDataName("provinceName");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");b.setLabel("\u603b\u6295\u8d44\u989d(\u5143)");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setLowerColor("#EB6C03");
b.setHighColor("#FF7200");b.setHighestColor("#FED826");b.setNegativeColor("#FF0000");b.setWidth(160);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCount");b.setLabel("\u6295\u8d44\u4eba\u6570");b.setDataName("customerCount");b.setTextAlign(MO.EUiAlign.Right);b.setWidth(100);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAvg");b.setLabel("\u4eba\u5747\u6295\u8d44(\u5143)");
b.setDataName("investmentAvg");b.setNormalColor("#59FDE9");b.setHighColor("#FF7200");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=15;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=
19,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartStatMarketerTable_setRankUnits=function(a){a=this._gridControl;a.clearRows();var b=this._infoProvince._provinces;if(b)for(var c=0;c<b.count();c++){var d=b.get(c),e=d.code(),f=a.allocRow();(e=MO.Console.find(MO.FEaiResourceConsole).provinceModule().findByCode(e))&&e.label()&&(e.label(),f.set("provinceName",e.label()),f.set("investment",d.investmentTotal().toFixed(2)),f.set("customerCount",d.customerCount()),f.set("investmentAvg",d.investmentAvg().toFixed(2)),a.pushRow(f))}};
MO.FEaiChartStatMarketerTable_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("model_label",a.modelLabel());d.set("investment_amount",a.investment());d.set("investment_gain",a.gain());d.set("bank_gain",a.bankGain());c.insertRow(d);b=this._units;b.unshift(a);
this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiChartStatMarketerTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCockpitDataProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dataTicker=null;a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=
MO.Class.register(a,new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=
MO.Class.register(a,new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;
a._tableTick=1;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiCockpitDataProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiCockpitDataProcessor_on24HDataFetch;a.construct=MO.FEaiCockpitDataProcessor_construct;a.allocUnit=
MO.FEaiCockpitDataProcessor_allocUnit;a.allocShape=MO.FEaiCockpitDataProcessor_allocShape;a.setup=MO.FEaiCockpitDataProcessor_setup;a.calculateCurrent=MO.FEaiCockpitDataProcessor_calculateCurrent;a.focusEntity=MO.FEaiCockpitDataProcessor_focusEntity;a.process=MO.FEaiCockpitDataProcessor_process;a.dispose=MO.FEaiCockpitDataProcessor_dispose;return a};MO.FEaiCockpitDataProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiCockpitDataProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiCockpitDataProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this)};MO.FEaiCockpitDataProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};MO.FEaiCockpitDataProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiCockpitDataProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiCockpitDataProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);null!=this._mapEntity&&this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;
b.unit=a;this.processDataChangedListener(b)};
MO.FEaiCockpitDataProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);c=this._24HBeginDate;
c.assign(a);c.truncMinute(15);c.addDay(-1);d=this._24HEndDate;d.assign(a);d.truncMinute(15);b.marketer().doCustomerTrend(this,this.on24HDataFetch,c.format(),d.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);null!=this._mapEntity&&this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();
a._investmentPoolFreeCount=this._unitPool.frees().count()}};MO.FEaiCockpitDataProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiCockpitDepartmentModule=function(a){a=MO.Class.inherits(this,a,MO.FEaiCockpitModule);a._dataTicker=null;a._panel=null;a.construct=MO.FEaiCockpitDepartmentModule_construct;a.setup=MO.FEaiCockpitDepartmentModule_setup;a.process=MO.FEaiCockpitDepartmentModule_process;a.processResize=MO.FEaiCockpitDepartmentModule_processResize;a.dispose=MO.FEaiCockpitDepartmentModule_dispose;return a};
MO.FEaiCockpitDepartmentModule_construct=function(){this.__base.FEaiCockpitModule.construct.call(this);this._dataTicker=new MO.TTicker(6E4)};MO.FEaiCockpitDepartmentModule_setup=function(){var a=this._panel=MO.Class.create(MO.FEaiCockpitDepartmentPanel);a.linkGraphicContext(this);a.setup();this.processResize()};MO.FEaiCockpitDepartmentModule_process=function(){this._dataTicker.process()};
MO.FEaiCockpitDepartmentModule_processResize=function(){var a=MO.Window.Browser.isOrientationVertical(),b=this._panel;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),b.setBottom(10),b.setWidth(760))};
MO.FEaiCockpitDepartmentModule_dispose=function(){this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this.__base.FEaiCockpitModule.dispose.call(this)};
MO.FEaiCockpitDepartmentPanel=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiCockpitDepartmentPanel_onImageLoad;a.onPaintBegin=MO.FEaiCockpitDepartmentPanel_onPaintBegin;a.construct=MO.FEaiCockpitDepartmentPanel_construct;a.setup=MO.FEaiCockpitDepartmentPanel_setup;a.setRankUnits=MO.FEaiCockpitDepartmentPanel_setRankUnits;a.pushUnit=MO.FEaiCockpitDepartmentPanel_pushUnit;a.drawRow=MO.FEaiCockpitDepartmentPanel_drawRow;a.dispose=MO.FEaiCockpitDepartmentPanel_dispose;return a};MO.FEaiCockpitDepartmentPanel_onImageLoad=function(){this.dirty()};
MO.FEaiCockpitDepartmentPanel_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",d+.5*(f-
c),e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;b.drawGridImage(this._rankLineImage,d+6,e+this._rankTitleStart,f-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(f-167),e+3,198,40);if(this._rank)for(d=rankUnit.count(),e+=90,f=0;f<d;f++)c=rankUnit.at(f),this.drawRow(b,c,!0,f,a,e+this._rankRowHeight*f,g)};
MO.FEaiCockpitDepartmentPanel_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiCockpitDepartmentPanel_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);
a=this._gridRank=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!1);a.setDisplayHead(!1);a.setLocation(50,170);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(40);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");
b.setLabel();b.setDataName("image");b.setWidth(110);b.setPadding(1,1,1,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customer_city");b.setLabel("");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("label_phone");b.setLabel("");b.setDataName("label_phone");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");
b.setLabel("");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,332);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setTop(332);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);
a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");
b.setDataName("customer_city");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAmount");b.setLabel("\u6295\u8d44\u989d");b.setDataName("investment_amount");b.cellPadding().right=10;b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("modelLabel");b.setLabel("\u6295\u8d44\u4ea7\u54c1");b.setDataName("model_label");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentGain");b.setLabel("\u5e74\u5316\u6536\u76ca");b.setDataName("investment_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");
b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("bankGain");b.setLabel("\u94f6\u884c\u6536\u76ca");b.setDataName("bank_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,
this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=
51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiCockpitDepartmentPanel_setRankUnits=function(a){var b=this._gridRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.card(),g=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(g),h="";g&&(h=g.label());f.set("image","{eai.resource}/live/"+(d+1)+".png");f.set("customer_city",h);f.set("label_phone",e.label()+" - "+e.phone());f.set("investment",e.investment());b.pushRow(f)}};
MO.FEaiCockpitDepartmentPanel_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("model_label",a.modelLabel());d.set("investment_amount",a.investment());d.set("investment_gain",a.gain());d.set("bank_gain",a.bankGain());c.insertRow(d);b=this._units;b.unshift(a);
this._lineScroll-=this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiCockpitDepartmentPanel_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCockpitModule=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a.construct=MO.FEaiCockpitModule_construct;a.setup=MO.FEaiCockpitModule_setup;a.process=MO.FEaiCockpitModule_process;a.dispose=MO.FEaiCockpitModule_dispose;return a};MO.FEaiCockpitModule_construct=function(){this.__base.FObject.construct.call(this)};MO.FEaiCockpitModule_setup=function(){};MO.FEaiCockpitModule_process=function(){};MO.FEaiCockpitModule_dispose=function(){this.__base.FObject.dispose.call(this)};
MO.FEaiCockpitModuleManager=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._modules=MO.Class.register(a,new MO.AGetter("_modules"));a.construct=MO.FEaiCockpitModuleManager_construct;a.setup=MO.FEaiCockpitModuleManager_setup;a.processResize=MO.FEaiCockpitModuleManager_processResize;a.process=MO.FEaiCockpitModuleManager_process;a.dispose=MO.FEaiCockpitModuleManager_dispose;return a};
MO.FEaiCockpitModuleManager_construct=function(){this.__base.FObject.construct.call(this);this._modules=new MO.TDictionary};MO.FEaiCockpitModuleManager_setup=function(){var a=this._departmentModule=MO.Class.create(MO.FEaiCockpitDepartmentModule);a.linkGraphicContext(this);a.setup();this._modules.set("department",a)};MO.FEaiCockpitModuleManager_process=function(){};MO.FEaiCockpitModuleManager_processResize=function(){for(var a=this._modules,b=a.count(),c=0;c<b;c++)a.at(c).processResize()};
MO.FEaiCockpitModuleManager_dispose=function(){this._modules=MO.Lang.Object.dispose(this._modules,!0);this.__base.FObject.dispose.call(this)};
MO.FEaiCockpitProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,
new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,
new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=
null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiCockpitProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiCockpitProcessor_on24HDataFetch;a.construct=MO.FEaiCockpitProcessor_construct;a.allocUnit=MO.FEaiCockpitProcessor_allocUnit;
a.allocShape=MO.FEaiCockpitProcessor_allocShape;a.setup=MO.FEaiCockpitProcessor_setup;a.calculateCurrent=MO.FEaiCockpitProcessor_calculateCurrent;a.focusEntity=MO.FEaiCockpitProcessor_focusEntity;a.process=MO.FEaiCockpitProcessor_process;a.dispose=MO.FEaiCockpitProcessor_dispose;return a};MO.FEaiCockpitProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiCockpitProcessor_onDynamicData=function(a){var b=this._dynamicInfo;b.unserializeSignBuffer(a.sign,a.content,!0);a=this._rankUnits;a.assign(b.rankUnits());var c=this._units;c.append(b.units());this._tableInterval=(b=c.count())?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiCockpitProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this)};MO.FEaiCockpitProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};MO.FEaiCockpitProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiCockpitProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units,d=c.count(),e=0;e<d;e++)var f=c.at(e),b=b-f.investment(),a=a-f.investment();this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiCockpitProcessor_focusEntity=function(a){var b=a.card();if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment(),d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);null!=this._mapEntity&&this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=this._rankUnits;
b.unit=a;this.processDataChangedListener(b)};
MO.FEaiCockpitProcessor_process=function(){var a=MO.Console.find(MO.FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=MO.Console.find(MO.FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.marketer().doCustomerDynamic(this,this.onDynamicData,c.format(),d.format());c.assign(d);c=this._24HBeginDate;
c.assign(a);c.truncMinute(15);c.addDay(-1);d=this._24HEndDate;d.assign(a);d.truncMinute(15);b.marketer().doCustomerTrend(this,this.on24HDataFetch,c.format(),d.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units,b.isEmpty()||(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);null!=this._mapEntity&&this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();
a._investmentPoolFreeCount=this._unitPool.frees().count()}};MO.FEaiCockpitProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiCockpitScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.Cockpit;a._optionMapCountry=!1;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiCockpitScene_onOperationDown;a.onOperationVisibility=MO.FEaiCockpitScene_onOperationVisibility;
a.onProcessReady=MO.FEaiCockpitScene_onProcessReady;a.onProcess=MO.FEaiCockpitScene_onProcess;a.onSwitchProcess=MO.FEaiCockpitScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiCockpitScene_onSwitchComplete;a.setup=MO.FEaiCockpitScene_setup;a.showFace=MO.FEaiCockpitScene_showFace;a.fixMatrix=MO.FEaiCockpitScene_fixMatrix;a.processResize=MO.FEaiCockpitScene_processResize;return a};MO.FEaiCockpitScene_onOperationDown=function(a){this._countryEntity._startTime=0};
MO.FEaiCockpitScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};MO.FEaiCockpitScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiCockpitScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&(a&&
document.body.removeChild(a),a=this._countryEntity,a.start(),this.processLoaded(),this._statusStart=this._playing=!0)}this._playing&&(a=this._countryEntity,a.introAnimeDone()||a.process(),this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0))};MO.FEaiCockpitScene_onSwitchProcess=function(a){};
MO.FEaiCockpitScene_onSwitchComplete=function(a){};
MO.FEaiCockpitScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._moduleManager=MO.Class.create(MO.FEaiCockpitModuleManager);b.linkGraphicContext(this);b.setup();var b=b._departmentModule._panel,c=b.makeRenderable();b.updateRenderable();c.matrix();a.pushRenderable(c);a=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.customer.LogoBar");this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);
a.cityModule().build(this);a=this._countryEntity=a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiCockpitScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};
MO.FEaiCockpitScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};MO.FEaiCockpitScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical(),b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));this._moduleManager.processResize()};
MO.FEaiCockpitTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiCockpitTable_onImageLoad;a.onPaintBegin=MO.FEaiCockpitTable_onPaintBegin;a.construct=MO.FEaiCockpitTable_construct;a.setup=MO.FEaiCockpitTable_setup;a.setRankUnits=MO.FEaiCockpitTable_setRankUnits;a.pushUnit=MO.FEaiCockpitTable_pushUnit;a.drawRow=MO.FEaiCockpitTable_drawRow;a.dispose=MO.FEaiCockpitTable_dispose;return a};MO.FEaiCockpitTable_onImageLoad=function(){this.dirty()};
MO.FEaiCockpitTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);b.setFont(this._headFontStyle);c=b.textWidth("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)");b.drawText("\u5168\u7403\u5b9e\u65f6\u6295\u8d44\u6570\u636e\u5c55\u793a\u4e2d\u5fc3(\u4e2d\u56fd)",d+.5*(f-c),e+76,"#59FDE9");
b.setFont(this._rowFontStyle);e+=this._rankStart;b.drawGridImage(this._rankLineImage,d+6,e+this._rankTitleStart,f-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(f-167),e+3,198,40);if(this._rank)for(d=rankUnit.count(),e+=90,f=0;f<d;f++)c=rankUnit.at(f),this.drawRow(b,c,!0,f,a,e+this._rankRowHeight*f,g)};
MO.FEaiCockpitTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiCockpitTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);a=this._gridRank=
MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!1);a.setDisplayHead(!1);a.setLocation(50,170);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(40);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");b.setLabel();
b.setDataName("image");b.setWidth(110);b.setPadding(1,1,1,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customer_city");b.setLabel("");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("label_phone");b.setLabel("");b.setDataName("label_phone");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");
b.setLabel("");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,332);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setTop(332);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);
a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");
b.setDataName("customer_city");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAmount");b.setLabel("\u6295\u8d44\u989d");b.setDataName("investment_amount");b.cellPadding().right=10;b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("modelLabel");b.setLabel("\u6295\u8d44\u4ea7\u54c1");b.setDataName("model_label");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentGain");b.setLabel("\u5e74\u5316\u6536\u76ca");b.setDataName("investment_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");
b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("bankGain");b.setLabel("\u94f6\u884c\u6536\u76ca");b.setDataName("bank_gain");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.setWidth(120);b.cellPadding().right=10;b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,
this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=
51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiCockpitTable_setRankUnits=function(a){var b=this._gridRank;b.clearRows();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d),f=b.allocRow(),g=e.card(),g=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(g),h="";g&&(h=g.label());f.set("image","{eai.resource}/live/"+(d+1)+".png");f.set("customer_city",h);f.set("label_phone",e.label()+" - "+e.phone());f.set("investment",e.investment());b.pushRow(f)}};
MO.FEaiCockpitTable_pushUnit=function(a){if(!a)return null;var b=a.card(),c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow();d.set("record_date",a.recordDate());d.set("customer_city",b);d.set("customer_info",a.label()+" - "+a.phone());d.set("model_label",a.modelLabel());d.set("investment_amount",a.investment());d.set("investment_gain",a.gain());d.set("bank_gain",a.bankGain());c.insertRow(d);b=this._units;b.unshift(a);this._lineScroll-=
this._rowHeight;b.count()>this._tableCount&&b.pop()};MO.FEaiCockpitTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiCockpitTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,
new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiCockpitTimeline_oeUpdate;a.construct=MO.FEaiCockpitTimeline_construct;a.sync=MO.FEaiCockpitTimeline_sync;a.drawTrend=MO.FEaiCockpitTimeline_drawTrend;a.onPaintBegin=MO.FEaiCockpitTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiCockpitTimeline_on24HDataFetch;return a};
MO.FEaiCockpitTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiLogicInfoCustomerTrend)};MO.FEaiCockpitTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiCockpitTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){n=this._startTime;m=this._trendInfo.units();var u=m.count(),p=m.first(),r=a._handle;r.lineCap="round";var q=1E4*g/l;g=f-p[b]/1E4*q;r.beginPath();r.moveTo(c,g);l=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(p=1;p<u;p++){var t=m.get(p),v=t[b];n.parseAuto(t.recordDate());n.refresh();t=n.date.getTime()-h;t=c+t/k*(e-c);v=f-v/1E4*q;v-=this._baseHeight;r.lineTo(t,v)}e=MO.Lang.Hex.format(l.findRate(0));
n="#"+e.substring(2);b="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";e=MO.Lang.Hex.format(l.findRate(1));m="#"+e.substring(2);e="rgba("+MO.Lang.Hex.parse(e.substring(2,4))+","+MO.Lang.Hex.parse(e.substring(4,6))+","+MO.Lang.Hex.parse(e.substring(6,8))+",0.5)";h=a.createLinearGradient(0,f,0,d);h.addColorStop("0",n);h.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",b);a.addColorStop("1",e);
r.strokeStyle=h;r.lineWidth=4;r.stroke();r.fillStyle=a;r.lineTo(t,f);r.lineTo(c,f);r.lineTo(c,g);r.fill()};
MO.FEaiCockpitTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-50;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+90,l=e-50,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",3);var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;for(b.setFont("bold 20px Microsoft YaHei");!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",
1);p=e.format("HH24:MI");e.addHour(1);e.truncHour();if(r=!r)q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}b.drawLine(g,f-this.degreeLineHeight(),g,f,"#FFFFFF",1);m=m.format("HH24:MI");m!=p&&(q=b.textWidth(m),b.drawText(m,g-q/2,f+40,"#59FDE9"));e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f.units())&&!q.isEmpty()){var r=q.first(),v=0;p=q.count();for(m=0;m<p;m++)t=q.get(m),t=t.investment(),t>v&&(v=t);this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");g=-1;h=k=0;e.parseAuto(r.recordDate());
e.refresh();g=e.date.getHours();for(m=0;m<p;m++)t=q.get(m),e.parseAuto(t.recordDate()),e.refresh(),l=e.date.getHours(),g==l?k+=t.investment():(k>h&&(h=k,k=0),g=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d+30,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=60;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");g=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");k=b.textWidth(g);h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");l=b.textWidth(h);f=MO.Lang.Float.unitFormat(f.investmentTotal()/
24,0,0,2,0,1E4,"\u4e07");n=b.textWidth(f);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+k-k,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+k-l,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(f,a+q+k-n,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiChartSesameFinancialProcessor=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MGraphicObject,MO.MListener);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new MO.AGetter("_beginDate"));a._endDate=MO.Class.register(a,new MO.AGetter("_endDate"));a._24HBeginDate=MO.Class.register(a,new MO.AGetter("_24HBeginDate"));a._24HEndDate=MO.Class.register(a,new MO.AGetter("_24HEndDate"));a._invementDayCurrent=MO.Class.register(a,new MO.AGetter("_invementDayCurrent"),0);a._redemptionDayCurrent=MO.Class.register(a,
new MO.AGetter("_redemptionDayCurrent"),0);a._netinvestmentDayCurrent=MO.Class.register(a,new MO.AGetter("_netinvestmentDayCurrent"),0);a._interestDayCurrent=MO.Class.register(a,new MO.AGetter("_interestDayCurrent"),0);a._performanceDayCurrent=MO.Class.register(a,new MO.AGetter("_performanceDayCurrent"),0);a._customerDayCurrent=MO.Class.register(a,new MO.AGetter("_customerDayCurrent"),0);a._invementDay=MO.Class.register(a,new MO.AGetter("_invementDay"),0);a._invementTotalCurrent=MO.Class.register(a,
new MO.AGetter("_invementTotalCurrent"),0);a._invementTotal=MO.Class.register(a,new MO.AGetter("_invementTotal"),0);a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new MO.AGetSet("_mapEntity"));a._display=MO.Class.register(a,new MO.AGetter("_display"));a._rankUnits=MO.Class.register(a,new MO.AGetter("_rankUnits"));a._units=MO.Class.register(a,new MO.AGetter("_units"));a._tableCount=40;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=
null;a._unitPool=null;a._autios=null;a._eventDataChanged=null;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));a._event24HDataChanged=null;a._listeners24HDataChanged=MO.Class.register(a,new MO.AListener("_listeners24HDataChanged","24H"+MO.EEvent.DataChanged));a.onDynamicData=MO.FEaiChartSesameFinancialProcessor_onDynamicData;a.on24HDataFetch=MO.FEaiChartSesameFinancialProcessor_on24HDataFetch;a.onJsonData=MO.FEaiChartSesameFinancialProcessor_onJsonData;
a.onhehe=MO.FEaiChartSesameFinancialProcessor_onhehe;a.onCurrentInvest=MO.FEaiChartSesameFinancialProcessor_onCurrentInvest;a.construct=MO.FEaiChartSesameFinancialProcessor_construct;a.allocUnit=MO.FEaiChartSesameFinancialProcessor_allocUnit;a.allocShape=MO.FEaiChartSesameFinancialProcessor_allocShape;a.setup=MO.FEaiChartSesameFinancialProcessor_setup;a.calculateCurrent=MO.FEaiChartSesameFinancialProcessor_calculateCurrent;a.focusEntity=MO.FEaiChartSesameFinancialProcessor_focusEntity;a.process=MO.FEaiChartSesameFinancialProcessor_process;
a.dispose=MO.FEaiChartSesameFinancialProcessor_dispose;a._jsonSystem=MO.Class.register(a,new MO.AGetter("_jsonSystem"));a._jsonTimerData=MO.Class.register(a,new MO.AGetter("_jsonTimerData"));a._jsonTableData=MO.Class.register(a,new MO.AGetter("_jsonTableData"));return a};MO.FEaiChartSesameFinancialProcessor_onJsonData=function(a){};MO.FEaiChartSesameFinancialProcessor_onhehe=function(a){};MO.FEaiChartSesameFinancialProcessor_onCurrentInvest=function(a){};
MO.FEaiChartSesameFinancialProcessor_on24HDataFetch=function(a){a.beginDate=this._24HBeginDate;a.endDate=this._24HEndDate;this.process24HDataChangedListener(a)};
MO.FEaiChartSesameFinancialProcessor_onDynamicData=function(a){var b=a.content;a=this._dynamicInfo;a._rankUnits=b.rank;a._units=b.collection;a._investmentCount=b.investment_day;a._investmentTotal=b.investment_total;a=this._rankUnits;for(var c=a._items,d=b.rank.length,e=0;e<d;e++)c[e]=b.rank[e];for(var c=this._units,d=c._items,f=b.collection.length,e=0;e<f;e++)d[e]=b.collection[e];this._tableInterval=(b=c._items.length)?6E4*this._intervalMinute/b:6E4*this._intervalMinute;this._tableTick=0;b=this._eventDataChanged;
b.rankUnits=a;b.unit=null;this.processDataChangedListener(b)};
MO.FEaiChartSesameFinancialProcessor_construct=function(){this.__base.FObject.construct.call(this);this._beginDate=new MO.TDate;this._endDate=new MO.TDate;this._24HBeginDate=new MO.TDate;this._24HEndDate=new MO.TDate;this._units=new MO.TObjects;this._tableTicker=new MO.TTicker(1E3*this._tableInterval);this._autios={};this._dataTicker=new MO.TTicker(6E4*this._intervalMinute);this._dynamicInfo=MO.Class.create(MO.FEaiLogicInfoCustomerDynamic);this._rankUnits=new MO.TObjects;this._unitPool=MO.Class.create(MO.FObjectPool);
this._eventDataChanged=new MO.SEvent(this);this._event24HDataChanged=new MO.SEvent(this);this._jsonSystem=MO.Class.create(MO.FEaiLogicJsonSystem);this._jsonTableData=MO.Class.create(MO.FEaiLogicJsonTableData);this._jsonTimerData=MO.Class.create(MO.FEaiLogicJsonTimerLineData)};MO.FEaiChartSesameFinancialProcessor_allocUnit=function(){var a=this._unitPool.alloc();a||(a=MO.Class.create(MO.FEaiChartMktCustomerDynamicUnit));return a};
MO.FEaiChartSesameFinancialProcessor_setup=function(){for(var a=MO.Console.find(MO.FAudioConsole),b=1;5>=b;b++)this._autios[b]=a.load("{eai.resource}/currency/"+b+".mp3");(this._display=MO.Class.create(MO.FE3dDisplay)).linkGraphicContext(this)};
MO.FEaiChartSesameFinancialProcessor_calculateCurrent=function(){for(var a=this._dynamicInfo,b=a.investmentCount(),a=a.investmentTotal(),c=this._units.items(),d=c.length,e=0;e<d;e++)var f=c[e],b=b-f.investment,a=a-f.investment;this._invementTotalCurrent=a;this._invementDayCurrent=b};
MO.FEaiChartSesameFinancialProcessor_focusEntity=function(a){var b=a.card;if(b=MO.Console.find(MO.FEaiEntityConsole).cityModule().findByCard(b)){var c=a.investment,d=MO.Console.find(MO.FEaiLogicConsole).statistics().calculateAmountLevel(c),e=b.data().provinceCode();(e=MO.Console.find(MO.FEaiEntityConsole).provinceModule().findByCode(e))&&e.doInvestment(d,c);b.addInvestmentTotal(d,c);null!=this._mapEntity&&this._mapEntity.upload();(b=this._autios[d])&&b.play(0)}b=this._eventDataChanged;b.rankUnits=
this._rankUnits;b.unit=a;this.processDataChangedListener(b)};
MO.FEaiChartSesameFinancialProcessor_process=function(){var a=this._jsonSystem;a.testReady();a=a.currentDate();a.truncMinute();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=this._jsonTableData,b=MO.Console.find(MO.FEaiLogicConsole).jsonTableData(),c=this._beginDate,d=this._endDate;c.assign(d);d.assign(a);b.doInvestment(this,this.onDynamicData,c.format(),d.format());b=this._24HBeginDate;b.assign(a);
b.truncMinute(15);b.addDay(-1);c=this._24HEndDate;c.assign(a);c.truncMinute(15);this._jsonTimerData.do24TimeData(this,this.on24HDataFetch,b.format(),c.format())}a=MO.Timer.current();a-this._tableTick>this._tableInterval&&(b=this._units._items,0==!b.length&&(b=b.shift(),this.focusEntity(b)),this.calculateCurrent(),this._tableTick=a);null!=this._mapEntity&&this._mapEntity.process();a=MO.Desktop.application().dynamicInfo();a._investmentEntityCount=this._units.count();a._investmentPoolItemCount=this._unitPool.items().count();
a._investmentPoolFreeCount=this._unitPool.frees().count()};MO.FEaiChartSesameFinancialProcessor_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._dataTicker=MO.Lang.Object.dispose(this._dataTicker);this._eventDataChanged=MO.Lang.Object.dispose(this._eventDataChanged);this.__base.FObject.dispose.call(this)};
MO.FEaiChartSesameFinancialScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._processor=MO.Class.register(a,new MO.AGetter("_processor"));a._processorCurrent=0;a._ready=!1;a._mapReady=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._logoBar=null;a._timeline=null;a._liveTable=null;a._statusStart=!1;a._statusLayerCount=100;a._statusLayerLevel=100;a.onOperationDown=MO.FEaiChartSesameFinancialScene_onOperationDown;a.onInvestmentDataChanged=MO.FEaiChartSesameFinancialScene_onInvestmentDataChanged;
a.on24HDataChanged=MO.FEaiChartSesameFinancialScene_on24HDataChanged;a.onOperationVisibility=MO.FEaiChartSesameFinancialScene_onOperationVisibility;a.onProcessReady=MO.FEaiChartSesameFinancialScene_onProcessReady;a.onProcess=MO.FEaiChartSesameFinancialScene_onProcess;a.onSwitchProcess=MO.FEaiChartSesameFinancialScene_onSwitchProcess;a.onSwitchComplete=MO.FEaiChartSesameFinancialScene_onSwitchComplete;a.setup=MO.FEaiChartSesameFinancialScene_setup;a.showFace=MO.FEaiChartSesameFinancialScene_showFace;
a.fixMatrix=MO.FEaiChartSesameFinancialScene_fixMatrix;a.processResize=MO.FEaiChartSesameFinancialScene_processResize;return a};MO.FEaiChartSesameFinancialScene_onOperationDown=function(a){this._countryEntity._startTime=0};MO.FEaiChartSesameFinancialScene_on24HDataChanged=function(a){var b=this._timeline;b.startTime().assign(a.beginDate);b.endTime().assign(a.endDate);b.trendInfo()._investmentTotal=a.content.investment_total;b.trendInfo()._units=a.content.collection;b.dirty()};
MO.FEaiChartSesameFinancialScene_onInvestmentDataChanged=function(a){var b=a.unit,c=this._liveTable;c.setRankUnits(a.rankUnits);c.pushUnit(b);c.dirty()};MO.FEaiChartSesameFinancialScene_onOperationVisibility=function(a){this.__base.FEaiChartScene.onOperationVisibility.call(this,a);a.visibility?(this._groundAutio.play(),this._countryEntity._audioMapEnter._hAudio.muted=!1):(this._groundAutio.pause(),this._countryEntity._audioMapEnter._hAudio.muted=!0)};
MO.FEaiChartSesameFinancialScene_onProcessReady=function(){this.__base.FEaiChartScene.onProcessReady.call(this);this._mapEntity.showCity()};
MO.FEaiChartSesameFinancialScene_onProcess=function(){this.__base.FEaiChartScene.onProcess.call(this);if(!this._statusStart){if(MO.Window.Browser.capability().soundConfirm){var a=document.getElementById("id_ios_play");a&&MO.Window.Html.visibleSet(a,!0);(a=document.getElementById("id_loading"))&&document.body.removeChild(a)}else{if(a=document.getElementById("id_loading"))a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--;this._statusLayerLevel--}0>=this._statusLayerLevel&&
(a&&document.body.removeChild(a),a=this._countryEntity,a.start(),this._mapEntity.showCountry(a),this.processLoaded(),this._statusStart=this._playing=!0)}if(this._playing)if(a=this._countryEntity,a.introAnimeDone()){this._mapReady||(this._guiManager.show(),a=MO.Class.create(MO.FGuiActionAlpha),a.setAlphaBegin(0),a.setAlphaEnd(1),a.setAlphaInterval(.01),a.push(this._guiManager),this._guiManager.mainTimeline().pushAction(a),this._mapReady=!0);this._processor.process();var a=this._logoBar,b=this._processor;
0<b.invementTotalCurrent()&&a.findComponent("investmentTotal").setValue(parseInt(b.invementTotalCurrent()).toString());0<b.invementDayCurrent()&&a.findComponent("investmentDay").setValue(parseInt(b.invementDayCurrent()).toString());this._nowTicker.process()&&(a=this._logoBar,b=this._nowDate,b.setNow(),a.findComponent("date").setLabel(b.format("YYYY/MM/DD")),a.findComponent("time").setLabel(b.format("HH24:MI")))}else a.process()};MO.FEaiChartSesameFinancialScene_onSwitchProcess=function(a){};
MO.FEaiChartSesameFinancialScene_onSwitchComplete=function(a){};
MO.FEaiChartSesameFinancialScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._logoBar=MO.Console.find(MO.FGuiFrameConsole).get(this,"eai.chart.customer.LogoBar");this._guiManager.register(b);b=this._processor=MO.Class.create(MO.FEaiChartSesameFinancialProcessor);b.linkGraphicContext(this);b.setMapEntity(this._mapEntity);b.setup();b.addDataChangedListener(this,this.onInvestmentDataChanged);b.add24HDataChangedListener(this,this.on24HDataChanged);
b=b.display();this.fixMatrix(b.matrix());a.push(b);this.activeStage();a=this._timeline=MO.Class.create(MO.FEaiChartSesameFinancialTimeline);a.setName("Timeline");a.linkGraphicContext(this);a.build();this._guiManager.register(a);a=this._liveTable=MO.Class.create(MO.FEaiChartSesameFinancialTable);a.setName("LiveTable");a.linkGraphicContext(this);a.setup();a.build();this._guiManager.register(a);this._guiManager.hide();a=MO.Console.find(MO.FEaiEntityConsole);a.cityModule().build(this);a=this._countryEntity=
a.mapModule().loadCountry(this,MO.EEaiConstant.DefaultCountry);this._readyLoader.push(a)};MO.FEaiChartSesameFinancialScene_showFace=function(){this._playing=this._statusStart=!0;this._mapReady=!1;this._mapEntity.reset();this._application.desktop().show();this.processResize()};MO.FEaiChartSesameFinancialScene_fixMatrix=function(a){MO.Window.Browser.isOrientationVertical()?(a.tx=-14.58,a.ty=-1.9,a.tz=0,a.setScale(.14,.16,.14)):(a.tx=-34.9,a.ty=-10.9,a.tz=0,a.setScale(.28,.31,.28));a.update()};
MO.FEaiChartSesameFinancialScene_processResize=function(){this.__base.FEaiChartScene.processResize.call(this);var a=MO.Window.Browser.isOrientationVertical(),b=this._logoBar;a?(b.setLocation(8,8),b.setScale(.85,.85)):(b.setLocation(5,5),b.setScale(.9,.9));b=this._southSea;a?(b.setDockCd(MO.EUiDock.RightTop),b.setTop(570),b.setRight(80)):(b.setDockCd(MO.EUiDock.RightBottom),b.setRight(780),b.setBottom(280));b=this._timeline;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),
b.setLeft(10),b.setRight(10),b.setBottom(920),b.setHeight(250)):(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right),b.setLeft(20),b.setBottom(10),b.setRight(780),b.setHeight(300));b=this._liveTable;a?(b.setDockCd(MO.EUiDock.Bottom),b.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Top|MO.EUiAnchor.Right),b.setLeft(10),b.setRight(10),b.setBottom(10),b.setHeight(900)):(b.setDockCd(MO.EUiDock.Right),b.setAnchorCd(MO.EUiAnchor.All),b.setTop(10),b.setRight(0),b.setBottom(10),
b.setWidth(760));this.fixMatrix(this._processor.display().matrix())};
MO.FEaiChartSesameFinancialTable=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._currentDate=null;a._rank=MO.Class.register(a,new MO.AGetter("_rank"));a._rankLogoImage=null;a._rankTitleImage=null;a._rankLineImage=null;a._rankLinePadding=null;a._rank1Image=null;a._rank2Image=null;a._rank3Image=null;a._backgroundImage=null;a._backgroundPadding=null;a._tableCount=0;a._units=null;a._lineScroll=0;a._listenersDataChanged=MO.Class.register(a,new MO.AListener("_listenersDataChanged",MO.EEvent.DataChanged));
a.onImageLoad=MO.FEaiChartSesameFinancialTable_onImageLoad;a.onPaintBegin=MO.FEaiChartSesameFinancialTable_onPaintBegin;a.construct=MO.FEaiChartSesameFinancialTable_construct;a.setup=MO.FEaiChartSesameFinancialTable_setup;a.setRankUnits=MO.FEaiChartSesameFinancialTable_setRankUnits;a.pushUnit=MO.FEaiChartSesameFinancialTable_pushUnit;a.drawRow=MO.FEaiChartSesameFinancialTable_drawRow;a.dispose=MO.FEaiChartSesameFinancialTable_dispose;return a};MO.FEaiChartSesameFinancialTable_onImageLoad=function(){this.dirty()};
MO.FEaiChartSesameFinancialTable_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.left,e=c.top,f=c.width;a=d+12;var g=d+f-d;b.drawGridImage(this._backgroundImage,d,e,f,c.height,this._backgroundPadding);c=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.layout.table.title}");b.setFont(this._headFontStyle);var h=b.textWidth(c);b.drawText(c,d+.5*(f-h),e+76,"#59FDE9");b.setFont(this._rowFontStyle);e+=this._rankStart;b.drawGridImage(this._rankLineImage,
d+6,e+this._rankTitleStart,f-22,this._rankHeight,this._rankLinePadding);b.drawImage(this._rankTitleImage,d+.5*(f-167),e+3,198,40);if(this._rank)for(d=rankUnit.count(),e+=90,f=0;f<d;f++)c=rankUnit.at(f),this.drawRow(b,c,!0,f,a,e+this._rankRowHeight*f,g)};
MO.FEaiChartSesameFinancialTable_construct=function(){this.__base.FGuiControl.construct.call(this);this._units=new MO.TObjects;this._currentDate=new MO.TDate;this._rankLinePadding=new MO.SPadding(40,0,40,0);this._backgroundPadding=new MO.SPadding(20,20,90,20)};
MO.FEaiChartSesameFinancialTable_setup=function(){var a=MO.Console.find(MO.FImageConsole),b=this._logoImage=a.load("{eai.resource}/live/company.png");b.addLoadListener(this,this.onImageLoad);b=this._backgroundImage=a.load("{eai.resource}/live/grid.png");b.addLoadListener(this,this.onImageLoad);b=this._rankTitleImage=a.load("{eai.resource}/live/tank-title.png");b.addLoadListener(this,this.onImageLoad);b=this._rankLineImage=a.load("{eai.resource}/live/rank.png");b.addLoadListener(this,this.onImageLoad);
a=this._gridRank=MO.Class.create(MO.FGuiGridControl);a.setOptionClip(!1);a.setDisplayHead(!1);a.setLocation(50,170);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right);a.setLeft(9);a.setRight(19);a.setHeadHeight(40);a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(40);a.rowFont().font="Microsoft YaHei";a.rowFont().size=22;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnPicture);b.setName("rank");
b.setLabel();b.setDataName("image");b.setWidth(110);b.setPadding(1,1,1,1);b.setAlign(MO.EUiAlign.Center);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customer_city");b.setLabel("");b.setDataName("customer_city");b.setWidth(100);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("label_phone");b.setLabel("");b.setDataName("label_phone");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investment");
b.setLabel("");b.setDataName("investment");b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");b.setNegativeColor("#FF0000");b.cellPadding().right=10;b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);a=this._gridControl=MO.Class.create(MO.FGuiTable);a.setOptionClip(!0);a.setLocation(50,332);a.setSize(800,700);a.setAnchorCd(MO.EUiAnchor.Left|MO.EUiAnchor.Right|MO.EUiAnchor.Bottom);a.setLeft(9);a.setTop(332);a.setRight(19);a.setBottom(20);a.setHeadHeight(35);
a.setHeadBackColor("#122A46");a.headFont().font="Microsoft YaHei";a.headFont().size=22;a.headFont().color="#00B2F2";a.setRowHeight(32);a.rowFont().font="Microsoft YaHei";a.rowFont().size=21;a.rowFont().color="#59FDE9";b=MO.Class.create(MO.FGuiGridColumnDate);b.setName("recordDate");b.setLabel("\u65f6\u95f4");b.setDataName("record_date");b.setDateFormat("HH24:MI:SS");b.setWidth(120);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerCity");b.setLabel("\u57ce\u5e02");
b.setDataName("customer_city");b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnText);b.setName("customerInfo");b.setLabel("\u7528\u6237-\u624b\u673a");b.setDataName("customer_info");b.setWidth(140);b.setPadding(1,1,1,1);a.pushColumn(b);b=MO.Class.create(MO.FGuiGridColumnCurrency);b.setName("investmentAmount");b.setLabel("\u6295\u8d44\u989d");b.setDataName("investment_amount");b.cellPadding().right=10;b.setNormalColor("#59FDE9");b.setHighColor("#FDEF01");b.setLowerColor("#EB6C03");
b.setNegativeColor("#FF0000");b.setWidth(160);b.setPadding(1,1,1,1);a.pushColumn(b);this.push(a);this._headFontStyle="bold 32px Microsoft YaHei";MO.Window.Browser.isOrientationVertical()?(this._tableCount=11,this._rankStart=100,this._rankTitleStart=-5,this._rankHeight=249,this._rankRowHeight=50,this._rankIconStart=22,this._rankTextStart=8,this._rankRowUp=36,this._rankRowDown=68,this._headStart=352,this._headTextTop=37,this._headHeight=54,this._rowStart=418,this._rowTextTop=0,this._rowFontStyle="36px Microsoft YaHei"):
(this._tableCount=19,this._rankStart=110,this._rankTitleStart=0,this._rankHeight=219,this._rankRowHeight=40,this._rankIconStart=25,this._rankTextStart=0,this._rankRowUp=32,this._rankRowDown=51,this._headStart=336,this._headTextTop=27,this._headHeight=40,this._rowFontStyle="22px Microsoft YaHei",this._rowStart=384)};
MO.FEaiChartSesameFinancialTable_setRankUnits=function(a){var b=this._gridRank;b.clearRows();var c=a._items.length;a=a._items;for(var d=0;d<c;d++){var e=a[d],f=b.allocRow(),g=e.card,g=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(g),h="";g&&(h=g.label());f.set("image","{eai.resource}/live/"+(d+1)+".png");f.set("customer_city",h);f.set("label_phone",e.customer+" - "+e.phone);f.set("investment",e.investment);b.pushRow(f)}};
MO.FEaiChartSesameFinancialTable_pushUnit=function(a){if(!a)return null;var b=a.card,c=MO.Console.find(MO.FEaiResourceConsole).cityModule().findByCard(b),b="";c&&(b=c.label());var c=this._gridControl,d=c.allocRow(),e=a.customer+"-"+a.phone,f=a.investment;d.set("record_date",a.date);d.set("customer_city",b);d.set("customer_info",e);d.set("investment_Amount",f);c.insertRow(d);b=this._units;b.unshift(a);this._lineScroll-=this._rowHeight;b.count>this._tableCount&&b.pop()};
MO.FEaiChartSesameFinancialTable_dispose=function(){this._units=MO.Lang.Object.dispose(this._units);this._backgroundPadding=MO.Lang.Object.dispose(this._backgroundPadding);this.__base.FGuiControl.dispose.call(this)};
MO.FEaiChartSesameFinancialTimeline=function(a){a=MO.Class.inherits(this,a,MO.FGuiControl);a._startTime=MO.Class.register(a,new MO.AGetSet("_startTime"));a._endTime=MO.Class.register(a,new MO.AGetSet("_endTime"));a._trendInfo=MO.Class.register(a,new MO.AGetSet("_trendInfo"));a._ready=!1;a._investmentTotal=0;a._baseHeight=5;a._degreeLineHeight=MO.Class.register(a,new MO.AGetSet("_degreeLineHeight"),10);a._triangleWidth=MO.Class.register(a,new MO.AGetSet("_triangleWidth"),10);a._triangleHeight=MO.Class.register(a,
new MO.AGetSet("_triangleHeight"),12);a._decoLineGap=MO.Class.register(a,new MO.AGetSet("_decoLineGap"),10);a._decoLineWidth=MO.Class.register(a,new MO.AGetSet("_decoLineWidth"),30);a.oeUpdate=MO.FEaiChartSesameFinancialTimeline_oeUpdate;a.construct=MO.FEaiChartSesameFinancialTimeline_construct;a.sync=MO.FEaiChartSesameFinancialTimeline_sync;a.drawTrend=MO.FEaiChartSesameFinancialTimeline_drawTrend;a.onPaintBegin=MO.FEaiChartSesameFinancialTimeline_onPaintBegin;a.on24HDataFetch=MO.FEaiChartSesameFinancialTimeline_on24HDataFetch;
return a};MO.FEaiChartSesameFinancialTimeline_construct=function(){this.__base.FGuiControl.construct.call(this);this._startTime=new MO.TDate;this._endTime=new MO.TDate;this._trendInfo=MO.Class.create(MO.FEaiLogicInfoCustomerTrend)};MO.FEaiChartSesameFinancialTimeline_oeUpdate=function(a){this.__base.FGuiControl.oeUpdate.call(this,a);if(!this._ready)return MO.Console.find(MO.FEaiLogicConsole).system().testReady()&&(this._ready=!0),MO.EEventStatus.Stop};
MO.FEaiChartSesameFinancialTimeline_drawTrend=function(a,b,c,d,e,f,g,h,k,l,n,m){n=this._startTime;m=this._trendInfo.units();var u=m.length,p=m[0],r=a._handle;r.lineCap="round";l=1E4*g/l;b=f-p[b]/1E4*l;r.beginPath();r.moveTo(c,b);g=MO.Console.find(MO.FEaiResourceConsole).rateModule().find(MO.EEaiRate.Investment);for(p=1;p<u;p++){var q=m[p],t=q.investment;n.parseAuto(q.date);n.refresh();q=n.date.getTime()-h;q=c+q/k*(e-c);t=f-t/1E4*l;t-=this._baseHeight;r.lineTo(q,t)}h=MO.Lang.Hex.format(g.findRate(0));
n="#"+h.substring(2);e="rgba("+MO.Lang.Hex.parse(h.substring(2,4))+","+MO.Lang.Hex.parse(h.substring(4,6))+","+MO.Lang.Hex.parse(h.substring(6,8))+",0.5)";h=MO.Lang.Hex.format(g.findRate(1));m="#"+h.substring(2);h="rgba("+MO.Lang.Hex.parse(h.substring(2,4))+","+MO.Lang.Hex.parse(h.substring(4,6))+","+MO.Lang.Hex.parse(h.substring(6,8))+",0.5)";k=a.createLinearGradient(0,f,0,d);k.addColorStop("0",n);k.addColorStop("1",m);a=a.createLinearGradient(0,f,0,d);a.addColorStop("0",e);a.addColorStop("1",h);
r.strokeStyle=k;r.lineWidth=4;r.stroke();r.fillStyle=a;r.lineTo(q,f);r.lineTo(c,f);r.lineTo(c,b);r.fill()};
MO.FEaiChartSesameFinancialTimeline_onPaintBegin=function(a){if(this._ready){this.__base.FGuiControl.onPaintBegin.call(this,a);var b=a.graphic,c=a.rectangle,d=c.top,e=c.top+c.height,f=e-50;a=c.left+5;var c=c.left+c.width-5,g=this.triangleWidth()+this.decoLineGap();b.drawTriangle(a,f,a+this.triangleWidth(),f+this.triangleHeight()/2,a+this.triangleWidth(),f-this.triangleHeight()/2,1,"#F8CB3D","#F8CB3D");b.drawTriangle(c,f,c-this.triangleWidth(),f+this.triangleHeight()/2,c-this.triangleWidth(),f-this.triangleHeight()/
2,1,"#F8CB3D","#F8CB3D");b.drawLine(a+g,f,a+g+this.decoLineWidth(),f,"#F8CB3D",3);b.drawLine(c-g,f,c-g-this.decoLineWidth(),f,"#F8CB3D",3);var h=a+g+this.decoLineWidth(),g=c-g-this.decoLineWidth(),k=d+90,l=e-50,n=l-k;b.drawLine(h,f,g,f,"#F8CB3D",3);var e=this.startTime(),m=this.endTime(),u=m.date.getTime()-e.date.getTime(),c=e.date.getTime(),p,r=!1,q=0;for(b.setFont("bold 20px Microsoft YaHei");!e.isAfter(m);){var q=e.date.getTime()-c,t=h+q/u*(g-h);b.drawLine(t,f-this.degreeLineHeight(),t,f,"#FFFFFF",
1);p=e.format("HH24:MI");e.addHour(1);e.truncHour();if(r=!r)q=b.textWidth(p),b.drawText(p,t-q/2,f+20,"#59FDE9")}b.drawLine(g,f-this.degreeLineHeight(),g,f,"#FFFFFF",1);m=m.format("HH24:MI");m!=p&&(q=b.textWidth(m),b.drawText(m,g-q/2,f+40,"#59FDE9"));e.date.setTime(c);e.refresh();f=this._trendInfo;if((q=f._units)&&0!=q.length){var r=q[0],v=0;p=q.length;for(m=0;m<p;m++)t=q[m],t=t.investment,t>v&&(v=t);this.drawTrend(b,"_investment",h,k,g,l,n,c,u,v,"#FF8800","#FF0000");g=-1;h=k=0;e.parseAuto(r.data);
e.refresh();g=e.date.getHours();for(m=0;m<p;m++)t=q[m],e.parseAuto(t.date),e.refresh(),l=e.date.getHours(),g==l?k+=t.investment:(k>h&&(h=k,k=0),g=l);b.setFont("24px Microsoft YaHei");b.drawText("24H\u6570\u636e\u66f2\u7ebf",a,d+30,"#54F0FF");b.setFont("22px Microsoft YaHei");d+=60;q=b.textWidth("\u6295\u8d44\u603b\u8ba1\uff1a");g=MO.Lang.Float.unitFormat(f.investmentTotal(),0,0,2,0,1E4,"\u4e07");k=b.textWidth(g);h=MO.Lang.Float.unitFormat(h,0,0,2,0,1E4,"\u4e07");l=b.textWidth(h);f=MO.Lang.Float.unitFormat(f.investmentTotal()/
24,0,0,2,0,1E4,"\u4e07");n=b.textWidth(f);b.drawText("24H\u603b\u989d\uff1a",a,d+0,"#00CFFF");b.drawText(g,a+q+k-k,d+0,"#00B5F6");b.drawText("\u5c0f\u65f6\u5cf0\u503c\uff1a",a,d+22+5,"#00CFFF");b.drawText(h,a+q+k-l,d+22+5,"#00B5F6");b.drawText("\u5c0f\u65f6\u5747\u503c\uff1a",a,d+44+10,"#00CFFF");b.drawText(f,a+q+k-n,d+44+10,"#00B5F6");e.date.setTime(c);e.refresh()}}};
MO.FEaiLogicJsonInfoCustomerTrend=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._investmentTotal=MO.Class.register(a,[new MO.AGetSet("_investmentTotal"),new MO.APersistence("_investmentTotal",MO.EDataType.Double)]);a._customerTotal=MO.Class.register(a,[new MO.AGetSet("_customerTotal"),new MO.APersistence("_customerTotal",MO.EDataType.Uint32)]);a._units=MO.Class.register(a,[new MO.AGetSet("_units"),new MO.APersistence("_units",MO.EDataType.Objects,MO.FEaiLogicJsonInfoCustomerTrendUnit)]);
return a};MO.FEaiLogicJsonInfoCustomerTrendUnit=function(a){a=MO.Class.inherits(this,a,MO.FObject,MO.MPersistence);a._recordDate=MO.Class.register(a,[new MO.AGetSet("_recordDate"),new MO.APersistence("_recordDate",MO.EDataType.String)]);a._investment=MO.Class.register(a,[new MO.AGetSet("_investment"),new MO.APersistence("_investment",MO.EDataType.Double)]);a._customerCount=MO.Class.register(a,[new MO.AGetSet("_customerCount"),new MO.APersistence("_customerCount",MO.EDataType.Uint32)]);return a};
MO.FEaiLogicJsonSystem=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="system";a._ready=!1;a._info=null;a._token=MO.Class.register(a,new MO.AGetter("_token"),0);a._currentDate=null;a._localDate=null;a._systemDate=MO.Class.register(a,new MO.AGetter("_systemDate"));a.onInfo=MO.FEaiLogicJsonSystem_onInfo;a.construct=MO.FEaiLogicJsonSystem_construct;a.doInfo=MO.FEaiLogicJsonSystem_doInfo;a.doDeviceAccess=MO.FEaiLogicJsonSystem_doDeviceAccess;a.testReady=MO.FEaiLogicJsonSystem_testReady;
a.currentDate=MO.FEaiLogicJsonSystem_currentDate;a.refresh=MO.FEaiLogicJsonSystem_refresh;a.dispose=MO.FEaiLogicJsonSystem_dispose;return a};MO.FEaiLogicJsonSystem_onInfo=function(a){var b=this._info;b._data=a.data.data;this._localDate.setNow();this._systemDate.parse(b.date());this._ready=!0};
MO.FEaiLogicJsonSystem_construct=function(){this.__base.FEaiLogic.construct.call(this);this._info=MO.Class.create(MO.FEaiLogicSystemInfo);this._currentDate=new MO.TDate;this._localDate=new MO.TDate;this._systemDate=new MO.TDate};MO.FEaiLogicJsonSystem_doInfo=function(a,b){var c=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.time}");MO.Console.find(MO.FJsonConsole).send(c).addLoadListener(a,b)};
MO.FEaiLogicJsonSystem_doDeviceAccess=function(){var a=new MO.TXmlNode("Configuration"),b=MO.Window.Browser.agent(),c=a.create("Browser");MO.Window.Browser.saveConfig(c);var d=MO.Desktop.application().desktop();if(d&&(c=c.create("Desktop"),d.canvas2d()&&c.create("Context2d"),d=d.canvas3d())){var d=d.graphicContext(),e=d.parameter("VERSION");e&&(b+="|"+e);(e=d.parameter("SHADING_LANGUAGE_VERSION"))&&(b+="|"+e);(e=d.parameter("UNMASKED_RENDERER_WEBGL"))&&(b+="|"+e);c=c.create("Context3d");d.saveConfig(c)}a.set("identity_code",
b);MO.Console.find(MO.FServiceConsole).send("cloud.info.device","access",a)};MO.FEaiLogicJsonSystem_testReady=function(){return this._ready};MO.FEaiLogicJsonSystem_currentDate=function(){var a=this._currentDate,b=this._systemDate.get()-this._localDate.get();a.set(MO.Timer.current()+b);return a};MO.FEaiLogicJsonSystem_refresh=function(){return this.doInfo(this,this.onInfo)};
MO.FEaiLogicJsonSystem_dispose=function(){this._info=MO.Lang.Object.dispose(this._info);this._localDate=MO.Lang.Object.dispose(this._localDate);this._systemDate=MO.Lang.Object.dispose(this._systemDate);this.__base.FEaiLogic.consturct.call(this)};
MO.FEaiLogicJsonTableData=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="statistics";a._tender=MO.Class.register(a,new MO.AGetter("_tender"));a._achievement=MO.Class.register(a,new MO.AGetter("_achievement"));a._customer=MO.Class.register(a,new MO.AGetter("_customer"));a._marketer=MO.Class.register(a,new MO.AGetter("_marketer"));a._department=MO.Class.register(a,new MO.AGetter("_department"));a.construct=MO.FEaiLogicJsonTableData_construct;a.doServerTime=MO.FEaiLogicJsonTableData_doServerTime;
a.doTimeData=MO.FEaiLogicJsonTableData_doTimeData;a.doInvestment=MO.FEaiLogicJsonTableData_doInvestment;a.do24TimeData=MO.FEaiLogicJsonTableData_do24TimeData;a.dispose=MO.FEaiLogicJsonTableData_dispose;a.sendJsonSever=MO.FEaiLogicJsonTableData_sendJsonService;a._doFirst=!0;return a};MO.FEaiLogicJsonTableData_construct=function(){this.__base.FEaiLogic.construct.call(this)};
MO.FEaiLogicJsonTableData_doServerTime=function(a,b){var c=this.prepareParemeters(),d=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.time}");this.sendJsonSever(d,c,a,b);this._customerDynamicFirst=!1};MO.FEaiLogicJsonTableData_doTimeData=function(a,b){var c=MO.Console.find(MO.FJsonConsole).alloc();c.setAsynchronous(!0);c._contentCd=MO.EHttpContent.Text;c.addLoadListener(a,b);c.send("http://182.92.6.158:8089/zm_external.wisdom.get.currentInvest?do=currentInvest")};
MO.FEaiLogicJsonTableData_sendJsonService=function(a,b,c,d){b=MO.Console.find(MO.FHttpConsole).alloc();b._asynchronous=!0;b.addLoadListener(c,d);b.send(a)};MO.FEaiLogicJsonTableData_do24TimeData=function(a,b,c,d){var e=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.24h}"),e=e+("begin="+c+"&end="+d);MO.Console.find(MO.FJsonConsole).send(e).addLoadListener(a,b)};
MO.FEaiLogicJsonTableData_doInvestment=function(a,b,c,d){var e=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.live}"),e=e+("first="+this._doFirst+"&begin="+c+"&end="+d);MO.Console.find(MO.FJsonConsole).send(e).addLoadListener(a,b);this._doFirst=!1};MO.FEaiLogicJsonTableData_dispose=function(){this.__base.FEaiLogic.dispose.call(this)};
MO.FEaiLogicJsonTimerLineData=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="statistics";a._tender=MO.Class.register(a,new MO.AGetter("_tender"));a._achievement=MO.Class.register(a,new MO.AGetter("_achievement"));a._customer=MO.Class.register(a,new MO.AGetter("_customer"));a._marketer=MO.Class.register(a,new MO.AGetter("_marketer"));a._department=MO.Class.register(a,new MO.AGetter("_department"));a.construct=MO.FEaiLogicJsonTimerLineData_construct;a.doServerTime=MO.FEaiLogicJsonTimerLineData_doServerTime;
a.doTimeData=MO.FEaiLogicJsonTimerLineData_doTimeData;a.doInvestment=MO.FEaiLogicJsonTimerLineData_doInvestment;a.do24TimeData=MO.FEaiLogicJsonTimerLineData_do24TimeData;a.dispose=MO.FEaiLogicJsonTimerLineData_dispose;a.sendJsonSever=MO.FEaiLogicJsonTimerLineData_sendJsonService;a._doFirst=!0;return a};MO.FEaiLogicJsonTimerLineData_construct=function(){this.__base.FEaiLogic.construct.call(this)};
MO.FEaiLogicJsonTimerLineData_doServerTime=function(a,b){var c=this.prepareParemeters(),d=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.time}");this.sendJsonSever(d,c,a,b);this._customerDynamicFirst=!1};MO.FEaiLogicJsonTimerLineData_doTimeData=function(a,b){var c=MO.Console.find(MO.FJsonConsole).alloc();c.setAsynchronous(!0);c._contentCd=MO.EHttpContent.Text;c.addLoadListener(a,b);c.send("http://182.92.6.158:8089/zm_external.wisdom.get.currentInvest?do=currentInvest")};
MO.FEaiLogicJsonTimerLineData_sendJsonService=function(a,b,c,d){b=MO.Console.find(MO.FHttpConsole).alloc();b._asynchronous=!0;b.addLoadListener(c,d);b.send(a)};MO.FEaiLogicJsonTimerLineData_do24TimeData=function(a,b,c,d){var e=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.24h}"),e=e+("begin="+c+"&end="+d);c=MO.Console.find(MO.FJsonConsole).send(e);c.setAsynchronous(!0);c.addLoadListener(a,b)};
MO.FEaiLogicJsonTimerLineData_doInvestment=function(a,b,c,d){var e=MO.Console.find(MO.FEnvironmentConsole).parse("{zmjr.get.live}"),e=e+("first="+this._doFirst+"&begin="+c+"&end="+d);c=MO.Console.find(MO.FJsonConsole).send(e);c.setAsynchronous(!0);c.addLoadListener(a,b)};MO.FEaiLogicJsonTimerLineData_dispose=function(){this.__base.FEaiLogic.dispose.call(this)};MO.FEaiChapter=function(a){return a=MO.Class.inherits(this,a,MO.FChapter)};
MO.FEaiChartChapter=function(a){a=MO.Class.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Chart;a._sceneTotal=MO.Class.register(a,new MO.AGetter("_sceneTotal"));a._sceneHistory=MO.Class.register(a,new MO.AGetter("_sceneHistory"));a._sceneCustomer=MO.Class.register(a,new MO.AGetter("_sceneCustomer"));a._sceneCustomerSphere=MO.Class.register(a,new MO.AGetter("_sceneCustomerSphere"));a._sceneCustomerInvestment3d=MO.Class.register(a,new MO.AGetter("_sceneCustomerInvestment3d"));a._sceneMarketerCustomer=
MO.Class.register(a,new MO.AGetter("_sceneMarketerCustomer"));a._sceneMarketerMarketer=MO.Class.register(a,new MO.AGetter("_sceneMarketerMarketer"));a._sceneMarketerProduct=MO.Class.register(a,new MO.AGetter("_sceneMarketerProduct"));a._sceneMarketerManage=MO.Class.register(a,new MO.AGetter("_sceneMarketerManage"));a._sceneDepartmentMarketer=MO.Class.register(a,new MO.AGetter("_sceneDepartmentMarketer"));a._scenePerformence=MO.Class.register(a,new MO.AGetter("_scenePerformence"));a._sceneStatisticsMarketer=
MO.Class.register(a,new MO.AGetter("_sceneStatisticsMarketer"));a._sceneDepartment=MO.Class.register(a,new MO.AGetter("_sceneDepartment"));a._sceneLive=MO.Class.register(a,new MO.AGetter("_sceneLive"));a._sceneWorld=MO.Class.register(a,new MO.AGetter("_sceneWorld"));a._sceneSales=MO.Class.register(a,new MO.AGetter("_sceneSales"));a._sceneShow1019=MO.Class.register(a,new MO.AGetter("_sceneShow1019"));a._sceneSesameFinancial=MO.Class.register(a,new MO.AGetter("_sceneSesameFinancial"));a.construct=MO.FEaiChartChapter_construct;
a.createScene=MO.FEaiChartChapter_createScene;a.process=MO.FEaiChartChapter_process;a.dispose=MO.FEaiChartChapter_dispose;return a};MO.FEaiChartChapter_construct=function(){this.__base.FEaiChapter.construct.call(this)};
MO.FEaiChartChapter_createScene=function(a){var b=null;switch(a){case MO.EEaiScene.ChartCustomerSphere:b=this._sceneCustomerSphere=MO.Class.create(MO.FEaiChartCustomerSphereScene);break;case MO.EEaiScene.ChartCustomerInvestment3d:b=this._sceneCustomerInvestment3d=MO.Class.create(MO.FEaiCstInvestment3dScene);break;case MO.EEaiScene.ChartMarketerCustomer:b=this._sceneMarketerCustomer=MO.Class.create(MO.FEaiChartMktCustomerScene);break;case MO.EEaiScene.ChartMarketerMarketer:b=this._sceneMarketerMarketer=
MO.Class.create(MO.FEaiChartMktMarketerScene);break;case MO.EEaiScene.ChartMarketerProduct:b=this._sceneMarketerMarketer=MO.Class.create(MO.FEaiChartMktProductScene);break;case MO.EEaiScene.ChartMarketerManage:b=this._sceneMarketerManage=MO.Class.create(MO.FEaiChartMktManageScene);break;case MO.EEaiScene.ChartDepartmentMarketer:b=this._sceneDepartmentMarketer=MO.Class.create(MO.FEaiChartDptMarketerScene);break;case MO.EEaiScene.ChartPerformence:b=this._scenePerformence=MO.Class.create(MO.FEaiChartPerformenceScene);
break;case MO.EEaiScene.ChartStatisticsMarketer:b=this._sceneStatisticsMarketer=MO.Class.create(MO.FEaiChartStatMarketerScene);break;case MO.EEaiScene.ChartPerformenceMarketer:b=this._sceneStatisticsMarketer=MO.Class.create(MO.FEaiChartPerfMarketerScene);break;case MO.EEaiScene.ChartShow1019:b=this._sceneShow1019=MO.Class.create(MO.FEaiChartShow1019Scene);break;case MO.EEaiScene.ChartShow1022:b=this._sceneShow1022=MO.Class.create(MO.FEaiChartShow1022Scene);break;case MO.EEaiScene.ChartShow1022MktCtm:b=
this._sceneShow1022MtkCtm=MO.Class.create(MO.FEaiChartMktCtm1022Scene);break;case MO.EEaiScene.ChartSesameFinancial:b=this._sceneSesameFinancial=MO.Class.create(MO.FEaiChartSesameFinancialScene)}b.linkGraphicContext(this);return b};MO.FEaiChartChapter_process=function(){this.__base.FEaiChapter.process.call(this)};MO.FEaiChartChapter_dispose=function(){this.__base.FEaiChapter.dispose.call(this)};
MO.FEaiCockpitChapter=function(a){a=MO.Class.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Chart;a._sceneCockpit=MO.Class.register(a,new MO.AGetter("_sceneCockpit"));a.construct=MO.FEaiCockpitChapter_construct;a.createScene=MO.FEaiCockpitChapter_createScene;a.dispose=MO.FEaiCockpitChapter_dispose;return a};MO.FEaiCockpitChapter_construct=function(){this.__base.FEaiChapter.construct.call(this)};
MO.FEaiCockpitChapter_createScene=function(a){var b=null;switch(a){case MO.EEaiScene.Cockpit:b=this._sceneCockpit=MO.Class.create(MO.FEaiCockpitScene)}b.linkGraphicContext(this);return b};MO.FEaiCockpitChapter_dispose=function(){this.__base.FEaiChapter.dispose.call(this)};
MO.FEaiApplication=function(a){a=MO.Class.inherits(this,a,MO.FApplication);a._chapterCode=MO.Class.register(a,new MO.AGetSet("_chapterCode"));a._sceneCode=MO.Class.register(a,new MO.AGetSet("_sceneCode"));a._desktop=MO.Class.register(a,new MO.AGetter("_desktop"));a.setup=MO.FEaiApplication_setup;a.processResize=MO.FEaiApplication_processResize;a.processEvent=MO.FEaiApplication_processEvent;return a};
MO.FEaiApplication_setup=function(a){if(!MO.Window.Browser.supportHtml5())return a=new MO.SEvent,MO.Window.processDeviceError(a),a.dispose(),!1;a=MO.Console.find(MO.FG3dEffectConsole);a.register("select.select.eai.world.face",MO.FG3dSelectAutomaticEffect);a.register("select.select.eai.map.face",MO.FG3dSelectAutomaticEffect);a.register("eai.select.automatic",MO.FEaiSelectAutomaticEffect);a.register("eai.select.control",MO.FEaiSelectAutomaticEffect);a.register("eai.select.eai.world.face",MO.FEaiSelectAutomaticEffect);
a.register("eai.select.eai.map.face",MO.FEaiSelectAutomaticEffect);a.register("general.color.eai.world.face",MO.FEaiWorldFaceEffect);a.register("general.color.eai.map.face",MO.FEaiMapFaceEffect);a.register("general.color.eai.citys",MO.FEaiCityEffect);a.register("general.color.eai.citys.range",MO.FEaiCityRangeEffect);a.register("general.color.eai.earth.flat",MO.FEaiEarthFlatEffect);a.register("general.color.eai.earth.range",MO.FEaiEarthRangeEffect);a.register("general.color.eai.earth.sky",MO.FEaiEarthSkyEffect);
a.register("general.view.automatic",MO.FE3dSphereViewAutomaticEffect);a.register("general.view.result.automatic",MO.FE3dSphereViewResultEffect);return!0};MO.FEaiApplication_processResize=function(a){this.__base.FApplication.processResize.call(this,a);(a=this._desktop)&&a.resize()};MO.FEaiApplication_processEvent=function(a){this.__base.FApplication.processEvent.call(this,a);var b=this._desktop;b&&b.processEvent(a)};
MO.FEaiChartApplication=function(a){a=MO.Class.inherits(this,a,MO.FEaiApplication);a._chapterCode=MO.EEaiChapter.Chart;a._backgroundUrl=MO.Class.register(a,new MO.AGetSet("_backgroundUrl"),"{eai.resource}/background2.jpg");a._chapterChart=MO.Class.register(a,new MO.AGetter("_chapterChart"));a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a.onLoadGround=MO.FEaiChartApplication_onLoadGround;a.onLoadResource=MO.FEaiChartApplication_onLoadResource;a.construct=MO.FEaiChartApplication_construct;
a.createChapter=MO.FEaiChartApplication_createChapter;a.setup=MO.FEaiChartApplication_setup;a.dispose=MO.FEaiChartApplication_dispose;return a};MO.FEaiChartApplication_onLoadGround=function(a){this.selectChapterByCode(this._chapterCode).selectSceneByCode(this._sceneCode);this.processResize()};
MO.FEaiChartApplication_onLoadResource=function(a){var b=this._desktop.canvas3d();if(this._backgroundUrl)a=this._groundBitmap=b.graphicContext().createObject(MO.FE3dBitmap),a._optionSelect=!1,a.loadUrl(this._backgroundUrl),a.material().info().effectCode="fill",a._renderable.addImageLoadListener(this,this.onLoadGround);else this.onLoadGround(a)};MO.FEaiChartApplication_construct=function(){this.__base.FEaiApplication.construct.call(this)};
MO.FEaiChartApplication_createChapter=function(a){var b=null;switch(a){case MO.EEaiChapter.Chart:b=this._chapterChart=MO.Class.create(MO.FEaiChartChapter)}b.linkGraphicContext(this);return b};
MO.FEaiChartApplication_setup=function(a){var b=this.__base.FEaiApplication.setup.call(this,a);if(!b)return b;this._hPanel=a;b=this._desktop=MO.Class.create(MO.FCanvasDesktop);b.build(a);a=MO.Eai.Canvas=b.canvas3d();if(a.graphicContext().isValid())return this.linkGraphicContext(a),b=this._dynamicInfo=MO.Class.create(MO.FEaiDynamicInfo),b.linkGraphicContext(a),b.setContext(a.graphicContext()),b.location().set(10,300),b.build(),a=MO.Console.find(MO.FEaiResourceConsole),a.addLoadListener(this,this.onLoadResource),
a.load("{eai.resource}/resource.dat"),!0};MO.FEaiChartApplication_dispose=function(){this._dynamicInfo=MO.Lang.Object.dispose(this._dynamicInfo);this.__base.FEaiApplication.dispose.call(this)};
MO.FEaiCockpitApplication=function(a){a=MO.Class.inherits(this,a,MO.FEaiApplication);a._chapterCode=MO.EEaiChapter.Cockpit;a._backgroundUrl=MO.Class.register(a,new MO.AGetSet("_backgroundUrl"),"{eai.resource}/background2.jpg");a._chapterCockpit=MO.Class.register(a,new MO.AGetter("_chapterCockpit"));a._dynamicInfo=MO.Class.register(a,new MO.AGetter("_dynamicInfo"));a.onLoadGround=MO.FEaiCockpitApplication_onLoadGround;a.onLoadResource=MO.FEaiCockpitApplication_onLoadResource;a.construct=MO.FEaiCockpitApplication_construct;
a.createChapter=MO.FEaiCockpitApplication_createChapter;a.setup=MO.FEaiCockpitApplication_setup;a.dispose=MO.FEaiCockpitApplication_dispose;return a};MO.FEaiCockpitApplication_onLoadGround=function(a){this.selectChapterByCode(this._chapterCode).selectSceneByCode(this._sceneCode);this.processResize()};
MO.FEaiCockpitApplication_onLoadResource=function(a){var b=this._desktop.canvas3d();if(this._backgroundUrl)a=this._groundBitmap=b.graphicContext().createObject(MO.FE3dBitmap),a._optionSelect=!1,a.loadUrl(this._backgroundUrl),a.material().info().effectCode="fill",a._renderable.addImageLoadListener(this,this.onLoadGround);else this.onLoadGround(a)};MO.FEaiCockpitApplication_construct=function(){this.__base.FEaiApplication.construct.call(this)};
MO.FEaiCockpitApplication_createChapter=function(a){var b=null;switch(a){case MO.EEaiChapter.Cockpit:b=this._chapterCockpit=MO.Class.create(MO.FEaiCockpitChapter)}b.linkGraphicContext(this);return b};
MO.FEaiCockpitApplication_setup=function(a){var b=this.__base.FEaiApplication.setup.call(this,a);if(!b)return b;this._hPanel=a;b=this._desktop=MO.Class.create(MO.FCanvasDesktop);b.build(a);a=MO.Eai.Canvas=b.canvas3d();if(a.graphicContext().isValid())return this.linkGraphicContext(a),b=this._dynamicInfo=MO.Class.create(MO.FEaiDynamicInfo),b.linkGraphicContext(a),b.setContext(a.graphicContext()),b.location().set(10,300),b.build(),a=MO.Console.find(MO.FEaiResourceConsole),a.addLoadListener(this,this.onLoadResource),
a.load("{eai.resource}/resource.dat"),!0};MO.FEaiCockpitApplication_dispose=function(){this._dynamicInfo=MO.Lang.Object.dispose(this._dynamicInfo);this.__base.FEaiApplication.dispose.call(this)};
MO.FEaiFlatCanvas=function(a){a=MO.Class.inherits(this,a,MO.FEaiCanvas);a._capturePosition=null;a._cameraPosition=null;a.onEnterFrame=MO.FEaiFlatCanvas_onEnterFrame;a.onMouseCaptureStart=MO.FEaiFlatCanvas_onMouseCaptureStart;a.onMouseCapture=MO.FEaiFlatCanvas_onMouseCapture;a.onMouseCaptureStop=MO.FEaiFlatCanvas_onMouseCaptureStop;a.construct=MO.FEaiFlatCanvas_construct;a.setPanel=MO.FEaiFlatCanvas_setPanel;a.dispose=MO.FEaiFlatCanvas_dispose;return a};
MO.FEaiFlatCanvas_onEnterFrame=function(){var a=this._activeStage;if(a){var a=a.camera(),b=RKeyboard.isPress(EKeyCode.W),c=RKeyboard.isPress(EKeyCode.S);b&&!c&&a.doMoveY(.5);!b&&c&&a.doMoveY(-.5);b=RKeyboard.isPress(EKeyCode.A);c=RKeyboard.isPress(EKeyCode.D);b&&!c&&a.doMoveX(-.5);!b&&c&&a.doMoveX(.5);a.update()}};MO.FEaiFlatCanvas_onMouseCaptureStart=function(a){var b=this._activeStage;b&&(this._capturePosition.set(a.clientX,a.clientY),this._cameraPosition.assign(b.camera().position()))};
MO.FEaiFlatCanvas_onMouseCapture=function(a){var b=this._activeStage;if(b){var c=a.clientX-this._capturePosition.x;a=a.clientY-this._capturePosition.y;b=b.camera().position();b.x=this._cameraPosition.x-.03*c;b.y=this._cameraPosition.y+.03*a}};MO.FEaiFlatCanvas_onMouseCaptureStop=function(a){};MO.FEaiFlatCanvas_construct=function(){this.__base.FEaiCanvas.construct.call(this);this._logicSize=new SSize2(1920,1080);this._cameraPosition=new SPoint3};
MO.FEaiFlatCanvas_setPanel=function(a){this.__base.FEaiCanvas.setPanel.call(this,a)};MO.FEaiFlatCanvas_dispose=function(){this._cameraPosition=MO.Lang.Object.dispose(this._cameraPosition);this.__base.FEaiCanvas.dispose.call(this)};
MO.FEaiPlatformApplication=function(a){a=MO.Class.inherits(this,a,MO.FEaiApplication);a._chapterLoading=MO.Class.register(a,new MO.AGetter("_chapterLoading"));a._chapterLogin=MO.Class.register(a,new MO.AGetter("_chapterLogin"));a._chapterScene=MO.Class.register(a,new MO.AGetter("_chapterScene"));a._chapterChart=MO.Class.register(a,new MO.AGetter("_chapterChart"));a._thread=null;a._interval=10;a.onLoadResource=MO.FEaiPlatformApplication_onLoadResource;a.construct=MO.FEaiPlatformApplication_construct;
a.createCanvas=MO.FEaiPlatformApplication_createCanvas;a.setup=MO.FEaiPlatformApplication_setup;a.dispose=MO.FEaiPlatformApplication_dispose;return a};MO.FEaiPlatformApplication_onLoadResource=function(){this.selectChapterByCode(MO.EEaiChapter.Scene).selectSceneByCode(MO.EEaiScene.Country)};MO.FEaiPlatformApplication_construct=function(){this.__base.FEaiApplication.construct.call(this)};MO.FEaiPlatformApplication_createCanvas=function(){return RClass.create(FEaiPlatformCanvas)};
MO.FEaiPlatformApplication_setup=function(){var a=this._chapterLoading=MO.Class.create(MO.FEaiLoadingChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterLogin=MO.Class.create(MO.FEaiLoginChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterScene=MO.Class.create(MO.FEaiSceneChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterChart=MO.Class.create(MO.FEaiChartChapter);a.linkGraphicContext(this);this.registerChapter(a);a=MO.RConsole.find(MO.FEaiResourceConsole);
a.addLoadListener(this,this.onLoadResource);a.load()};MO.FEaiPlatformApplication_dispose=function(){this.__base.FEaiApplication.dispose.call(this)};
MO.FEaiPlatformCanvas=function(a){a=MO.Class.inherits(this,a,MO.FEaiCanvas);a._capturePosition=null;a._captureRotation=null;a.onEnterFrame=MO.FEaiPlatformCanvas_onEnterFrame;a.onMouseCaptureStart=MO.FEaiPlatformCanvas_onMouseCaptureStart;a.onMouseCapture=MO.FEaiPlatformCanvas_onMouseCapture;a.onMouseCaptureStop=MO.FEaiPlatformCanvas_onMouseCaptureStop;a.construct=MO.FEaiPlatformCanvas_construct;a.dispose=MO.FEaiPlatformCanvas_dispose;return a};
MO.FEaiPlatformCanvas_onEnterFrame=function(){var a=this._activeStage;if(a){var b=a.camera(),c=.05,d=RKeyboard.isPress(EKeyCode.W),e=RKeyboard.isPress(EKeyCode.S);d&&!e&&b.doWalk(.5);!d&&e&&b.doWalk(-.5);d=RKeyboard.isPress(EKeyCode.A);e=RKeyboard.isPress(EKeyCode.D);d&&!e&&b.doYaw(c);!d&&e&&b.doYaw(-c);d=RKeyboard.isPress(EKeyCode.Q);e=RKeyboard.isPress(EKeyCode.E);d&&!e&&b.doFly(.5);!d&&e&&b.doFly(-.5);e=RKeyboard.isPress(EKeyCode.Z);d=RKeyboard.isPress(EKeyCode.X);e&&!d&&b.doPitch(c);!e&&d&&b.doPitch(-c);
b.update();if(this._optionRotation){c=this._rotation;a=a.layers();b=a.count();for(d=0;d<b;d++)e=a.value(d).matrix(),e.setRotation(0,c.y,0),e.update();c.y+=.01}}};MO.FEaiPlatformCanvas_onMouseCaptureStart=function(a){var b=this._activeStage;if(b){var c=this._activeStage.region();RConsole.find(FG3dTechniqueConsole).find(this._graphicContext,FG3dSelectTechnique).test(c,a.offsetX,a.offsetY);this._capturePosition.set(a.clientX,a.clientY);this._captureRotation.assign(b.camera()._rotation)}};
MO.FEaiPlatformCanvas_onMouseCapture=function(a){if(this._activeStage){var b=a.clientX-this._capturePosition.x;a=a.clientY-this._capturePosition.y;var c=this._activeStage.camera().rotation(),d=this._captureRotation;c.x=d.x+.003*a;c.y=d.y+.003*b}};MO.FEaiPlatformCanvas_onMouseCaptureStop=function(a){};MO.FEaiPlatformCanvas_construct=function(){this.__base.FEaiCanvas.construct.call(this)};MO.FEaiPlatformCanvas_dispose=function(){this.__base.FEaiCanvas.dispose.call(this)};MO.Eai.setup=function(a,b){};
