MO.EEaiChapter=new function(){this.Loading="loading";this.Login="login";this.Scene="scene";this.Chart="chart";return this};MO.EEaiConstant=new function(){this.ServiceHost="eai.logic.service";return this};MO.EEaiRate=new function(){this.Line=0;this.Map=1;return this};
MO.EEaiScene=new function(){this.Group="group";this.GroupReport="group.report";this.Company="company";this.Country="country";this.ChartHistory="chart.history";this.ChartIndustry="chart.industry";this.ChartInvestment="chart.investment";this.ChartCustomer="chart.customer";this.ChartStatistics="chart.statistics";return this};MO.Eai=new function(){this.Canvas=this.Application=null;return this};MO.FEaiEntity=function(a){return a=MO.Class.inherits(this,a,MO.FObject)};
with(MO)MO.FEaiTable=function(a){a=RClass.inherits(this,a,FObject);a._headLineCount=0;a._hTable=null;a.createRow=FEaiTable_createRow;a.setDataCount=FEaiTable_setDataCount;a.dataRow=FEaiTable_dataRow;return a},MO.FEaiTable_createRow=function(){},MO.FEaiTable_setDataCount=function(a){for(var b=this._headLineCount,c=b+a,d=this._hTable.rows.length,e=d;e<c;e++)this.createRow();d=this._hTable.rows.length;for(e=b;e<d;e++)this._hTable.rows[e].style.display=e-b<a?null:"none"},MO.FEaiTable_dataRow=function(a){return this._hTable.rows[this._headLineCount+
a]};
with(MO)MO.FEaiCityResource=function(a){a=RClass.inherits(this,a,FObject);a._provinceCode=RClass.register(a,new AGetter("_provinceCode"));a._code=RClass.register(a,new AGetter("_code"));a._label=RClass.register(a,new AGetter("_label"));a._level=RClass.register(a,new AGetter("_level"));a._location=RClass.register(a,new AGetter("_location"));a.construct=FEaiCityResource_construct;a.unserialize=FEaiCityResource_unserialize;a.dispose=FEaiCityResource_dispose;return a},MO.FEaiCityResource_construct=function(){this.__base.FObject.construct.call(this);
this._location=new SPoint3},MO.FEaiCityResource_unserialize=function(a){this._provinceCode=a.readUint16();this._code=a.readUint16();this._label=a.readString();this._level=a.readUint16();this._location.unserialize(a)},MO.FEaiCityResource_dispose=function(){this._location=RObject.dispose(this._location);this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiCityResourceConsole=function(a){a=RClass.inherits(this,a,FConsole);a._citys=RClass.register(a,new AGetter("_citys"));a.construct=FEaiCityResourceConsole_construct;a.find=FEaiCityResourceConsole_find;a.unserialize=FEaiCityResourceConsole_unserialize;a.dispose=FEaiCityResourceConsole_dispose;return a},MO.FEaiCityResourceConsole_construct=function(){this.__base.FConsole.construct.call(this);this._citys=new TDictionary},MO.FEaiCityResourceConsole_find=function(a){return this._citys.get(a)},
MO.FEaiCityResourceConsole_unserialize=function(a){for(var b=this._citys,c=a.readInt32(),d=0;d<c;d++){var e=RClass.create(FEaiCityResource);e.unserialize(a);b.set(e.code(),e)}},MO.FEaiCityResourceConsole_dispose=function(){this._citys=RObject.dispose(this._citys);this.__base.FConsole.dispose.call(this)};
with(MO)MO.FEaiHistoryCityResource=function(a){a=RClass.inherits(this,a,FObject);a._code=RClass.register(a,new AGetSet("_code"));a._investmentDay=RClass.register(a,new AGetSet("_investmentDay"));a._investmentTotal=RClass.register(a,new AGetSet("_investmentTotal"));a.unserialize=FEaiHistoryCityResource_unserialize;return a},MO.FEaiHistoryCityResource_unserialize=function(a){this._code=a.readUint16();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat()};
with(MO)MO.FEaiHistoryDateResource=function(a){a=RClass.inherits(this,a,FObject);a._code=RClass.register(a,new AGetter("_code"));a._investmentDay=RClass.register(a,new AGetter("_investmentDay"));a._investmentTotal=RClass.register(a,new AGetter("_investmentTotal"));a._provinces=RClass.register(a,new AGetter("_provinces"));a._citys=RClass.register(a,new AGetter("_citys"));a.construct=FEaiHistoryDateResource_construct;a.unserialize=FEaiHistoryDateResource_unserialize;a.dispose=FEaiHistoryDateResource_dispose;
return a},MO.FEaiHistoryDateResource_construct=function(){this.__base.FObject.construct.call(this);this._provinces=new TDictionary;this._citys=new TDictionary},MO.FEaiHistoryDateResource_unserialize=function(a){this._code=a.readString();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat();for(var b=this._provinces,c=a.readInt32(),d=0;d<c;d++){var e=RClass.create(FEaiHistoryProvinceResource);e.unserialize(a);b.set(e.code(),e)}b=this._citys;c=a.readInt32();for(d=0;d<c;d++)e=RClass.create(FEaiHistoryCityResource),
e.unserialize(a),b.set(e.code(),e)},MO.FEaiHistoryDateResource_dispose=function(){this._provinces=RObject.dispose(this._provinces);this._citys=RObject.dispose(this._citys);this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiHistoryMilestoneResource=function(a){a=RClass.inherits(this,a,FObject);a._code=RClass.register(a,new AGetSet("_code"));a._investmentTotal=RClass.register(a,new AGetSet("_investmentTotal"));a._dayCount=RClass.register(a,new AGetSet("_dayCount"));a._companyCount=RClass.register(a,new AGetSet("_companyCount"));a._staffCount=RClass.register(a,new AGetSet("_staffCount"));a.unserialize=FEaiHistoryMilestoneResource_unserialize;return a},MO.FEaiHistoryMilestoneResource_unserialize=function(a){this._code=
a.readString();this._investmentTotal=a.readFloat();this._dayCount=a.readUint16();this._companyCount=a.readUint16();this._staffCount=a.readUint16()};
with(MO)MO.FEaiHistoryProvinceResource=function(a){a=RClass.inherits(this,a,FObject);a._code=RClass.register(a,new AGetSet("_code"));a._investmentDay=RClass.register(a,new AGetSet("_investmentDay"));a._investmentTotal=RClass.register(a,new AGetSet("_investmentTotal"));a.unserialize=FEaiHistoryProvinceResource_unserialize;return a},MO.FEaiHistoryProvinceResource_unserialize=function(a){this._code=a.readUint16();this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat()};
with(MO)MO.FEaiHistoryResourceConsole=function(a){a=RClass.inherits(this,a,FConsole);a._investmentDay=RClass.register(a,new AGetter("_investmentDay"));a._investmentTotal=RClass.register(a,new AGetter("_investmentTotal"));a._investmentProvinceDay=RClass.register(a,new AGetter("_investmentProvinceDay"));a._investmentProvinceTotal=RClass.register(a,new AGetter("_investmentProvinceTotal"));a._investmentCityDay=RClass.register(a,new AGetter("_investmentCityDay"));a._investmentCityTotal=RClass.register(a,
new AGetter("_investmentCityTotal"));a._provinces=RClass.register(a,new AGetter("_provinces"));a._citys=RClass.register(a,new AGetter("_citys"));a._milestones=RClass.register(a,new AGetter("_milestones"));a._dates=RClass.register(a,new AGetter("_dates"));a.construct=FEaiHistoryResourceConsole_construct;a.unserialize=FEaiHistoryResourceConsole_unserialize;a.dispose=FEaiHistoryResourceConsole_dispose;return a},MO.FEaiHistoryResourceConsole_construct=function(){this.__base.FConsole.construct.call(this);
this._provinces=new TDictionary;this._citys=new TDictionary;this._milestones=new TDictionary;this._dates=new TDictionary},MO.FEaiHistoryResourceConsole_unserialize=function(a){this._investmentDay=a.readFloat();this._investmentTotal=a.readFloat();this._investmentProvinceDay=a.readFloat();this._investmentProvinceTotal=a.readFloat();this._investmentCityDay=a.readFloat();this._investmentCityTotal=a.readFloat();for(var b=a.readInt32(),c=0;c<b;c++){var d=RClass.create(FEaiHistoryProvinceResource);d.unserialize(a);
this._provinces.set(d.code(),d)}b=a.readInt32();for(c=0;c<b;c++)d=RClass.create(FEaiHistoryCityResource),d.unserialize(a),this._citys.set(d.code(),d);b=a.readInt32();for(c=0;c<b;c++)d=RClass.create(FEaiHistoryMilestoneResource),d.unserialize(a),this._milestones.set(d.code(),d);b=a.readInt32();for(c=0;c<b;c++)d=RClass.create(FEaiHistoryDateResource),d.unserialize(a),this._dates.set(d.code(),d)},MO.FEaiHistoryResourceConsole_dispose=function(){this._provinces=RObject.dispose(this._provinces);this._citys=
RObject.dispose(this._citys);this._milestones=RObject.dispose(this._milestones);this._dates=RObject.dispose(this._dates);this.__base.FConsole.dispose.call(this)};
with(MO)MO.FEaiProvinceResource=function(a){a=RClass.inherits(this,a,FObject);a._code=RClass.register(a,new AGetSet("_code"));a._name=RClass.register(a,new AGetter("_name"));a._label=RClass.register(a,new AGetSet("_label"));a.unserialize=FEaiProvinceResource_unserialize;return a},MO.FEaiProvinceResource_unserialize=function(a){this._code=a.readUint16();this._name=a.readString();this._label=a.readString()};
with(MO)MO.FEaiProvinceResourceConsole=function(a){a=RClass.inherits(this,a,FConsole);a._provinceCodes=RClass.register(a,new AGetter("_provinceCodes"));a._provinceNames=RClass.register(a,new AGetter("_provinceNames"));a.construct=FEaiProvinceResourceConsole_construct;a.findByCode=FEaiProvinceResourceConsole_findByCode;a.findByName=FEaiProvinceResourceConsole_findByName;a.unserialize=FEaiProvinceResourceConsole_unserialize;a.dispose=FEaiProvinceResourceConsole_dispose;return a},MO.FEaiProvinceResourceConsole_construct=
function(){this.__base.FConsole.construct.call(this);this._provinceCodes=new TDictionary;this._provinceNames=new TDictionary},MO.FEaiProvinceResourceConsole_findByCode=function(a){return this._provinceCodes.get(a)},MO.FEaiProvinceResourceConsole_findByName=function(a){return this._provinceNames.get(a)},MO.FEaiProvinceResourceConsole_unserialize=function(a){for(var b=this._provinceCodes,c=this._provinceNames,d=a.readInt32(),e=0;e<d;e++){var f=RClass.create(FEaiProvinceResource);f.unserialize(a);b.set(f.code(),
f);c.set(f.name(),f)}},MO.FEaiProvinceResourceConsole_dispose=function(){this._provinceCodes=RObject.dispose(this._provinceCodes);this._provinceNames=RObject.dispose(this._provinceNames);this.__base.FConsole.dispose.call(this)};
with(MO)MO.FEaiRateResource=function(a){a=RClass.inherits(this,a,FObject);a._count=RClass.register(a,new AGetter("_count"));a._colors=RClass.register(a,new AGetter("_colors"));a.construct=FEaiRateResource_construct;a.find=FEaiRateResource_find;a.findRate=FEaiRateResource_findRate;a.unserialize=FEaiRateResource_unserialize;a.dispose=FEaiRateResource_dispose;return a},MO.FEaiRateResource_construct=function(){this.__base.FObject.construct.call(this)},MO.FEaiRateResource_find=function(a){a=parseInt(a);
0>a&&(a=0);a>this._count&&(a=this._count-1);return this._colors[a]},MO.FEaiRateResource_findRate=function(a){return this.find(a*this._count)},MO.FEaiRateResource_unserialize=function(a){for(var b=this._count=a.readInt32(),c=this._colors=new Uint32Array(b),d=0;d<b;d++)c[d]=a.readUint32()},MO.FEaiRateResource_dispose=function(){this._colors=null;this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiRateResourceConsole=function(a){a=RClass.inherits(this,a,FConsole);a._rates=RClass.register(a,new AGetter("_rates"));a.construct=FEaiRateResourceConsole_construct;a.find=FEaiRateResourceConsole_find;a.unserialize=FEaiRateResourceConsole_unserialize;a.dispose=FEaiRateResourceConsole_dispose;return a},MO.FEaiRateResourceConsole_construct=function(){this.__base.FConsole.construct.call(this);this._rates=new TObjects},MO.FEaiRateResourceConsole_find=function(a){return this._rates.get(a)},
MO.FEaiRateResourceConsole_unserialize=function(a){for(var b=this._count=a.readInt32(),c=0;c<b;c++){var d=MO.Class.create(FEaiRateResource);d.unserialize(a);this._rates.push(d)}},MO.FEaiRateResourceConsole_dispose=function(){this._rates=RObject.dispose(this._rates);this.__base.FConsole.dispose.call(this)};
MO.FEaiResourceConsole=function(a){a=MO.RClass.inherits(this,a,MO.FConsole,MO.MListener);a._scopeCd=MO.EScope.Local;a._rateConsole=MO.Class.register(a,new MO.AGetter("_rateConsole"));a._provinceConsole=MO.Class.register(a,new MO.AGetter("_provinceConsole"));a._cityConsole=MO.Class.register(a,new MO.AGetter("_cityConsole"));a._historyConsole=MO.Class.register(a,new MO.AGetter("_historyConsole"));a._loadListeners=MO.Class.register(a,new MO.AListener("_loadListeners",MO.EEvent.Load));a.onLoad=MO.FEaiResourceConsole_onLoad;
a.construct=MO.FEaiResourceConsole_construct;a.unserialize=MO.FEaiResourceConsole_unserialize;a.load=MO.FEaiResourceConsole_load;a.dispose=MO.FEaiResourceConsole_dispose;return a};MO.FEaiResourceConsole_onLoad=function(a){a=a.outputData();var b=MO.Class.create(MO.FDataView);b.setEndianCd(!0);b.link(a);this.unserialize(b);b.dispose();a=new MO.SEvent;this.processLoadListener(a);a.dispose()};
MO.FEaiResourceConsole_construct=function(){this.__base.FConsole.construct.call(this);this._rateConsole=MO.RClass.create(MO.FEaiRateResourceConsole);this._provinceConsole=MO.RClass.create(MO.FEaiProvinceResourceConsole);this._cityConsole=MO.RClass.create(MO.FEaiCityResourceConsole);this._historyConsole=MO.RClass.create(MO.FEaiHistoryResourceConsole)};
MO.FEaiResourceConsole_unserialize=function(a){this._rateConsole.unserialize(a);this._provinceConsole.unserialize(a);this._cityConsole.unserialize(a);this._historyConsole.unserialize(a)};MO.FEaiResourceConsole_load=function(){MO.RConsole.find(MO.FHttpConsole).send("/script/ars/eai/resource.dat").addLoadListener(this,this.onLoad)};
MO.FEaiResourceConsole_dispose=function(a){this._rateConsole=RObject.dispose(this._rateConsole);this._provinceConsole=RObject.dispose(this._provinceConsole);this._cityConsole=RObject.dispose(this._cityConsole);this._historyConsole=RObject.dispose(this._historyConsole);this.__base.FConsole.dispose.call(this)};
with(MO)MO.FEaiCityEffect=function(a){a=RClass.inherits(this,a,FG3dAutomaticEffect);a._code="eai.city";a.drawRenderable=FEaiCityEffect_drawRenderable;return a},MO.FEaiCityEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=b.currentMatrix(),f=a.calculate(EG3dRegionParameter.CameraViewProjectionMatrix),g=b.material(),h=g.info();this.bindMaterial(g);d.setParameter("vc_model_matrix",e);d.setParameter("vc_vp_matrix",f);d.setParameter4("fc_alpha",h.alphaBase,h.alphaRate,h.alphaLevel,
h.alphaMerge);d.setParameter("fc_ambient_color",h.ambientColor);this.bindAttributes(b);this.bindSamplers(b);d=b.indexBuffers().first();c.drawTriangles(d)};
with(MO)MO.FEaiCityRangeEffect=function(a){a=RClass.inherits(this,a,FG3dAutomaticEffect);a._code="eai.city.range";a.drawRenderable=FEaiCityRangeEffect_drawRenderable;return a},MO.FEaiCityRangeEffect_drawRenderable=function(a,b){var c=this._graphicContext,d=this._program,e=b.currentMatrix(),f=a.calculate(EG3dRegionParameter.CameraViewProjectionMatrix),g=b.material();g.info();this.bindMaterial(g);d.setParameter("vc_model_matrix",e);d.setParameter("vc_vp_matrix",f);this.bindAttributes(b);this.bindSamplers(b);
d=b.indexBuffers().first();c.drawTriangles(d)};
with(MO)MO.FEaiLogic=function(a){a=RClass.inherits(this,a,FObject);a._code=null;a.makeUrl=FEaiLogicOrganization_makeUrl;a.send=FEaiLogicOrganization_send;return a},MO.FEaiLogicOrganization_makeUrl=function(a,b){var c="http://"+MO.RConsole.find(MO.FEnvironmentConsole).findValue(MO.EEaiConstant.ServiceHost)+"/eai/"+this._code+"/"+a;b&&(c+="?"+b);return c},MO.FEaiLogicOrganization_send=function(a,b,c,d){a=this.makeUrl(a,b);a=RConsole.find(FJsonConsole).sendAsync(a);a.addProcessListener(c,d);return a};
with(MO)MO.FEaiLogicAchievement=function(a){a=RClass.inherits(this,a,FEaiLogic);a._code="achievement";a.doGroup=FEaiLogicAchievement_doGroup;a.doSort=FEaiLogicAchievement_doSort;a.doQuery=FEaiLogicAchievement_doQuery;return a},MO.FEaiLogicAchievement_doGroup=function(a,b){return this.send("group",null,a,b)},MO.FEaiLogicAchievement_doSort=function(a,b){return this.send("sort",null,a,b)},MO.FEaiLogicAchievement_doQuery=function(a,b){return this.send("query",null,a,b)};
MO.FEaiLogicConsole=function(a){a=MO.Class.inherits(this,a,MO.FConsole);a._system=MO.Class.register(a,new MO.AGetter("_system"));a._organization=MO.Class.register(a,new MO.AGetter("_organization"));a._achievement=MO.Class.register(a,new MO.AGetter("_achievement"));a._schedule=MO.Class.register(a,new MO.AGetter("_schedule"));a._statistics=MO.Class.register(a,new MO.AGetter("_statistics"));a._thread=null;a._interval=6E5;a.onProcess=MO.FEaiLogicConsole_onProcess;a.construct=MO.FEaiLogicConsole_construct;
a.dispose=MO.FEaiLogicConsole_dispose;return a};MO.FEaiLogicConsole_onProcess=function(a){this._system.refresh()};
MO.FEaiLogicConsole_construct=function(){this.__base.FConsole.construct.call(this);this._system=MO.Class.create(MO.FEaiLogicSystem);this._organization=MO.Class.create(MO.FEaiLogicOrganization);this._achievement=MO.Class.create(MO.FEaiLogicAchievement);this._schedule=MO.Class.create(MO.FEaiLogicSchedule);this._statistics=MO.Class.create(MO.FEaiLogicStatistics);var a=this._thread=MO.Class.create(MO.FThread);a.setInterval(this._interval);a.addProcessListener(this,this.onProcess);MO.Console.find(MO.FThreadConsole).start(a)};
MO.FEaiLogicConsole_dispose=function(){this._system=MO.RObject.dispose(this._system);this._organization=MO.RObject.dispose(this._organization);this._achievement=MO.RObject.dispose(this._achievement);this._schedule=MO.RObject.dispose(this._schedule);this._statistics=MO.RObject.dispose(this._statistics);this.__base.FConsole.dispose.call(this)};
with(MO)MO.FEaiLogicOrganization=function(a){a=RClass.inherits(this,a,FEaiLogic);a._code="organization";a._pIdMIndexDict=RClass.register(a,new AGetter("_pIdMIndexDict"));a._cityIdNameDict=RClass.register(a,new AGetter("_cityIdNameDict"));a._provinceColors=RClass.register(a,new AGetter("_provinceColors"));a.doFetch=FEaiLogicOrganization_doFetch;a.getMeshIndex=FEaiLogicOrganization_getMeshIndex;a.construct=FEaiLogicOrganization_construct;return a},MO.FEaiLogicOrganization_construct=function(){this.__base.FEaiLogic.construct.call(this);
var a=this._pIdMIndexDict=new TDictionary;a.set(11,6);a.set(12,7);a.set(13,5);a.set(14,8);a.set(15,2);a.set(21,4);a.set(22,3);a.set(23,1);a.set(31,-1);a.set(32,21);a.set(33,22);a.set(34,20);a.set(35,30);a.set(36,23);a.set(37,9);a.set(41,10);a.set(42,19);a.set(43,29);a.set(44,24);a.set(45,25);a.set(46,0);a.set(50,18);a.set(51,17);a.set(52,26);a.set(53,27);a.set(54,16);a.set(61,12);a.set(62,13);a.set(63,15);a.set(64,11);a.set(65,14);a.set(71,28);a.set(81,-1);a.set(82,-1);this._cityIdNameDict=new TDictionary;
a=this._provinceColors=new TObjects;a.push(new SColor4(.25,.5,.6));a.push(new SColor4(.3,.6,.75));a.push(new SColor4(.35,.7,.8));a.push(new SColor4(.4,.75,.85));a.push(new SColor4(.45,.85,1))},MO.FEaiLogicOrganization_doFetch=function(a,b){return this.send("fetch",null,a,b)},MO.FEaiLogicOrganization_getMeshIndex=function(a){return this.pIdMIndexDict().value(a)},MO.FEaiLogicOrganization_getMeshIndex=function(a){return this.cityIdNameDict().value(a)};
with(MO)MO.FEaiLogicSchedule=function(a){a=RClass.inherits(this,a,FEaiLogic);a._code="schedule";a.doFetch=FEaiLogicSchedule_doFetch;return a},MO.FEaiLogicSchedule_doFetch=function(a,b){return this.send("fetch",null,a,b)};MO.FEaiLogicStatistics=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="statistics";a.doInvestmentDynamic=MO.FEaiLogicStatistics_doInvestmentDynamic;a.doInvestmentTrend=MO.FEaiLogicStatistics_doInvestmentTrend;return a};
MO.FEaiLogicStatistics_doInvestmentDynamic=function(a,b,c,d){return this.send("investment_dynamic","begin="+c+"&end="+d,a,b)};MO.FEaiLogicStatistics_doInvestmentTrend=function(a,b,c,d,e){return this.send("investment_trend","begin="+c+"&end="+d+"&interval="+e,a,b)};
MO.FEaiLogicSystem=function(a){a=MO.Class.inherits(this,a,MO.FEaiLogic);a._code="system";a._ready=!1;a._currentDate=null;a._localDate=null;a._systemDate=MO.Class.register(a,new MO.AGetter("_systemDate"));a.onInfo=MO.FEaiLogicSystem_onInfo;a.construct=MO.FEaiLogicSystem_construct;a.doInfo=MO.FEaiLogicSystem_doInfo;a.testReady=MO.FEaiLogicSystem_testReady;a.currentDate=MO.FEaiLogicSystem_currentDate;a.refresh=MO.FEaiLogicSystem_refresh;a.dispose=MO.FEaiLogicSystem_dispose;return a};
MO.FEaiLogicSystem_onInfo=function(a){a=a.content;this._localDate.setNow();this._systemDate.parse(a.date);this._ready=!0};MO.FEaiLogicSystem_construct=function(){this.__base.FEaiLogic.construct.call(this);this._currentDate=new MO.TDate;this._localDate=new MO.TDate;this._systemDate=new MO.TDate};MO.FEaiLogicSystem_doInfo=function(a,b){return this.send("info",null,a,b)};MO.FEaiLogicSystem_testReady=function(){return this._ready};
MO.FEaiLogicSystem_currentDate=function(){var a=this._systemDate.get()-this._localDate.get();this._currentDate.set(MO.Timer.current()+a);return this._currentDate};MO.FEaiLogicSystem_refresh=function(){return this.doInfo(this,this.onInfo)};MO.FEaiLogicSystem_dispose=function(){this._localDate=RObject.dispose(this._localDate);this._systemDate=RObject.dispose(this._systemDate);this.__base.FEaiLogic.consturct.call(this)};
with(MO)MO.FEaiBoundaryData=function(a){a=RClass.inherits(this,a,FEaiEntity);a._positionCount=RClass.register(a,new AGetter("_positionCount"));a._positions=RClass.register(a,new AGetter("_positions"));a._indexes=RClass.register(a,new AGetter("_indexes"));a.construct=FEaiBoundaryData_construct;a.unserialize=FEaiBoundaryData_unserialize;a.dispose=FEaiBoundaryData_dispose;return a},MO.FEaiBoundaryData_construct=function(){this.__base.FEaiEntity.construct.call(this)},MO.FEaiBoundaryData_unserialize=function(a){var b=
0,c=this._positionCount=a.readInt32();this._positions=new Float32Array(2*c);for(var d=0;d<c;d++)this._positions[b++]=a.readFloat(),this._positions[b++]=a.readFloat();b=a.readInt32();this._indexes=new Uint16Array(b);for(d=0;d<b;d++)this._indexes[d]=a.readUint16()},MO.FEaiBoundaryData_dispose=function(){this._indexes=this._positions=null;this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiCityEntity=function(a){a=RClass.inherits(this,a,FEaiEntity);a._visible=RClass.register(a,new AGetter("_visible"),!1);a._location=RClass.register(a,new AGetter("_location"));a._size=RClass.register(a,new AGetter("_size"));a._color=RClass.register(a,new AGetter("_color"));a._range=RClass.register(a,new AGetter("_range"),1);a._rangeColor=RClass.register(a,new AGetter("_rangeColor"));a._investmentCount=0;a._investmentTotal=RClass.register(a,new AGetSet("_investmentTotal"));a._investmentLevelTotal=
1E4;a._investmentLevel=0;a._data=RClass.register(a,new AGetSet("_data"));a.construct=FEaiCityEntity_construct;a.build=FEaiCityEntity_build;a.addInvestmentTotal=FEaiCityEntity_addInvestmentTotal;a.update=FEaiCityEntity_update;a.process=FEaiCityEntity_process;a.dispose=FEaiCityEntity_dispose;return a},MO.FEaiCityEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._location=new SPoint2;this._size=new SSize2;this._color=new SColor4(0,0,0,0);this._rangeColor=new SColor4(0,0,0,
0)},MO.FEaiCityEntity_build=function(a){this._location.assign(this._data.location());this._size.set(2,2)},MO.FEaiCityEntity_addInvestmentTotal=function(a){this._investmentCount++;this._investmentTotal+=a;this._investmentLevel=this._investmentLevelTotal;var b=RConsole.find(FEaiResourceConsole).rateConsole().find(EEaiRate.Line).findRate(this._investmentTotal/2E5);this._color.set(1,1,1,1);this._range=RFloat.toRange(Math.log(a)/5,0,6);this._rangeColor.setInteger(b);this._rangeColor.alpha=1;this._visible=
!0},MO.FEaiCityEntity_update=function(a){var b=1;this._visible=!0;this._color.set(1,1,1,1);this._rangeColor.set(1,1,1,1);if(a){var c=RConsole.find(FEaiResourceConsole).historyConsole().investmentCityTotal(),b=RConsole.find(FEaiResourceConsole).rateConsole().find(EEaiRate.Map);a=4*Math.sqrt(a.investmentTotal()/c);c=b.findRate(a);b=6*a;a=RFloat.toRange(a,0,1);this._rangeColor.set((c>>16&255)/255,(c>>8&255)/255,(c>>0&255)/255,1*a)}else this._rangeColor.set(0,0,0,0);this._range=RFloat.toRange(Math.sqrt(b),
1,6)},MO.FEaiCityEntity_process=function(a){return 0<this._investmentLevel?(a=this._investmentLevel/this._investmentLevelTotal,this._color.alpha=a,this._rangeColor.alpha=a,this._investmentLevel--,0==this._investmentLevel&&(this._visible=!1),!0):!1},MO.FEaiCityEntity_dispose=function(){this._location=RObject.dispose(this._location);this._size=RObject.dispose(this._size);this._color=RObject.dispose(this._color);this._rangeColor=RObject.dispose(this._rangeColor);this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiCitysRangeRenderable=function(a){a=RClass.inherits(this,a,FE3dRenderable);a._ready=!1;a._image=null;a._citys=RClass.register(a,new AGetter("_citys"));a._citySize=RClass.register(a,new AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexColorBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=FEaiCitysRangeRenderable_onImageLoad;a.construct=FEaiCitysRangeRenderable_construct;a.testReady=FEaiCitysRangeRenderable_testReady;a.setup=FEaiCitysRangeRenderable_setup;
a.upload=FEaiCitysRangeRenderable_upload;a.loadUrl=FEaiCitysRangeRenderable_loadUrl;a.dispose=FEaiCitysRangeRenderable_dispose;return a},MO.FEaiCitysRangeRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0},MO.FEaiCitysRangeRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new TObjects;this._material=RClass.create(FE3dMaterial)},MO.FEaiCitysRangeRenderable_testReady=function(){return this._ready},MO.FEaiCitysRangeRenderable_setup=
function(){var a=this._graphicContext,b=this._citys.count(),c=this._vertexCount=4*b,d=this._vertexPositionBuffer=a.createVertexBuffer();d.setCode("position");d.setFormatCd(EG3dAttributeFormat.Float3);this.pushVertexBuffer(d);for(var d=0,e=new Float32Array(2*c),f=0;f<b;f++)e[d++]=0,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=1,e[d++]=0,e[d++]=0,e[d++]=0;d=this._vertexCoordBuffer=a.createVertexBuffer();d.setCode("coord");d.setFormatCd(EG3dAttributeFormat.Float2);d.upload(e,8,c);this.pushVertexBuffer(d);d=this._vertexColorBuffer=
a.createVertexBuffer();d.setCode("color");d.setFormatCd(EG3dAttributeFormat.Byte4Normal);this.pushVertexBuffer(d);c=6*b;d=0;e=new Uint16Array(c);for(f=0;f<b;f++){var g=4*f;e[d++]=g+0;e[d++]=g+1;e[d++]=g+2;e[d++]=g+0;e[d++]=g+2;e[d++]=g+3}d=this._indexBuffer=a.createIndexBuffer();d.upload(e,c);this.pushIndexBuffer(d);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(EG3dSamplerFilter.ClampToEdge,EG3dSamplerFilter.ClampToEdge);this.pushTexture(a,"diffuse");a=this._material.info();
a.effectCode="eai.citys.range";a.optionAlpha=!0;this._material._textures=this._textures;this.loadUrl("/script/ars/eai/dot.png")},MO.FEaiCitysRangeRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),l=0,m=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),e.visible()){var k=e.location(),q=e.range();e.size();h[g++]=k.x-q;h[g++]=k.y+q;h[g++]=0;h[g++]=k.x+q;h[g++]=k.y+q;h[g++]=0;h[g++]=k.x+
q;h[g++]=k.y-q;h[g++]=0;h[g++]=k.x-q;h[g++]=k.y-q;h[g++]=0;for(var t=e.rangeColor(),e=parseInt(255*t.red),k=parseInt(255*t.green),q=parseInt(255*t.blue),t=parseInt(255*t.alpha),r=0;4>r;r++)m[l++]=e,m[l++]=k,m[l++]=q,m[l++]=t}this._vertexPositionBuffer.upload(h,12,f);this._vertexColorBuffer.upload(m,4,f);this._indexBuffer.setCount(6*c)},MO.FEaiCitysRangeRenderable_loadUrl=function(a){var b=RClass.create(FImage);b.addLoadListener(this,this.onImageLoad);b.loadUrl(a);this._ready=!1},MO.FEaiCitysRangeRenderable_dispose=
function(){this._texture=RObject.dispose(this._texture);this._vertexPositionBuffer=RObject.dispose(this._vertexPositionBuffer);this._vertexCoordBuffer=RObject.dispose(this._vertexCoordBuffer);this._indexBuffer=RObject.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
with(MO)MO.FEaiCitysRenderable=function(a){a=RClass.inherits(this,a,FE3dRenderable);a._ready=!1;a._image=null;a._levelCoordLeft=null;a._levelCoordRight=null;a._levelScale=null;a._citys=RClass.register(a,new AGetter("_citys"));a._level=RClass.register(a,new AGetSet("_level"));a._citySize=RClass.register(a,new AGetter("_citySize"));a._vertexPositionBuffer=null;a._vertexCoordBuffer=null;a._indexBuffer=null;a._texture=null;a.onImageLoad=FEaiCitysRenderable_onImageLoad;a.construct=FEaiCitysRenderable_construct;
a.testReady=FEaiCitysRenderable_testReady;a.setup=FEaiCitysRenderable_setup;a.upload=FEaiCitysRenderable_upload;a.loadUrl=FEaiCitysRenderable_loadUrl;a.dispose=FEaiCitysRenderable_dispose;return a},MO.FEaiCitysRenderable_onImageLoad=function(a){a=a.sender;this._texture.upload(a);a.dispose();this._ready=!0},MO.FEaiCitysRenderable_construct=function(){this.__base.FE3dRenderable.construct.call(this);this._citys=new TObjects;this._material=RClass.create(FE3dMaterial);var a=this._levelCoordLeft={};a[1]=
0;a[2]=.25;a[3]=.5;a[4]=.75;a=this._levelCoordRight={};a[1]=.25;a[2]=.5;a[3]=.75;a[4]=1;a=this._levelScale={};a[1]=.7;a[2]=.5;a[3]=.4;a[4]=.2},MO.FEaiCitysRenderable_testReady=function(){return this._ready},MO.FEaiCitysRenderable_setup=function(){var a=this._graphicContext,b=this._citys.count();this._vertexCount=4*b;var c=this._vertexPositionBuffer=a.createVertexBuffer();c.setCode("position");c.setFormatCd(EG3dAttributeFormat.Float3);this.pushVertexBuffer(c);c=this._vertexCoordBuffer=a.createVertexBuffer();
c.setCode("coord");c.setFormatCd(EG3dAttributeFormat.Float2);this.pushVertexBuffer(c);c=this._vertexColorBuffer=a.createVertexBuffer();c.setCode("color");c.setFormatCd(EG3dAttributeFormat.Byte4Normal);this.pushVertexBuffer(c);for(var d=6*b,c=0,e=new Uint16Array(d),f=0;f<b;f++){var g=4*f;e[c++]=g+0;e[c++]=g+1;e[c++]=g+2;e[c++]=g+0;e[c++]=g+2;e[c++]=g+3}c=this._indexBuffer=a.createIndexBuffer();c.upload(e,d);this.pushIndexBuffer(c);a=this._texture=a.createFlatTexture();a.setOptionFlipY(!0);a.setWrapCd(EG3dSamplerFilter.ClampToEdge,
EG3dSamplerFilter.ClampToEdge);this.pushTexture(a,"diffuse");a=this._material.info();a.effectCode="eai.citys";a.optionAlpha=!0;a.ambientColor.setHex("#FFFFFF");this._material._textures=this._textures;this.loadUrl("/script/ars/eai/citys.png")},MO.FEaiCitysRenderable_upload=function(){for(var a=this._citys,b=a.count(),c=0,d=0;d<b;d++){var e=a.at(d);e.visible()&&c++}for(var f=this._vertexCount=4*c,g=0,h=new Float32Array(3*f),l=0,m=new Float32Array(2*f),k=0,q=new Uint8Array(4*f),d=0;d<b;d++)if(e=a.at(d),
e.visible()){var t=e.location(),r=e.data().level();if(1!=r&&2!=r&&3!=r&&4!=r)throw new TError("Invalid level.");var n=this._levelCoordLeft[r],u=this._levelCoordRight[r],r=this._levelScale[r];h[g++]=t.x-r;h[g++]=t.y+r;h[g++]=0;h[g++]=t.x+r;h[g++]=t.y+r;h[g++]=0;h[g++]=t.x+r;h[g++]=t.y-r;h[g++]=0;h[g++]=t.x-r;h[g++]=t.y-r;h[g++]=0;m[l++]=n;m[l++]=1;m[l++]=u;m[l++]=1;m[l++]=u;m[l++]=0;m[l++]=n;m[l++]=0;u=e.color();e=parseInt(255*u.red);t=parseInt(255*u.green);n=parseInt(255*u.blue);u=parseInt(255*u.alpha);
for(r=0;4>r;r++)q[k++]=e,q[k++]=t,q[k++]=n,q[k++]=u}this._vertexPositionBuffer.upload(h,12,f);this._vertexCoordBuffer.upload(m,8,f);this._vertexColorBuffer.upload(q,4,f);this._indexBuffer.setCount(6*c)},MO.FEaiCitysRenderable_loadUrl=function(a){var b=RClass.create(FImage);b.addLoadListener(this,this.onImageLoad);b.loadUrl(a);this._ready=!1},MO.FEaiCitysRenderable_dispose=function(){this._texture=RObject.dispose(this._texture);this._vertexPositionBuffer=RObject.dispose(this._vertexPositionBuffer);
this._vertexCoordBuffer=RObject.dispose(this._vertexCoordBuffer);this._vertexColorBuffer=RObject.dispose(this._vertexColorBuffer);this._indexBuffer=RObject.dispose(this._indexBuffer);this.__base.FE3dRenderable.dispose.call(this)};
with(MO)MO.FEaiCountryData=function(a){a=RClass.inherits(this,a,FObject,MListener);a._listenersLoad=RClass.register(a,new AListener("_listenersLoad",EEvent.Load));a._provinces=RClass.register(a,new AGetter("_provinces"));a.onLoaded=FEaiCountryData_onLoaded;a.construct=FEaiCountryData_construct;a.unserialize=FEaiCountryData_unserialize;a.load=FEaiCountryData_load;a.dispose=FEaiCountryData_dispose;return a},MO.FEaiCountryData_construct=function(){this.__base.FObject.construct.call(this);this._provinces=
new TDictionary},MO.FEaiCountryData_onLoaded=function(a){a=a.outputData();var b=RClass.create(FDataView);b.setEndianCd(!0);b.link(a);this.unserialize(b);b.dispose()},MO.FEaiCountryData_unserialize=function(a){for(var b=a.readInt32(),c=0;c<b;c++){var d=RClass.create(FEaiProvinceData);d.unserialize(a);this._provinces.set(d.name(),d)}a=new SEvent(this);this.processLoadListener(a);a.dispose()},MO.FEaiCountryData_load=function(){RConsole.find(FHttpConsole).send("/script/ars/eai/country.dat").addLoadListener(this,
this.onLoaded)},MO.FEaiCountryData_dispose=function(){this._provinces=RObject.dispose(this._provinces);this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiCountryEntity=function(a){a=RClass.inherits(this,a,FEaiEntity);a._cameraDirection=RClass.register(a,new AGetSet("_cameraDirection"));a._startDelay=RClass.register(a,new AGetSet("_startDelay"),0);a._riseDuration=RClass.register(a,new AGetSet("_riseDuration"),1200);a._riseDistance=RClass.register(a,new AGetSet("_riseDistance"),2050);a._fallDuration=RClass.register(a,new AGetSet("_fallDuration"),400);a._fallDistance=RClass.register(a,new AGetSet("_fallDistance"),50);a._blockInterval=RClass.register(a,
new AGetSet("_blockInterval"),60);a._mouseOverRiseHeight=RClass.register(a,new AGetSet("_mouseOverRiseHeight"),10);a._mouseMoveCheckInterval=RClass.register(a,new AGetSet("_mouseMoveCheckInterval"),100);a._cameraMoveDuration=RClass.register(a,new AGetSet("_cameraMoveDuration"),500);a._template=RClass.register(a,new AGetSet("_template"));a._introAnimeDone=RClass.register(a,new AGetSet("_introAnimeDone"),!1);a._startTime=RClass.register(a,new AGetSet("_startTime"));a._mouseOverRiseRenderable=RClass.register(a,
new AGetSet("_mouseOverRiseRenderable"));a._mouseOverFallArray=RClass.register(a,new AGetSet("_mouseOverFallArray"));a._mouseMoveLastCheck=RClass.register(a,new AGetSet("_mouseMoveLastCheck"));a._cameraMoving=RClass.register(a,new AGetSet("_cameraMoving"),!1);a._cameraFrom=RClass.register(a,new AGetSet("_cameraFrom"));a._cameraTo=RClass.register(a,new AGetSet("_cameraTo"));a.initialize=FEaiCountryEntity_initialize;a.introAnime=FEaiCountryEntity_introAnime;a.onMouseMove=FEaiCountryEntity_onMouseMove;
a.onMouseDown=FEaiCountryEntity_onMouseDown;a.mouseOverFallAnime=FEaiCountryEntity_mouseOverFallAnime;a.onOrganizationFetch=FEaiCountryEntity_onOrganizationFetch;a.cameraMoveAnime=FEaiCountryEntity_cameraMoveAnime;return a},MO.FEaiCountryEntity_initialize=function(a){this.setCameraDirection(new SVector3(.02,-.9,.5));this.setCameraFrom(new SPoint3);this.setCameraTo(new SPoint3);this.setMouseOverFallArray(new TObjects);this.setTemplate(a);this.setMouseMoveLastCheck(new Date);this.template().addEnterFrameListener(this,
FEaiCountryEntity_onEnterFrame);a=this.template().region();a.backgroundColor().set(.2,.2,.2,1);a=a.camera();a.setPosition(3,24,-.5);a.setDirection(this.cameraDirection().x,this.cameraDirection().y,this.cameraDirection().z);a=this.template().sprite();for(var b=0;b<a.renderables().count();b++)a.renderables().at(b).material().info().optionAlpha=!0;this.setStartTime(new Date)},MO.FEaiCountryEntity_onEnterFrame=function(){this.introAnimeDone()?this.cameraMoving()?this.cameraMoveAnime():this.mouseOverFallAnime():
this.introAnime()},MO.FEaiCountryEntity_introAnime=function(){var a=this.template().sprite(),b=(new Date).getTime()-this.startTime().getTime();if(!(b<this.startDelay())){b-=this.startDelay();if(b>this.riseDuration()+this.fallDuration()+this.blockInterval()*a.renderables().count()){this.setIntroAnimeDone(!0);var c=new TListener;c._owner=this;c._callback=this.onMouseMove;RWindow.lsnsMouseMove.push(c);c=new TListener;c._owner=this;c._callback=this.onMouseDown;RWindow.lsnsMouseDown.push(c);RConsole.find(FEnvironmentConsole).registerValue(EEaiConstant.ServiceHost,
"115.28.82.149");MO.RConsole.find(FEaiLogicConsole).organization().doFetch(this,this.onOrganizationFetch)}for(var c=b/this.blockInterval(),d=0;d<a.renderables().count()&&d<c;d++){var e=a.renderables().at(d).matrix(),f=(b-this.blockInterval()*d)/this.riseDuration(),g=0;1<f&&(f=1,g=(b-this.blockInterval()*d-this.riseDuration())/this.fallDuration(),1<g&&(g=1));e.ty=this.riseDistance()*f-this.fallDistance()*g;e.updateForce()}}},MO.FEaiCountryEntity_onMouseMove=function(a){(new Date).getDate()-this.mouseMoveLastCheck()<
this.mouseMoveCheckInterval||(a=RConsole.find(FG3dTechniqueConsole).find(canvas._graphicContext,FG3dSelectTechnique).test(this.template().region(),a.offsetX,a.offsetY),this.mouseOverRiseRenderable()!=a&&(this.mouseOverRiseRenderable()&&this.mouseOverFallArray().push(this.mouseOverRiseRenderable()),this.setMouseOverRiseRenderable(a),this.mouseOverFallArray().contains(this.mouseOverRiseRenderable())&&this.mouseOverFallArray().remove(this.mouseOverRiseRenderable())))},MO.FEaiCountryEntity_mouseOverFallAnime=
function(){for(var a=this.mouseOverFallArray().count()-1;0<=a;a--){var b=this.mouseOverFallArray().at(a).matrix();b.ty>this.riseDistance()-this.fallDistance()?--b.ty:(b.ty=this.riseDistance()-this.fallDistance(),this.mouseOverFallArray().erase(a));b.updateForce()}this.mouseOverRiseRenderable()&&(a=this.mouseOverRiseRenderable().matrix(),a.ty<this.riseDistance()-this.fallDistance()+this.mouseOverRiseHeight()&&(a.ty=this.riseDistance()-this.fallDistance()+this.mouseOverRiseHeight(),a.updateForce()))},
MO.FEaiCountryEntity_onOrganizationFetch=function(a){var b=a.content;a={};for(var c=0;c<b.collection.length;c++)a[b.collection[c].province_id]?(a[b.collection[c].province_id]++,null==b.collection[c].province_id&&b.collection[c].label):a[b.collection[c].province_id]=1;for(var c=MO.RConsole.find(FEaiLogicConsole),b=c.organization().dict(),d=c.organization().provinceColors(),c=0;c<b.count();c++){var e=a[b.name(c)];e||(e=0);var f=b.valueAt(c);if(!(0>f)){var f=this.template().sprite().renderables().at(f),
g=f.material().info().ambientColor;f.material().info();g.assign(d.at(0==e?0:4<Math.floor(e/5+1)?4:Math.floor(e/5+1)));f.material().update()}}},MO.FEaiCountryEntity_onMouseDown=function(a){var b=this.template().region().camera();if(a=RConsole.find(FG3dTechniqueConsole).find(canvas._graphicContext,FG3dSelectTechnique).test(this.template().region(),a.offsetX,a.offsetY)){a=a.calculateOutline();var c=new SOutline3d;c.calculateFrom(a,b.matrix());c=c.radius/Math.sin(b.projection().angle()/2)*Math.sin(90-
b.projection().angle()/2);a=a.center;a=new SPoint3(a.x-c*this.cameraDirection().x,a.y-c*this.cameraDirection().y,a.z-c*this.cameraDirection().z);b=b.position();this.setStartTime(new Date);this.cameraFrom().assign(b);this.cameraTo().assign(a);this.setCameraMoving(!0)}else b.setPosition(3,24,-.5),b.update()},MO.FEaiCountryEntity_cameraMoveAnime=function(){var a=((new Date).getTime()-this.startTime().getTime())/this.cameraMoveDuration();1<=a&&(a=1,this.setCameraMoving(!1));var a=1-(1-a)*(1-a),b=new SPoint3;
b.slerp(this.cameraFrom(),this.cameraTo(),a);var c=this.template().region().camera();c.position().assign(b);c.update();b=this.template().sprite();for(c=0;c<b.renderables().count();c++){var d=b.renderables().at(c);d!=this.mouseOverRiseRenderable()&&(d.material().info().alphaRate=1.5-a,d.material().update())}};
MO.FEaiMapEntity=function(a){a=MO.Class.inherits(this,a,MO.FEaiEntity);a._provinceEntities=MO.Class.register(a,new MO.AGetter("_provinceEntities"));a._cityEntities=MO.Class.register(a,new MO.AGetter("_cityEntities"));a._citysRenderable=MO.Class.register(a,new MO.AGetSet("_citysRenderable"));a._citysRangeRenderable=MO.Class.register(a,new MO.AGetSet("_citysRangeRenderable"));a.construct=MO.FEaiMapEntity_construct;a.findCityByCard=MO.FEaiMapEntity_findCityByCard;a.upload=MO.FEaiMapEntity_upload;a.process=
MO.FEaiMapEntity_process;a.dispose=MO.FEaiMapEntity_dispose;return a};MO.FEaiMapEntity_construct=function(){this.__base.FEaiEntity.construct.call(this);this._provinceEntities=new MO.TDictionary;this._cityEntities=new MO.TDictionary};MO.FEaiMapEntity_findCityByCard=function(a){if(4!=a.length)return null;var b=this._cityEntities;if(b=b.get(a))return b;b=this._cityEntities;return(b=b.get(a.substring(0,2)))?b:null};MO.FEaiMapEntity_upload=function(){this._citysRenderable.upload();this._citysRangeRenderable.upload()};
MO.FEaiMapEntity_process=function(a){a=!1;for(var b=this._cityEntities,c=b.count(),d=0;d<c;d++)b.at(d).process()&&(a=!0);a&&this.upload()};MO.FEaiMapEntity_dispose=function(){this._provinceEntities=MO.RObject.dispose(this._provinceEntities);this._cityEntities=MO.RObject.dispose(this._cityEntities);this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiProvinceData=function(a){a=RClass.inherits(this,a,FEaiEntity);a._name=RClass.register(a,new AGetSet("_name"));a._color=RClass.register(a,new AGetSet("_color"));a._boundaries=RClass.register(a,new AGetter("_boundaries"));a.construct=FEaiProvinceData_construct;a.unserialize=FEaiProvinceData_unserialize;a.dispose=FEaiProvinceData_dispose;return a},MO.FEaiProvinceData_construct=function(){this.__base.FEaiEntity.construct.call(this);this._boundaries=new TObjects},MO.FEaiProvinceData_unserialize=
function(a){this._name=a.readString();this._color=a.readUint32();for(var b=a.readInt32(),c=0;c<b;c++){var d=RClass.create(FEaiBoundaryData);d.unserialize(a);this._boundaries.push(d)}},MO.FEaiProvinceData_dispose=function(){this._boundaries=RObject.dispose(this._boundaries);this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiProvinceEntity=function(a){a=RClass.inherits(this,a,FEaiEntity);a._data=RClass.register(a,new AGetSet("_data"));a._faceRenderable=RClass.register(a,new AGetter("_faceRenderable"));a._borderRenderable=RClass.register(a,new AGetter("_borderRenderable"));a._layerDepth=3;a.construct=FEaiProvinceEntity_construct;a.buildFace=FEaiProvinceEntity_buildFace;a.buildBorder=FEaiProvinceEntity_buildBorder;a.build=FEaiProvinceEntity_build;a.update=FEaiProvinceEntity_update;a.dispose=FEaiProvinceEntity_dispose;
return a},MO.FEaiProvinceEntity_construct=function(){this.__base.FEaiEntity.construct.call(this)},MO.FEaiProvinceEntity_buildFace=function(a){for(var b=this._data.boundaries(),c=b.count(),d=this._vertexTotal,e=this._indexTotal,f=0,g=0,h=new Float32Array(6*d),l=0,e=new Uint16Array(2*e+6*d),m=0;m<c;m++){for(var k=b.at(m),q=k.positionCount(),t=k.positions(),r=0,n=0;n<q;n++)h[g++]=t[r++],h[g++]=t[r++],h[g++]=0;k=k.indexes();t=k.length;for(n=0;n<t;n++)e[l++]=f+k[n];f+=q}for(var u=f,m=0;m<c;m++){k=b.at(m);
q=k.positionCount();t=k.positions();for(n=r=0;n<q;n++)h[g++]=t[r++],h[g++]=t[r++],h[g++]=this._layerDepth;k=k.indexes();t=k.length;for(n=0;n<t;n++)e[l++]=f+k[n];f+=q}for(m=f=0;m<c;m++){k=b.at(m);q=k.positionCount();for(n=0;n<q;n++)n==q-1?(e[l++]=f+n,e[l++]=f+0,e[l++]=f+n+u,e[l++]=f+0,e[l++]=f+u):(e[l++]=f+n,e[l++]=f+n+1,e[l++]=f+n+u,e[l++]=f+n+1,e[l++]=f+n+u+1),e[l++]=f+n+u;f+=q}c=0;b=this.colorsData=new Uint8Array(8*d);f=2*d;for(n=0;n<f;n++)b[c++]=8,b[c++]=13,b[c++]=25,b[c++]=255;n=this._faceRenderable=
MO.RClass.create(MO.FE3dDataBox);n.linkGraphicContext(a);n.setup();n.vertexPositionBuffer().upload(h,12,2*d);n.vertexColorBuffer().upload(b,4,2*d);n.indexBuffer().upload(e,l);n.material().info().optionDouble=!0},MO.FEaiProvinceEntity_buildBorder=function(a){for(var b=this._data.boundaries(),c=b.count(),d=this._vertexTotal,e=0,f=0,g=new Float32Array(6*d),h=0,l=new Uint16Array(2*d+2*d),m=0;m<c;m++){for(var k=b.at(m),q=k.positionCount(),t=k.positions(),r=0,k=0;k<q;k++)g[f++]=t[r++],g[f++]=t[r++],g[f++]=
0;for(k=0;k<q;k++)l[h++]=e+k,k==q-1?l[h++]=e:l[h++]=e+k+1;e+=q}for(var n=e,m=0;m<c;m++){k=b.at(m);q=k.positionCount();t=k.positions();for(k=r=0;k<q;k++)g[f++]=t[r++],g[f++]=t[r++],g[f++]=this._layerDepth;e+=q}for(m=e=0;m<c;m++){k=b.at(m);q=k.positionCount();for(k=0;k<q;k++)l[h++]=e+k,l[h++]=e+k+n;e+=q}c=0;b=this.colorsData=new Uint8Array(8*d);for(k=0;k<d;k++)b[c++]=0,b[c++]=193,b[c++]=237,b[c++]=255;for(k=0;k<d;k++)b[c++]=11,b[c++]=17,b[c++]=35,b[c++]=255;k=this._borderRenderable=MO.RClass.create(MO.FE3dDataBox);
k.linkGraphicContext(a);k.setup();k.vertexPositionBuffer().upload(g,12,2*d);k.vertexColorBuffer().upload(b,4,2*d);k.indexBuffer().setDrawModeCd(MO.EG3dDrawMode.Lines);k.indexBuffer().setLineWidth(1);k.indexBuffer().upload(l,h)},MO.FEaiProvinceEntity_build=function(a){for(var b=0,c=0,d=this._data.boundaries(),e=d.count(),f=0;f<e;f++)var g=d.at(f),b=b+g.positionCount(),c=c+g.indexes().length;this._vertexTotal=b;this._indexTotal=c;this.buildFace(a);this.buildBorder(a)},MO.FEaiProvinceEntity_update=function(a){a=
a.investmentTotal();Math.sqrt(a)},MO.FEaiProvinceEntity_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FGuiHistoryMilestoneFrame=function(a){a=RClass.inherits(this,a,FGuiControl);a._bgImage=null;a._shiningImage=null;a._numImages=null;a._yiImage=null;a._data=RClass.register(a,new AGetSet("_data"));a._startTick=0;a._popDuration=500;a._showDuration=2E3;a._closeDuration=500;a.construct=FGuiHistoryMilestoneFrame_construct;a.onPaintBegin=FGuiHistoryMilestoneFrame_onPaintBegin;a.onImageLoad=FGuiHistoryMilestoneFrame_onImageLoad;a.show=FGuiHistoryMilestoneFrame_show;a.dispose=FGuiHistoryMilestoneFrame_dispose;
a._dataChangedListeners=RClass.register(a,new AListener("_dataChangedListeners",EEvent.DataChanged));return a},MO.FGuiHistoryMilestoneFrame_construct=function(){this.__base.FGuiControl.construct.call(this);this._bgImage=MO.Class.create(MO.FImage);this._bgImage.addLoadListener(this,this.onImageLoad);this._bgImage.loadUrl("../ars/eai/milestone/bg.png");this._shiningImage=MO.Class.create(MO.FImage);this._shiningImage.addLoadListener(this,this.onImageLoad);this._shiningImage.loadUrl("../ars/eai/milestone/shining.png");
this._yiImage=MO.Class.create(MO.FImage);this._yiImage.addLoadListener(this,this.onImageLoad);this._yiImage.loadUrl("../ars/eai/number/yi.png");this._numImages=Array(10);for(var a=0;10>a;a++){var b=MO.Class.create(MO.FImage);b.addLoadListener(this,this.onImageLoad);b.loadUrl("../ars/eai/number/"+a+".png");this._numImages[a]=b}},MO.FGuiHistoryMilestoneFrame_onImageLoad=function(){this.repaint()},MO.FGuiHistoryMilestoneFrame_onPaintBegin=function(a){this.__base.FGuiControl.onPaintBegin.call(this,a);
var b=a.graphic;a=this._clientRectangle;var c=this._bgImage._size,d=this._shiningImage._size,e=a.left+a.width/2,f=e-120,g=a.top+450;b.drawImage(this._shiningImage,e-d.width/2,a.top,d.width,d.height);b.drawImage(this._bgImage,e-c.width/2,a.top+d.height/2,c.width,c.height);b.setFont("bold 20px Microsoft YaHei");b.drawText("\u8fbe\u6210\u65e5\u6570\uff1a",f,g+50,"#FFE849");b.drawText("\u5206\u516c\u53f8\u6570\uff1a",f,g+100,"#FFE849");b.drawText("\u7406\u8d22\u5e08\u6570\uff1a",f,g+150,"#FFE849");if(this.data()){for(var c=
this.data().investmentTotal().toString(),e=e-(60*c.length+80)/2,h=0;h<c.length;h++)b.drawImage(this._numImages[c[h]],e+60*h,a.top+d.height/2-80,this._numImages[0]._size.width,this._numImages[0]._size.height);b.drawImage(this._yiImage,e+60*c.length,a.top+d.height/2-80,this._yiImage._size.width,this._yiImage._size.height);b.drawText(this.data().dayCount(),f+120,g+50,"#FFA800");b.drawText(this.data().companyCount(),f+120,g+100,"#FFA800");b.drawText(this.data().staffCount(),f+120,g+150,"#FFA800");b=MO.Timer.current()-
this._startTick;d=b-this._popDuration;f=b-this._showDuration-this._popDuration;g=(MO.Eai.Canvas.logicSize().width+a.width)/2;b<this._popDuration?(p=b/this._popDuration,p=1-(1-p)*(1-p),this.setLeft(-a.width+g*p)):d<this._showDuration||(f<this._closeDuration?(p=f/this._closeDuration,p*=p,this.setLeft((MO.Eai.Canvas.logicSize().width-a.width)/2+g*p)):(this._data=null,this.setVisible(!1),a=MO.Memory.alloc(SEvent),a.sender=this,this.processDataChangedListener(a)))}},MO.FGuiHistoryMilestoneFrame_show=function(){o=
this;o.setVisible(!0);o._startTick=MO.Timer.current()},MO.FGuiHistoryMilestoneFrame_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiStatisticsInvestment=function(a){a=RClass.inherits(this,a,FObject,MGraphicObject);a._dateSetup=!1;a._beginDate=MO.Class.register(a,new AGetter("_beginDate"));a._endDate=MO.Class.register(a,new AGetter("_endDate"));a._invementCurrent=MO.Class.register(a,new AGetter("_invementCurrent"),0);a._invementTotal=MO.Class.register(a,new AGetter("_invementTotal"));a._intervalMinute=1;a._mapEntity=MO.Class.register(a,new AGetSet("_mapEntity"));a._display=MO.Class.register(a,new AGetter("_display"));
a._entities=MO.Class.register(a,new AGetter("_entities"));a._tableEntities=MO.Class.register(a,new AGetter("_tableEntities"));a._showShapes=MO.Class.register(a,new AGetter("_showShapes"));a._tableCount=22;a._tableInterval=1E3;a._tableTick=1;a._dataTicker=null;a._entityPool=null;a._shapePool=null;a.onInvestment=FEaiStatisticsInvestment_onInvestment;a.construct=FEaiStatisticsInvestment_construct;a.allocEntity=FEaiStatisticsInvestment_allocEntity;a.allocShape=FEaiStatisticsInvestment_allocShape;a.setup=
FEaiStatisticsInvestment_setup;a.focusEntity=FEaiStatisticsInvestment_focusEntity;a.process=FEaiStatisticsInvestment_process;a.dispose=FEaiStatisticsInvestment_dispose;return a},MO.FEaiStatisticsInvestment_onInvestment=function(a){a=a.content;this._invementTotal=a.investment_total;a=a.collection;for(var b=a.length,c=0;c<b;c++){var d=a[c],e=this.allocEntity();e.loadData(d);this._entities.push(e)}a=this._entities.count();this._tableInterval=6E4*this._intervalMinute/a;this._tableTick=0},MO.FEaiStatisticsInvestment_construct=
function(){this.__base.FObject.construct.call(this);this._beginDate=new TDate;this._endDate=new TDate;this._entities=new TObjects;this._showShapes=new TObjects;this._tableEntities=new TObjects;this._tableTicker=new TTicker(1E3*this._tableInterval);this._dataTicker=new TTicker(6E4*this._intervalMinute);var a=this._dataTable=MO.Class.create(MO.FEaiStatisticsTable);a._hTable=document.getElementById("id_investment");a._headLineCount=1;this._entityPool=RClass.create(FObjectPool);this._shapePool=RClass.create(FObjectPool)},
MO.FEaiStatisticsInvestment_allocEntity=function(){var a=this._entityPool.alloc();a||(a=RClass.create(FEaiStatisticsInvestmentEntity));return a},MO.FEaiStatisticsInvestment_allocShape=function(){var a=this._shapePool.alloc();a||(a=RClass.create(FEaiStatisticsInvestmentShape),a.linkGraphicContext(this),a.setup());return a},MO.FEaiStatisticsInvestment_setup=function(){(this._display=RClass.create(FE3dDisplay)).linkGraphicContext(this)},MO.FEaiStatisticsInvestment_focusEntity=function(a){var b=a.card();
a=a.investment();RConsole.find(FEaiResourceConsole).cityConsole();if(b=this._mapEntity.findCityByCard(b))b.addInvestmentTotal(a),this._mapEntity.upload()},MO.FEaiStatisticsInvestment_process=function(){var a=RConsole.find(FEaiLogicConsole).system();if(a.testReady()){a=a.currentDate();this._dateSetup||(this._endDate.assign(a),this._endDate.addMinute(-this._intervalMinute),this._dateSetup=!0);if(this._dataTicker.process()){var b=RConsole.find(FEaiLogicConsole).statistics(),c=this._beginDate,d=this._endDate;
c.assign(d);d.assign(a);b.doInvestmentDynamic(this,this.onInvestment,c.format(),d.format());c.assign(d)}c=RTimer.current();if(c-this._tableTick>this._tableInterval){if(this._tableEntities.count()>this._tableCount){var e=this._tableEntities.pop();this._entityPool.free(e)}d=this._entities;if(!d.isEmpty()){e=d.shift();this._tableEntities.unshift(e);this.focusEntity(e);var f=this._dataTable,b=this._tableEntities.count();f.setDataCount(b);for(var g=new MO.TDate,a=0;a<b;a++){var e=this._tableEntities.at(a),
h=f.dataRow(a);g.parse(e.date());h.cells[0].innerHTML=g.format("HH24:MI:SS");var l=this._mapEntity.findCityByCard(e.card());h.cells[1].innerHTML=l?l.data().label():"";h.cells[2].innerHTML=e.customer()+" - "+e.phone();l=MO.Lang.Float.format(e.investment(),null,null,2,"0");7<l.length?(e=l.substring(0,l.length-7),l=l.substring(l.length-7,l.length),h.cells[3].innerHTML='<FONT color="#FF4482">'+e+"</FONT>"+l):h.cells[3].innerHTML=l}}b=d.count();this._invementCurrent=this._invementTotal;for(a=0;a<b;a++)e=
d.at(a),this._invementCurrent-=e.investment();this._tableTick=c}this._mapEntity.process();c=this._showShapes;b=c.count();for(a=b-1;0<=a;a--)b=c.at(a),b._finish&&(c.erase(a),this._display.removeRenderable(b),this._shapePool.free(b))}},MO.FEaiStatisticsInvestment_dispose=function(){this._entities=RObject.dispose(this._entities);this._showShapes=RObject.dispose(this._showShapes);this._dataTicker=RObject.dispose(this._dataTicker);this.__base.FObject.dispose.call(this)};
with(MO)MO.FEaiStatisticsInvestmentEntity=function(a){a=RClass.inherits(this,a,FEaiEntity);a._date=RClass.register(a,new AGetter("_date"));a._customer=RClass.register(a,new AGetter("_customer"));a._phone=RClass.register(a,new AGetter("_phone"));a._card=RClass.register(a,new AGetter("_card"));a._investment=RClass.register(a,new AGetter("_investment"));a._shape=RClass.register(a,new AGetSet("_shape"));a.construct=FEaiStatisticsInvestmentEntity_construct;a.loadData=FEaiStatisticsInvestmentEntity_loadData;
a.update=FEaiStatisticsInvestmentEntity_update;a.dispose=FEaiStatisticsInvestmentEntity_dispose;return a},MO.FEaiStatisticsInvestmentEntity_construct=function(){this.__base.FEaiEntity.construct.call(this)},MO.FEaiStatisticsInvestmentEntity_loadData=function(a){this._date=a.date;this._customer=a.customer;this._phone=a.phone;this._card=a.card;this._investment=a.investment},MO.FEaiStatisticsInvestmentEntity_build=function(a){this._location.assign(this._data.location());this._size.set(2,2)},MO.FEaiStatisticsInvestmentEntity_update=
function(a){this._data.location();var b=1;if(a){var c=RConsole.find(FEaiResourceConsole).historyConsole().investmentCityTotal(),b=RConsole.find(FEaiResourceConsole).rateConsole().find(EEaiRate.Map);a=5*Math.sqrt(a.investmentTotal()/c);c=b.findRate(a);b=10*a;a=RFloat.toRange(a,0,1);this._color.set((c>>16&255)/255,(c>>8&255)/255,(c>>0&255)/255,4*a)}else this._color.set(0,0,0,0);b=this._range=RFloat.toRange(Math.sqrt(b),1,4);this._size.set(b,b)},MO.FEaiStatisticsInvestmentEntity_dispose=function(){this.__base.FEaiEntity.dispose.call(this)};
with(MO)MO.FEaiStatisticsInvestmentShape=function(a){a=RClass.inherits(this,a,FE3dShape);a._ready=!1;a._playing=!1;a._finish=!1;a._image=null;a._statusPaint=!1;a._cityEntity=RClass.register(a,new AGetSet("_cityEntity"));a._entity=RClass.register(a,new AGetter("_entity"));a._customerLabel=null;a._cityLabel=null;a._investment=null;a._interval=10;a._moveRate=0;a._lastTick=0;a.onImageLoad=FEaiStatisticsInvestmentShape_onImageLoad;a.construct=FEaiStatisticsInvestmentShape_construct;a.setup=FEaiStatisticsInvestmentShape_setup;
a.setEntity=FEaiStatisticsInvestmentShape_setEntity;a.paint=FEaiStatisticsInvestmentShape_paint;a.process=FEaiStatisticsInvestmentShape_process;a.dispose=FEaiStatisticsInvestmentShape_dispose;return a},MO.FEaiStatisticsInvestmentShape_onImageLoad=function(a){this._ready=!0},MO.FEaiStatisticsInvestmentShape_construct=function(){this.__base.FE3dShape.construct.call(this)},MO.FEaiStatisticsInvestmentShape_setup=function(){this.__base.FE3dShape.setup.call(this);var a=this._renderable=RClass.create(FE3dShapeData);
a.linkGraphicContext(this);a.setOptionCenter(!0);a.size().set(128,64);a.setup();a=this._image=RClass.create(FImage);a.addLoadListener(this,this.onImageLoad);a.loadUrl("/script/ars/eai/investment.png");this._ready=!1},MO.FEaiStatisticsInvestmentShape_setEntity=function(a){this._customerLabel=a.customer();this._cityLabel=this._cityEntity.data().label();this._investment=a.investment();this._finish=!1},MO.FEaiStatisticsInvestmentShape_paint=function(){var a=this._cityEntity.location(),b=this.material();
b.info().optionAlpha=!0;b.info().ambientColor.set(1,1,1,1);b=this._matrix;b.tx=a.x;b.ty=a.y;b.tz=0;b.setScale(10,5,1);b.update();a=this._renderable;b=a.beginDraw();b.drawImage(this._image,0,0,128,64);b.setFont("bold 18px Microsoft YaHei");b.drawText(this._cityLabel,15,25,"#FF00FF");b.setFont("bold 20px Microsoft YaHei");b.drawText(this._customerLabel,30,50,"#FFFF00");b.setFont("bold 20px Microsoft YaHei");b.drawText(this._investment,55,50,"#FF0000");a.endDraw();this._playing=this._statusPaint=!0;
this._moveRate=this._lastTick=0},MO.FEaiStatisticsInvestmentShape_process=function(a){this.__base.FE3dShape.process.call(this,a);this._statusDirty&&this.testReady()&&(this._statusPaint||(this.paint(),this._statusPaint=!0),this._statusDirty=!1);if(this._statusPaint&&!this._finish){a=RTimer.current();var b=this._matrix;a-this._lastTick>this._interval&&(b.ty+=this._moveRate+.01,this._moveRate+=.01,b.updateForce(),this._lastTick=a);100<b.ty&&(this._finish=!0)}},MO.FEaiStatisticsInvestmentShape_dispose=
function(){this.__base.FE3dShape.dispose.call(this)};
with(MO)MO.FEaiStatisticsLabel=function(a){a=RClass.inherits(this,a,FGuiLabel);a._value=RClass.register(a,new AGetSet("_value"),"0");a._currentValue="0";a._ticker=null;a.onPaintLabel=FEaiStatisticsLabel_onPaintLabel;a.construct=FEaiStatisticsLabel_construct;a.updateValue=FEaiStatisticsLabel_updateValue;a.process=FEaiStatisticsLabel_process;return a},MO.FEaiStatisticsLabel_onPaintLabel=function(a){a=a.graphic;var b=this._clientRectangle;this._foreFont&&a.setFont(this._foreFont);var c=this._label,d=
c.length,e=null;8<d&&(e=c.substring(0,d-8));var f=null;4<d&&(f=c.substring(d-8,d-4));var g=null;0<d&&(g=c.substring(d-4,d));var h=a.textWidth(c),c=a.textWidth(e),d=a.textWidth(f),h=b.left+.5*b.width-.5*h,b=b.top+.5*b.height+3;null!=e&&a.drawText(e,h,b,"#FD0000");null!=f&&a.drawText(f,h+c,b,"#FF7200");null!=g&&a.drawText(g,h+c+d,b,"#FFD926")},MO.FEaiStatisticsLabel_construct=function(){this.__base.FGuiLabel.construct.call(this);this._ticker=new TTicker(200)},MO.FEaiStatisticsLabel_updateValue=function(){for(var a=
this._value,b=this._currentValue,c="",d=!1,e=a.length-1;0<=e;e--){var f=a.charAt(e),f=parseInt(f),g=b.charAt(e),g=""==g?0:parseInt(g);d||f==g||(g++,9<g&&(g=0),d=!0);c=g+c}this._currentValue=this._label=c},MO.FEaiStatisticsLabel_process=function(a){return this._value!=this._currentValue&&this._ticker.process()?(this.updateValue(),!0):!1};
with(MO)MO.FEaiStatisticsTable=function(a){a=RClass.inherits(this,a,FEaiTable);a.createRow=FEaiCityEntity_createRow;return a},MO.FEaiCityEntity_createRow=function(){var a=RBuilder.appendTableRow(this._hTable);a.className="Investment_DataGrid_Row";var b=RBuilder.appendTableCell(a);b.className="Investment_DataGrid_Cell";b.align="center";b=RBuilder.appendTableCell(a);b.className="Investment_DataGrid_Cell";b.align="center";b=RBuilder.appendTableCell(a);b.className="Investment_DataGrid_Cell";b.align="center";
b=RBuilder.appendTableCell(a);b.className="Investment_DataGrid_Cell";b.align="right"};
MO.FEaiChartCustomerScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartCustomer;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a.onLoadData=MO.FEaiChartCustomerScene_onLoadData;a.onKeyDown=MO.FEaiChartCustomerScene_onKeyDown;a.setup=MO.FEaiChartCustomerScene_setup;a.selectDate=MO.FEaiChartCustomerScene_selectDate;a.active=MO.FEaiChartCustomerScene_active;a.process=MO.FEaiChartCustomerScene_process;a.deactive=MO.FEaiChartCustomerScene_deactive;
return a};MO.FEaiChartCustomerScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartCustomerScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));a==MO.EKeyCode.L&&(MO.RDate.autoParse(this._currentDate,"20140701"),this._playing=!0)};
MO.FEaiChartCustomerScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();b.dataLayer();if(b=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().get(a)){a=b.provinces();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d);this._provinceEntities.get(e.code()).update(e)}for(var e=b.citys(),f=this._cityEntities,c=f.count(),d=0;d<c;d++){var g=f.at(d);a=g.data().code();a=e.get(a);g.update(a)}if(c=document.getElementById("id_total"))c.innerHTML=this._currentDate.format("YYYY-MM-DD")+
" "+b.investmentTotal()}this._citysRangeRenderable.upload()};MO.FEaiChartCustomerScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618")};MO.FEaiChartCustomerScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartCustomerScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}};MO.FEaiChartCustomerScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartHistoryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartHistory;a._ready=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._lastDateTick=0;a._dateInterval=100;a._startDate=null;a._endDate=null;a._currentDate=null;a._playButton=null;a._pauseButton=null;a._buttonTransform=null;a._timeline=null;a._milestoneFrame=null;a._buttonAudio=null;a._statusStart=!1;a._statusLayerCount=150;a._statusLayerLevel=150;a.onLoadData=MO.FEaiChartHistoryScene_onLoadData;
a.onDateSelect=MO.FEaiChartHistoryScene_onDateSelect;a.onMilestoneDone=MO.FEaiChartHistoryScene_onMilestoneDone;a.onOperationPlay=MO.FEaiChartHistoryScene_onOperationPlay;a.onOperationPause=MO.FEaiChartHistoryScene_onOperationPause;a.testReady=MO.FEaiChartHistoryScene_testReady;a.setup=MO.FEaiChartHistoryScene_setup;a.selectDate=MO.FEaiChartHistoryScene_selectDate;a.switchPlay=MO.FEaiChartHistoryScene_switchPlay;a.active=MO.FEaiChartHistoryScene_active;a.process=MO.FEaiChartHistoryScene_process;a.deactive=
MO.FEaiChartHistoryScene_deactive;return a};MO.FEaiChartHistoryScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};MO.FEaiChartHistoryScene_onDateSelect=function(a){this._currentDate.date.setTime(a.date.date.getTime());this._currentDate.refresh();this.selectDate(this._currentDate.format("YYYYMMDD"))};MO.FEaiChartHistoryScene_onMilestoneDone=function(a){this.switchPlay(!0)};
MO.FEaiChartHistoryScene_onOperationPlay=function(a){a=this._currentDate.format("YYYYMMDD");var b=this._endDate.format("YYYYMMDD");a==b&&(a=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().at(0),MO.RDate.autoParse(this._currentDate,a._code));this.switchPlay(!0)};MO.FEaiChartHistoryScene_onOperationPause=function(a){this.switchPlay(!1)};MO.FEaiChartHistoryScene_testReady=function(){if(!this._ready){if(!this._readyProvince)return!1;this._ready=!0}return this._ready};
MO.FEaiChartHistoryScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.faceLayer();this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;var b=MO.Console.find(MO.FEaiResourceConsole).historyConsole(),c=b.dates().at(0),b=b.dates().at(b.dates().count()-1);this._currentDate.parseAuto(c._code);this._startDate.parseAuto(c._code);this._endDate.parseAuto(b._code);c=this._playButton=MO.Class.create(MO.FGuiPicture);c.linkGraphicContext(this);
c.setLocation(40,730);c.setSize(196,196);c.setBackResource("url:/script/ars/eai/player.png");c.psInitialize();c.build();c.setVisible(!0);c.addOperationDownListener(this,this.onOperationPlay);this._desktop.register(c);a.push(c);c=this._pauseButton=MO.Class.create(MO.FGuiPicture);c.linkGraphicContext(this);c.setLocation(40,730);c.setSize(196,196);c.setBackResource("url:/script/ars/eai/pause.png");c.psInitialize();c.build();c.setVisible(!1);c.addOperationDownListener(this,this.onOperationPause);this._desktop.register(c);
a.push(c);(this._buttonAudio=MO.Class.create(MO.FAudio)).loadUrl("/script/ars/eai/button.mp3");c=this._buttonTransform=MO.Class.create(MO.FGuiChangeTransform);c.setInterval(10);c.setScale(.1);for(var b=MO.Console.find(MO.FEaiResourceConsole).historyConsole(),c=b.milestones(),b=this._milestoneBars=new MO.TObjects,d=c.count(),e=0;e<d;e++){var f=c.at(e),g=MO.Console.find(MO.FGuiFrameConsole).create(this,"eai.chart.MilestoneBar");g.setLocation(0,25+90*e);var h=new MO.TDate;h.parse(f.code());g.findComponent("date").setLabel(h.format("YYYY/MM/DD"));
g.findComponent("total").setLabel(parseInt(f.investmentTotal())+"\u4ebf");a.push(g);this._desktop.register(g);b.push(g)}this.activeStage();c=this._timeline=MO.Class.create(MO.FGuiChartTimeline);c.setName("Timeline");c.setLeft(50);c.setTop(MO.Eai.Canvas.logicSize().height-550);c.setWidth(MO.Eai.Canvas.logicSize().width-300);c.setHeight(500);c.setTimeUnit(MO.EGuiTimeUnit.Month);c.setStartTime(this._startDate);c.setEndTime(this._endDate);c.setDegreeTime(this._currentDate);c.addDataChangedListener(this,
this.onDateSelect);c.linkGraphicContext(this);c.build();this._desktop.register(c);a.push(c);c=this._milestoneFrame=MO.RClass.create(MO.FGuiHistoryMilestoneFrame);c.setName("MilestoneFrame");c.setLeft(MO.Eai.Canvas.logicSize().width/2-360);c.setTop(50);c.setWidth(720);c.setHeight(700);c.addDataChangedListener(this,this.onMilestoneDone);c.linkGraphicContext(this);c.build();this._desktop.register(c);a.push(c);c.setVisible(!1)};
MO.FEaiChartHistoryScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();var c=MO.Console.find(MO.FEaiResourceConsole).historyConsole();MO.Console.find(MO.FEaiResourceConsole).provinceConsole();b=c.dates().get(a);if(a=c.milestones().get(a))this._milestoneFrame.setData(a),this._milestoneFrame.show(),this._milestoneFrame.repaint(),this.switchPlay(!1);if(b){this._timeline.setDegreeTime(this._currentDate);for(var c=b.citys(),d=this._mapEntity.cityEntities(),
e=d.count(),f=0;f<e;f++){var g=d.at(f);a=g.data().code();a=c.get(a);g.update(a)}this._totalBar.findComponent("total").setLabel(parseInt(b.investmentTotal()).toString());this._totalBar.repaint()}};MO.FEaiChartHistoryScene_switchPlay=function(a){this._playing=a;this._buttonAudio.play(0);a?(this._playButton.setVisible(!1),this._pauseButton.setVisible(!0)):(this._playButton.setVisible(!0),this._pauseButton.setVisible(!1))};MO.FEaiChartHistoryScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartHistoryScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(!this._statusStart&&this.testReady()){var a=document.getElementById("id_loading");a&&(a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--);this._statusLayerLevel--;0==this._statusLayerLevel&&(a&&document.body.removeChild(a),this.switchPlay(!0),this._statusStart=!0)}if(this._playing){a=MO.Timer.current();if(a-this._lastTick>this._interval){if(a-this._lastDateTick>this._dateInterval){this._currentDate.addDay(1);
var b=this._currentDate.format("YYYYMMDD"),c=this._endDate.format("YYYYMMDD");this.selectDate(b);b==c&&this.switchPlay(!1);this._lastDateTick=a}this._timeline.setProgress((a-this._lastDateTick)/this._dateInterval);this._timeline.repaint();this._lastTick=a}this._mapEntity.upload()}this._milestoneFrame.visible()&&this._milestoneFrame.repaint()};MO.FEaiChartHistoryScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartIndustryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartIndustry;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a.onLoadData=MO.FEaiChartIndustryScene_onLoadData;a.onKeyDown=MO.FEaiChartIndustryScene_onKeyDown;a.setup=MO.FEaiChartIndustryScene_setup;a.selectDate=MO.FEaiChartIndustryScene_selectDate;a.active=MO.FEaiChartIndustryScene_active;a.process=MO.FEaiChartIndustryScene_process;a.deactive=MO.FEaiChartIndustryScene_deactive;
return a};MO.FEaiChartIndustryScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartIndustryScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));a==MO.EKeyCode.L&&(MO.RDate.autoParse(this._currentDate,"20140701"),this._playing=!0)};
MO.FEaiChartIndustryScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();b.dataLayer();if(b=MO.Console.find(MO.FEaiResourceConsole).historyConsole().dates().get(a)){a=b.provinces();for(var c=a.count(),d=0;d<c;d++){var e=a.at(d);this._provinceEntities.get(e.code()).update(e)}for(var e=b.citys(),f=this._cityEntities,c=f.count(),d=0;d<c;d++){var g=f.at(d);a=g.data().code();a=e.get(a);g.update(a)}if(c=document.getElementById("id_total"))c.innerHTML=this._currentDate.format("YYYY-MM-DD")+
" "+b.investmentTotal()}this._citysRangeRenderable.upload()};MO.FEaiChartIndustryScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618")};MO.FEaiChartIndustryScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartIndustryScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}};MO.FEaiChartIndustryScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartInvestmentScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartInvestment;a._playing=!1;a._startDate=null;a._endDate=null;a._currentDate=null;a._timeline=null;a.onLoadData=MO.FEaiChartInvestmentScene_onLoadData;a.onKeyDown=MO.FEaiChartInvestmentScene_onKeyDown;a.setup=MO.FEaiChartInvestmentScene_setup;a.selectDate=MO.FEaiChartInvestmentScene_selectDate;a.active=MO.FEaiChartInvestmentScene_active;a.process=MO.FEaiChartInvestmentScene_process;a.deactive=
MO.FEaiChartInvestmentScene_deactive;a.onDateSelect=MO.FEaiChartInvestmentScene_onDateSelect;return a};MO.FEaiChartInvestmentScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};
MO.FEaiChartInvestmentScene_onKeyDown=function(a){a=a.keyCode;if(a==MO.EKeyCode.N){this._currentDate.addDay(-1);var b=this._currentDate.format("YYYYMMDD");this.selectDate(b);console.log(b)}a==MO.EKeyCode.M&&(this._currentDate.addDay(1),b=this._currentDate.format("YYYYMMDD"),this.selectDate(b),console.log(b));if(a==MO.EKeyCode.L){MO.RDate.autoParse(this._currentDate,"20140701");a=document.getElementById("id_investment_table");for(b=1;b<a.rows.length;b++)a.rows[b].style.display="none";this._playing=
!0}};
MO.FEaiChartInvestmentScene_selectDate=function(a){this.graphicContext();var b=this._activeStage;b.mapLayer();b.borderLayer();var b=MO.Console.find(MO.FEaiResourceConsole).historyConsole(),c=MO.Console.find(MO.FEaiResourceConsole).provinceConsole();if(b=b.dates().get(a)){a=b.provinces();for(var d=a.count(),e=document.getElementById("id_investment_table");e.rows.length<d+1;){var f=e.insertRow(e.rows.length);f.insertCell(0);f.insertCell(1);f.insertCell(2)}for(var g=0;g<d;g++){var h=a.at(g);this._provinceEntities.get(h.code()).update(h);var l=
c.findByCode(h.code()),f=e.rows[g+1];f.style.display="";f.className="DataGrid_Row";var m=f.cells[0],k=f.cells[1],f=f.cells[2];2<g&&(m.innerText=g+1);k.innerText=l.label();1E3<h.investmentTotal()?f.innerText=MO.RFloat.unitFormat(h.investmentTotal(),0,0,2,0,1E4,"\u4e07"):f.innerText=h.investmentTotal();f.align="right"}this._timeline.setDegreeTime(this._currentDate);this._timeline.repaint();c=b.citys();e=this._cityEntities;d=e.count();for(g=0;g<d;g++)h=e.at(g),a=h.data().code(),a=c.get(a),h.update(a);
this._totalBar.findComponent("total").setLabel(MO.RFloat.unitFormat(b.investmentTotal(),0,0,2,0,1E4,"\u4e07"));this._totalBar.repaint()}};
MO.FEaiChartInvestmentScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);MO.RWindow.lsnsKeyDown.register(this,this.onKeyDown);this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618");for(var a=document.getElementById("id_investment_table"),b=0;3>b;b++){var c=a.insertRow(a.rows.length),d=c.insertCell(0);c.insertCell(1);c.insertCell(2);switch(b){case 0:c.style.color=
"#FFEA01";d.innerHTML="1 <IMG src='/script/ars/eai/medals/gold.png'/>";break;case 1:c.style.color="#C5D3D6";d.innerHTML="2 <IMG src='/script/ars/eai/medals/silver.png'/>";break;case 2:c.style.color="#E16A00",d.innerHTML="3 <IMG src='/script/ars/eai/medals/copper.png'/>"}}a=this.activeStage().faceLayer();b=this._timeline=MO.RClass.create(MO.FGuiChartTimeline);b.setName("Timeline");b.setLeft(50);b.setTop(MO.Eai.Canvas._size.height-400);b.setWidth(MO.Eai.Canvas._size.width-500);b.setHeight(350);b.setTimeUnit(MO.EGuiTimeUnit.Month);
b.setStartTime(this._startDate);b.setEndTime(this._endDate);b.setDegreeTime(this._currentDate);b.addDataChangedListener(this,this.onDateSelect);b.linkGraphicContext(this);b.build();this._desktop.register(b);a.push(b)};MO.FEaiChartInvestmentScene_onDateSelect=function(a){this._currentDate.date.setTime(a.date.date.getTime());this._currentDate.refresh();this.selectDate(this._currentDate.format("YYYYMMDD"))};MO.FEaiChartInvestmentScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartInvestmentScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(this._playing){this._currentDate.addDay(1);var a=this._currentDate.format("YYYYMMDD"),b=this._endDate.format("YYYYMMDD");this.selectDate(a);a==b&&(this._playing=!1)}for(var a=this._citysRenderables,b=a.count(),c=0;c<b;c++)a.at(c).upload();this._citysRangeRenderable.upload()};MO.FEaiChartInvestmentScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};
MO.FEaiChartScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._readyProvince=!1;a._nowDate=null;a._nowTicker=null;a._mapEntity=MO.Class.register(a,new MO.AGetter("_mapEntity"));a._countryData=null;a._countryBorderDisplay=null;a._countryDisplay=null;a._citysRangeRenderable=null;a._citysRenderable=null;a._logoBar=null;a._titleBar=null;a._totalBar=null;a._groundAutioUrl="/script/ars/eai/ground.mp3";a._groundAutio=null;a.onLoadData=MO.FEaiChartScene_onLoadData;a.construct=MO.FEaiChartScene_construct;
a.fixMatrix=MO.FEaiChartScene_fixMatrix;a.setup=MO.FEaiChartScene_setup;a.active=MO.FEaiChartScene_active;a.resetDate=MO.FEaiChartScene_resetDate;a.process=MO.FEaiChartScene_process;a.deactive=MO.FEaiChartScene_deactive;a.dispose=MO.FEaiChartScene_dispose;return a};
MO.FEaiChartScene_onLoadData=function(a){var b=a.sender;a=this.graphicContext();for(var c=this._countryDisplay,d=this._countryBorderDisplay,e=MO.Console.find(MO.FEaiResourceConsole).provinceConsole(),f=this._mapEntity.provinceEntities(),b=b.provinces(),g=b.count(),h=0;h<g;h++){provinceData=b.at(h);var l=provinceData.name(),l=e.findByName(l),m=MO.Class.create(MO.FEaiProvinceEntity);m.setData(provinceData);m.build(a);f.set(l.code(),m);c.pushRenderable(m.faceRenderable());d.pushRenderable(m.borderRenderable())}this._readyProvince=
!0};MO.FEaiChartScene_construct=function(){this.__base.FEaiScene.construct.call(this);this._nowDate=new MO.TDate;this._nowTicker=new MO.TTicker(1E4);this._mapEntity=MO.Class.create(MO.FEaiMapEntity)};MO.FEaiChartScene_fixMatrix=function(a){a.tx=-35;a.ty=-12.3;a.tz=0;a.setScale(.32,.36,.32);a.update()};
MO.FEaiChartScene_setup=function(){this.__base.FEaiScene.setup.call(this);var a=this.graphicContext();a.size();var b=this._activeStage=MO.Class.create(MO.FEaiChartStage);b.linkGraphicContext(this);b.region().linkGraphicContext(this);b.region().backgroundColor().set(0,0,0,0);var c=this._countryDisplay=MO.Class.create(MO.FE3dDisplay);this.fixMatrix(c.matrix());b.mapLayer().pushDisplay(c);c=this._countryBorderDisplay=MO.Class.create(MO.FE3dDisplay);this.fixMatrix(c.matrix());b.borderLayer().pushDisplay(c);
c=this._background=MO.Class.create(MO.FGuiPicture);c.linkGraphicContext(this);c.size().assign(MO.Eai.Canvas.screenSize());c.size().set(1920,1080);c.setBackResource("url:/script/ars/eai/background.png");c.psInitialize();c.build();c.renderable().setOptionFull(!0);this._desktop.register(c);b.groundLayer().push(c);c=this._citysRangeRenderable=MO.Class.create(MO.FEaiCitysRangeRenderable);c.linkGraphicContext(this);this.fixMatrix(c.matrix());b.cityRangeLayer().push(c);this._mapEntity.setCitysRangeRenderable(c);
var d=this._citysRenderable=MO.Class.create(MO.FEaiCitysRenderable);d.linkGraphicContext(this);this.fixMatrix(d.matrix());b.cityLayer().push(d);this._mapEntity.setCitysRenderable(d);for(var e=MO.Console.find(MO.FEaiResourceConsole).cityConsole(),f=this._mapEntity.cityEntities(),e=e.citys(),g=e.count(),h=0;h<g;h++){var l=e.at(h);l.level();l.location();var m=MO.Class.create(MO.FEaiCityEntity);m.setData(l);m.build(a);f.set(l.code(),m);d.citys().push(m);c.citys().push(m)}d.setup();d.upload();c.setup();
c.upload();a=this._logoBar=MO.RConsole.find(MO.FGuiFrameConsole).get(this,"eai.chart.LogoBar");a.setLocation(10,10);b.faceLayer().push(a);this._desktop.register(a);a=this._totalBar=MO.RConsole.find(MO.FGuiFrameConsole).get(this,"eai.chart.TotalBar");a.setLocation(650,20);b.faceLayer().push(a);this._desktop.register(a);b=this._groundAutio=MO.Class.create(MO.FAudio);b.loadUrl(this._groundAutioUrl);b.setVolume(.5);b.play();b=this._countryData=MO.Class.create(MO.FEaiCountryData);b.addLoadListener(this,
this.onLoadData);b.load()};MO.FEaiChartScene_active=function(){this.__base.FEaiScene.active.call(this)};MO.FEaiChartScene_active=function(){this.__base.FEaiScene.active.call(this)};MO.FEaiChartScene_resetDate=function(){};MO.FEaiChartScene_process=function(){this.__base.FEaiScene.process.call(this);if(this._nowTicker.process()){var a=this._logoBar,b=this._nowDate;b.setNow();a.findComponent("date").setLabel(b.format("YYYY/MM/DD"));a.findComponent("time").setLabel(b.format("HH24:MI"));a.repaint()}};
MO.FEaiChartScene_dispose=function(){this._nowDate=RObject.dispose(this._nowDate);this._nowTicker=RObject.dispose(this._nowTicker);this._mapEntity=RObject.dispose(this._mapEntity);this.__base.FEaiScene.dispose.call(this)};
MO.FEaiChartStage=function(a){a=MO.RClass.inherits(this,a,MO.FE3dStage);a._groundLayer=MO.RClass.register(a,new MO.AGetter("_groundLayer"));a._mapLayer=MO.RClass.register(a,new MO.AGetter("_mapLayer"));a._borderLayer=MO.RClass.register(a,new MO.AGetter("_borderLayer"));a._cityRangeLayer=MO.RClass.register(a,new MO.AGetter("_cityRangeLayer"));a._cityLayer=MO.RClass.register(a,new MO.AGetter("_cityLayer"));a._dataLayer=MO.RClass.register(a,new MO.AGetter("_dataLayer"));a._faceLayer=MO.RClass.register(a,
new MO.AGetter("_faceLayer"));a.construct=MO.FEaiChartStage_construct;return a};
MO.FEaiChartStage_construct=function(){this.__base.FE3dStage.construct.call(this);var a=this._groundLayer=MO.RClass.create(MO.FDisplayLayer);this.registerLayer("GroundLayer",a);a=this._mapLayer=MO.RClass.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("MapLayer",a);a=this._borderLayer=MO.RClass.create(MO.FDisplayLayer);this.registerLayer("BorderLayer",a);a=this._cityRangeLayer=MO.RClass.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("CityRangeLayer",a);
a=this._cityLayer=MO.RClass.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("CityLayer",a);a=this._dataLayer=MO.RClass.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("DataLayer",a);a=this._faceLayer=MO.RClass.create(MO.FDisplayLayer);a.setOptionClearDepth(!0);this.registerLayer("FaceLayer",a)};
MO.FEaiChartStatisticsScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChartScene);a._code=MO.EEaiScene.ChartStatistics;a._investment=MO.Class.register(a,new MO.AGetter("_investment"));a._investmentCurrent=0;a._ready=!1;a._playing=!1;a._lastTick=0;a._interval=10;a._startDate=null;a._endDate=null;a._currentDate=null;a._timeline=null;a._statusStart=!1;a._statusLayerCount=150;a._statusLayerLevel=150;a._groundAutioUrl="/script/ars/eai/music/statistics.mp3";a.onLoadData=MO.FEaiChartStatisticsScene_onLoadData;
a.onDateSelect=MO.FEaiChartStatisticsScene_onDateSelect;a.onOperationPlay=MO.FEaiChartStatisticsScene_onOperationPlay;a.onOperationPause=MO.FEaiChartStatisticsScene_onOperationPause;a.testReady=MO.FEaiChartStatisticsScene_testReady;a.setup=MO.FEaiChartStatisticsScene_setup;a.fixMatrix=MO.FEaiChartStatisticsScene_fixMatrix;a.selectDate=MO.FEaiChartStatisticsScene_selectDate;a.active=MO.FEaiChartStatisticsScene_active;a.process=MO.FEaiChartStatisticsScene_process;a.deactive=MO.FEaiChartStatisticsScene_deactive;
return a};MO.FEaiChartStatisticsScene_onLoadData=function(a){this.__base.FEaiChartScene.onLoadData.call(this,a);a=this._currentDate.format("YYYYMMDD");this.selectDate(a)};MO.FEaiChartStatisticsScene_onDateSelect=function(a){this._currentDate.date.setTime(a.date.date.getTime());this._currentDate.refresh();this.selectDate(this._currentDate.format("YYYYMMDD"))};
MO.FEaiChartStatisticsScene_onOperationPlay=function(a){a=this._currentDate.format("YYYYMMDD");var b=this._endDate.format("YYYYMMDD");a==b&&MO.RDate.autoParse(this._currentDate,"20140701")};MO.FEaiChartStatisticsScene_onOperationPause=function(a){};MO.FEaiChartStatisticsScene_testReady=function(){if(!this._ready){if(!this._readyProvince)return!1;this._ready=!0}return this._ready};
MO.FEaiChartStatisticsScene_setup=function(){this.__base.FEaiChartScene.setup.call(this);var a=this._activeStage.dataLayer(),b=this._activeStage.faceLayer();this._currentDate=new MO.TDate;this._startDate=new MO.TDate;this._endDate=new MO.TDate;this._currentDate.parseAuto("20140701");this._startDate.parseAuto("20140701");this._endDate.parseAuto("20150618");var c=this._investment=MO.Class.create(MO.FEaiStatisticsInvestment);c.linkGraphicContext(this);c.setMapEntity(this._mapEntity);c.setup();c=c.display();
this.fixMatrix(c.matrix());a.push(c);MO.Console.find(MO.FEaiResourceConsole).historyConsole().milestones();this._totalBar.setLocation(600,20);this.activeStage();a=this._timeline=MO.Class.create(MO.FGuiChartTimeline);a.setName("Timeline");a.setLeft(50);a.setTop(MO.Eai.Canvas.logicSize().height-400);a.setWidth(MO.Eai.Canvas.logicSize().width-580);a.setHeight(350);a.setTimeUnit(MO.EGuiTimeUnit.Month);a.setStartTime(this._startDate);a.setEndTime(this._endDate);a.setDegreeTime(this._currentDate);a.addDataChangedListener(this,
this.onDateSelect);a.linkGraphicContext(this);a.build();this._desktop.register(a);b.push(a)};MO.FEaiChartStatisticsScene_fixMatrix=function(a){a.tx=-38;a.ty=-13;a.tz=0;a.setScale(.32,.36,.32);a.update()};MO.FEaiChartStatisticsScene_selectDate=function(a){};MO.FEaiChartStatisticsScene_active=function(){this.__base.FEaiChartScene.active.call(this)};
MO.FEaiChartStatisticsScene_process=function(){this.__base.FEaiChartScene.process.call(this);if(!this._statusStart&&this.testReady()){var a=document.getElementById("id_loading");a&&(a.style.opacity=this._statusLayerLevel/this._statusLayerCount,this._statusLayerLevel--);this._statusLayerLevel--;0==this._statusLayerLevel&&(a&&document.body.removeChild(a),document.getElementById("id_table").style.display="",this._statusStart=this._playing=!0)}if(this._playing&&(this._investment.process(),a=this._investment.invementCurrent(),
null!=a)){var b=this._totalBar,c=b.findComponent("total");c.setValue(parseInt(a).toString());c.process()&&b.repaint()}};MO.FEaiChartStatisticsScene_deactive=function(){this.__base.FEaiChartScene.deactive.call(this)};MO.FEaiCompanyScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Company;return a};
MO.FEaiCountryScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Country;a._countryTemplate=null;a._countryLogoBar=null;a.onTemplateLoad=MO.FEaiCountryScene_onTemplateLoad;a.setup=MO.FEaiCountryScene_setup;a.active=MO.FEaiCountryScene_active;a.deactive=MO.FEaiCountryScene_deactive;return a};MO.FEaiCountryScene_onTemplateLoad=function(a){a=this._countryTemplate.sprite().matrix();a.tx=-4;a.ty=-3;a.rx=-Math.PI/2;a.updateForce();MO.Eai.Canvas.activeStage()};
MO.FEaiCountryScene_setup=function(){this.__base.FEaiScene.setup.call(this);var a=this._countryLogoBar=MO.RConsole.find(MO.FGuiFrameConsole).get(MO.Eai.Canvas,"eai.country.LogoBar");this.registerFrame(a)};MO.FEaiCountryScene_active=function(){this.__base.FEaiScene.active.call(this)};MO.FEaiCountryScene_deactive=function(){this.__base.FEaiScene.deactive.call(this);MO.Eai.Canvas.activeStage().faceLayer().removeRenderable(this._countryLogoBar.renderable())};
MO.FEaiGroupReportScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.GroupReport;return a};MO.FEaiGroupScene=function(a){a=MO.RClass.inherits(this,a,MO.FEaiScene);a._code=MO.EEaiScene.Group;return a};
with(MO)MO.FEaiScene=function(a){a=RClass.inherits(this,a,FScene);a._desktop=RClass.register(a,new AGetter("_desktop"));a._engineInfo=null;a.onProcess=MO.FEaiScene_onProcess;a.construct=MO.FEaiScene_construct;a.setup=MO.FEaiScene_setup;a.active=MO.FEaiScene_active;a.deactive=MO.FEaiScene_deactive;a.processEvent=FEaiScene_processEvent;a.dispose=MO.FEaiScene_dispose;return a},MO.FEaiScene_onProcess=function(){this._desktop.process();this.__base.FScene.onProcess.call(this)},MO.FEaiScene_construct=function(){this.__base.FScene.construct.call(this)},
MO.FEaiScene_setup=function(){this.__base.FScene.setup.call(this);var a=this._engineInfo=MO.Class.create(MO.FGuiEngineInfo);a.linkGraphicContext(this);a.setContext(this.graphicContext());a.location().set(10,300);a.build();var b=this._desktop=RClass.create(FGuiDesktop);b.linkGraphicContext(this);b.setup();b.register(a)},MO.FEaiScene_active=function(){this.__base.FScene.active.call(this);var a=this._activeStage;MO.Eai.Canvas.selectStage(a);a=this._activeStage;a.faceLayer();this._engineInfo.setStage(a)},
MO.FEaiScene_deactive=function(){this.__base.FScene.deactive.call(this);this._activeStage.faceLayer();MO.Eai.Canvas.selectStage(null)},MO.FEaiScene_processEvent=function(a){this.__base.FScene.processEvent();this._desktop.processEvent(a)},MO.FEaiScene_dispose=function(){this._desktop=RObject.dispose(this._desktop);this.__base.FScene.dispose.call(this)};with(MO)MO.FEaiChapter=function(a){return a=RClass.inherits(this,a,FChapter)};
MO.FEaiChartChapter=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Chart;a._sceneHistory=MO.Class.register(a,new MO.AGetter("_sceneHistory"));a._sceneStatistics=MO.Class.register(a,new MO.AGetter("_sceneStatistics"));a._sceneIndustry=MO.Class.register(a,new MO.AGetter("_sceneIndustry"));a._sceneInvestment=MO.Class.register(a,new MO.AGetter("_sceneInvestment"));a._sceneCustomer=MO.Class.register(a,new MO.AGetter("_sceneCustomer"));a.construct=MO.FEaiChartChapter_construct;
a.setup=MO.FEaiChartChapter_setup;a.process=MO.FEaiChartChapter_process;a.dispose=MO.FEaiChartChapter_dispose;return a};MO.FEaiChartChapter_construct=function(){this.__base.FEaiChapter.construct.call(this)};
MO.FEaiChartChapter_setup=function(){var a=this._sceneHistory=MO.RClass.create(MO.FEaiChartHistoryScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneStatistics=MO.RClass.create(MO.FEaiChartStatisticsScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneIndustry=MO.RClass.create(MO.FEaiChartIndustryScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneInvestment=MO.RClass.create(MO.FEaiChartInvestmentScene);a.linkGraphicContext(this);this.registerScene(a);
a=this._sceneCustomer=MO.RClass.create(MO.FEaiChartCustomerScene);a.linkGraphicContext(this);this.registerScene(a)};MO.FEaiChartChapter_process=function(){this.__base.FEaiChapter.process.call(this)};MO.FEaiChartChapter_dispose=function(){this.__base.FEaiChapter.dispose.call(this)};MO.FEaiLoadingChapter=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Loading;return a};
MO.FEaiLoginChapter=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Login;return a};MO.FEaiSceneChapter=function(a){a=MO.RClass.inherits(this,a,MO.FEaiChapter);a._code=MO.EEaiChapter.Scene;a._sceneCountry=null;a._sceneGroup=null;a._sceneGroupReport=null;a._sceneCompany=null;a.construct=MO.FEaiSceneChapter_construct;a.setup=MO.FEaiSceneChapter_setup;a.process=MO.FEaiSceneChapter_process;a.dispose=MO.FEaiSceneChapter_dispose;return a};MO.FEaiSceneChapter_construct=function(){this.__base.FEaiChapter.construct.call(this)};
MO.FEaiSceneChapter_setup=function(){var a=this._sceneCountry=MO.RClass.create(MO.FEaiCountryScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneGroup=MO.RClass.create(MO.FEaiGroupScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneGroupReport=MO.RClass.create(MO.FEaiGroupReportScene);a.linkGraphicContext(this);this.registerScene(a);a=this._sceneCompany=MO.RClass.create(MO.FEaiCompanyScene);a.linkGraphicContext(this);this.registerScene(a)};
MO.FEaiSceneChapter_process=function(){this.__base.FEaiChapter.process.call(this)};MO.FEaiSceneChapter_dispose=function(){this.__base.FEaiChapter.dispose.call(this)};
with(MO)MO.FEaiApplication=function(a){a=RClass.inherits(this,a,FApplication);a._thread=null;a._interval=10;a.construct=FEaiApplication_construct;a.createCanvas=FEaiApplication_createCanvas;a.setup=FEaiApplication_setup;a.dispose=FEaiApplication_dispose;return a},MO.FEaiApplication_construct=function(){this.__base.FApplication.construct.call(this);var a=this._thread=RClass.create(FThread);a.setInterval(this._interval);a.addProcessListener(this,this.process);RConsole.find(FThreadConsole).start(a)},
MO.FEaiApplication_createCanvas=function(){return RClass.create(FEaiCanvas)},MO.FEaiApplication_setup=function(a){a=RConsole.find(FG3dEffectConsole);a.register("general.color.eai.citys",FEaiCityEffect);a.register("general.color.eai.citys.range",FEaiCityRangeEffect)},MO.FEaiApplication_dispose=function(){this.__base.FApplication.dispose.call(this)};
with(MO)MO.FEaiCanvas=function(a){a=RClass.inherits(this,a,FE3dCanvas);a._scaleRate=1;a._optionAlpha=!1;a._optionAntialias=!1;a._activeStage=RClass.register(a,new AGetter("_activeStage"));a._capturePosition=null;a._captureRotation=null;a.onResize=FEaiCanvas_onResize;a.construct=FEaiCanvas_construct;a.selectStage=FEaiCanvas_selectStage;a.dispose=FEaiCanvas_dispose;return a},MO.FEaiCanvas_onResize=function(a){this.__base.FE3dCanvas.onResize.call(this,a);a=this._graphicContext.size();var b=this._activeStage;
b&&(b=b.camera().projection(),b.size().set(a.width,a.height),b.update())},MO.FEaiCanvas_construct=function(){this.__base.FE3dCanvas.construct.call(this);this._rotation=new SVector3;this._capturePosition=new SPoint2;this._captureRotation=new SVector3},MO.FEaiCanvas_selectStage=function(a){a.linkGraphicContext(this);a.region().linkGraphicContext(this);a.selectTechnique(this,FE3dGeneralTechnique);var b=a.region().camera(),c=b.projection();c.setAngle(80);c.size().set(this._hCanvas.offsetWidth,this._hCanvas.offsetHeight);
c.update();b.position().set(0,0,-10);b.lookAt(0,0,0);b.update();this._activeStage=a},MO.FEaiCanvas_dispose=function(){this._rotation=RObject.dispose(this._rotation);this.__base.FE3dCanvas.dispose.call(this)};
with(MO)MO.FEaiChartApplication=function(a){a=RClass.inherits(this,a,FEaiApplication);a._sceneCode=RClass.register(a,new AGetSet("_sceneCode"),MO.EEaiScene.ChartHistory);a._chapterLoading=RClass.register(a,new AGetter("_chapterLoading"));a._chapterChart=RClass.register(a,new AGetter("_chapterChart"));a._thread=null;a._interval=10;a.onLoadResource=FEaiChartApplication_onLoadResource;a.construct=FEaiChartApplication_construct;a.createCanvas=FEaiChartApplication_createCanvas;a.setup=FEaiChartApplication_setup;
a.dispose=FEaiChartApplication_dispose;return a},MO.FEaiChartApplication_onLoadResource=function(){this.selectChapterByCode(MO.EEaiChapter.Chart).selectSceneByCode(this._sceneCode)},MO.FEaiChartApplication_construct=function(){this.__base.FEaiApplication.construct.call(this)},MO.FEaiChartApplication_createCanvas=function(){return RClass.create(FEaiChartCanvas)},MO.FEaiChartApplication_setup=function(a){this.__base.FEaiApplication.setup.call(this,a);this._hPanel=a;var b=MO.Eai.Canvas=this._canvas=
this.createCanvas();b.build(a);b.setPanel(a);this.linkGraphicContext(b);a=this._chapterLoading=MO.RClass.create(MO.FEaiLoadingChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterChart=MO.RClass.create(MO.FEaiChartChapter);a.linkGraphicContext(this);this.registerChapter(a);a=MO.RConsole.find(MO.FEaiResourceConsole);a.addLoadListener(this,this.onLoadResource);a.load()},MO.FEaiChartApplication_dispose=function(){this._chapterLoading=RObject.dispose(this._chapterLoading);this._chapterChart=
RObject.dispose(this._chapterChart);this.__base.FEaiApplication.dispose.call(this)};
with(MO)MO.FEaiChartCanvas=function(a){a=RClass.inherits(this,a,FEaiCanvas);a._capturePosition=null;a._cameraPosition=null;a.construct=FEaiChartCanvas_construct;a.setPanel=FEaiChartCanvas_setPanel;a.dispose=FEaiChartCanvas_dispose;return a},MO.FEaiChartCanvas_construct=function(){this.__base.FEaiCanvas.construct.call(this);this._logicSize=new SSize2(1920,1080);this._cameraPosition=new SPoint3},MO.FEaiChartCanvas_setPanel=function(a){this.__base.FEaiCanvas.setPanel.call(this,a)},MO.FEaiChartCanvas_dispose=
function(){this._cameraPosition=RObject.dispose(this._cameraPosition);this.__base.FEaiCanvas.dispose.call(this)};
with(MO)MO.FEaiFlatCanvas=function(a){a=RClass.inherits(this,a,FEaiCanvas);a._capturePosition=null;a._cameraPosition=null;a.onEnterFrame=FEaiFlatCanvas_onEnterFrame;a.onMouseCaptureStart=FEaiFlatCanvas_onMouseCaptureStart;a.onMouseCapture=FEaiFlatCanvas_onMouseCapture;a.onMouseCaptureStop=FEaiFlatCanvas_onMouseCaptureStop;a.construct=FEaiFlatCanvas_construct;a.setPanel=FEaiFlatCanvas_setPanel;a.dispose=FEaiFlatCanvas_dispose;return a},MO.FEaiFlatCanvas_onEnterFrame=function(){var a=this._activeStage;
if(a){var a=a.camera(),b=RKeyboard.isPress(EKeyCode.W),c=RKeyboard.isPress(EKeyCode.S);b&&!c&&a.doMoveY(.5);!b&&c&&a.doMoveY(-.5);b=RKeyboard.isPress(EKeyCode.A);c=RKeyboard.isPress(EKeyCode.D);b&&!c&&a.doMoveX(-.5);!b&&c&&a.doMoveX(.5);a.update()}},MO.FEaiFlatCanvas_onMouseCaptureStart=function(a){var b=this._activeStage;b&&(this._capturePosition.set(a.clientX,a.clientY),this._cameraPosition.assign(b.camera().position()))},MO.FEaiFlatCanvas_onMouseCapture=function(a){var b=this._activeStage;if(b){var c=
a.clientX-this._capturePosition.x;a=a.clientY-this._capturePosition.y;b=b.camera().position();b.x=this._cameraPosition.x-.03*c;b.y=this._cameraPosition.y+.03*a}},MO.FEaiFlatCanvas_onMouseCaptureStop=function(a){},MO.FEaiFlatCanvas_construct=function(){this.__base.FEaiCanvas.construct.call(this);this._logicSize=new SSize2(1920,1080);this._cameraPosition=new SPoint3},MO.FEaiFlatCanvas_setPanel=function(a){this.__base.FEaiCanvas.setPanel.call(this,a)},MO.FEaiFlatCanvas_dispose=function(){this._cameraPosition=
RObject.dispose(this._cameraPosition);this.__base.FEaiCanvas.dispose.call(this)};
with(MO)MO.FEaiPlatformApplication=function(a){a=RClass.inherits(this,a,FEaiApplication);a._chapterLoading=RClass.register(a,new AGetter("_chapterLoading"));a._chapterLogin=RClass.register(a,new AGetter("_chapterLogin"));a._chapterScene=RClass.register(a,new AGetter("_chapterScene"));a._chapterChart=RClass.register(a,new AGetter("_chapterChart"));a._thread=null;a._interval=10;a.onLoadResource=FEaiPlatformApplication_onLoadResource;a.construct=FEaiPlatformApplication_construct;a.createCanvas=FEaiPlatformApplication_createCanvas;
a.setup=FEaiPlatformApplication_setup;a.dispose=FEaiPlatformApplication_dispose;return a},MO.FEaiPlatformApplication_onLoadResource=function(){this.selectChapterByCode(MO.EEaiChapter.Scene).selectSceneByCode(MO.EEaiScene.Country)},MO.FEaiPlatformApplication_construct=function(){this.__base.FEaiApplication.construct.call(this)},MO.FEaiPlatformApplication_createCanvas=function(){return RClass.create(FEaiPlatformCanvas)},MO.FEaiPlatformApplication_setup=function(){var a=this._chapterLoading=MO.RClass.create(MO.FEaiLoadingChapter);
a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterLogin=MO.RClass.create(MO.FEaiLoginChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterScene=MO.RClass.create(MO.FEaiSceneChapter);a.linkGraphicContext(this);this.registerChapter(a);a=this._chapterChart=MO.RClass.create(MO.FEaiChartChapter);a.linkGraphicContext(this);this.registerChapter(a);a=MO.RConsole.find(MO.FEaiResourceConsole);a.addLoadListener(this,this.onLoadResource);a.load()},MO.FEaiPlatformApplication_dispose=
function(){this.__base.FEaiApplication.dispose.call(this)};
with(MO)MO.FEaiPlatformCanvas=function(a){a=RClass.inherits(this,a,FEaiCanvas);a._capturePosition=null;a._captureRotation=null;a.onEnterFrame=FEaiPlatformCanvas_onEnterFrame;a.onMouseCaptureStart=FEaiPlatformCanvas_onMouseCaptureStart;a.onMouseCapture=FEaiPlatformCanvas_onMouseCapture;a.onMouseCaptureStop=FEaiPlatformCanvas_onMouseCaptureStop;a.construct=FEaiPlatformCanvas_construct;a.dispose=FEaiPlatformCanvas_dispose;return a},MO.FEaiPlatformCanvas_onEnterFrame=function(){var a=this._activeStage;
if(a){var b=a.camera(),c=.05,d=RKeyboard.isPress(EKeyCode.W),e=RKeyboard.isPress(EKeyCode.S);d&&!e&&b.doWalk(.5);!d&&e&&b.doWalk(-.5);d=RKeyboard.isPress(EKeyCode.A);e=RKeyboard.isPress(EKeyCode.D);d&&!e&&b.doYaw(c);!d&&e&&b.doYaw(-c);d=RKeyboard.isPress(EKeyCode.Q);e=RKeyboard.isPress(EKeyCode.E);d&&!e&&b.doFly(.5);!d&&e&&b.doFly(-.5);e=RKeyboard.isPress(EKeyCode.Z);d=RKeyboard.isPress(EKeyCode.X);e&&!d&&b.doPitch(c);!e&&d&&b.doPitch(-c);b.update();if(this._optionRotation){c=this._rotation;a=a.layers();
b=a.count();for(d=0;d<b;d++)e=a.value(d).matrix(),e.setRotation(0,c.y,0),e.update();c.y+=.01}}},MO.FEaiPlatformCanvas_onMouseCaptureStart=function(a){var b=this._activeStage;if(b){var c=this._activeStage.region();RConsole.find(FG3dTechniqueConsole).find(this._graphicContext,FG3dSelectTechnique).test(c,a.offsetX,a.offsetY);this._capturePosition.set(a.clientX,a.clientY);this._captureRotation.assign(b.camera()._rotation)}},MO.FEaiPlatformCanvas_onMouseCapture=function(a){if(this._activeStage){var b=
a.clientX-this._capturePosition.x;a=a.clientY-this._capturePosition.y;var c=this._activeStage.camera().rotation(),d=this._captureRotation;c.x=d.x+.003*a;c.y=d.y+.003*b}},MO.FEaiPlatformCanvas_onMouseCaptureStop=function(a){},MO.FEaiPlatformCanvas_construct=function(){this.__base.FEaiCanvas.construct.call(this)},MO.FEaiPlatformCanvas_dispose=function(){this.__base.FEaiCanvas.dispose.call(this)};MO.Eai.setup=function(a,b){};
