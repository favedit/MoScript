<!DOCTYPE HTML>
<HTML>
<HEAD>
<TITLE>CoolLight Designer</TITLE>
<META http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK rel="stylesheet" href='../acs/lang_cn.css' type="text/css" media="all"/>

<SCRIPT language='javascript' src='../ajs/mo.js'></SCRIPT>
<SCRIPT>
// http://localhost:92/script2/design/template.html
var canvas = null;
var display = null;
var movie = false;
function onEnterFrame(){
   if(display){
      var m = display.matrix();
      m.ry -= 0.004;
      m.updateForce();
   }
}
function onSceneLoad(c, s){
   s.lsnsEnterFrame.register(null, onEnterFrame);
   //var l = s.layers().get('space');
   //var l = s.layers().get('map');
   //display = l.displays().get(0);
}
function onKeydown(p){
   var e = window.event;
   var c = e.keyCode;
   if(c == EKeyCode.Space){
      movie = !movie;
      canvas.switchMovie(movie);
   }
}
function onLoad(){
   // 环境设置
   RRuntime.processCd = EProcess.Debug;
   RApplication.initialize();
   RBrowser.setContentPath('..');
   // 获得代码
   var u = window.location.toString();
   var i = u.indexOf('code=');
   var c = null;
   if(i != -1){
      c = u.substring(i + 5);
   }
   if(RString.isEmpty(c)){
      c = 'pvw.show.item.001';
      //c = 'pvw.show.item.004';
      //c = 'pvw.show.item.006';
      //c = 'pvw.show.item.007';
      //c = 'pvw.show.item.008';
      //c = 'pvw.show.item.009';
      //c = 'pvw.sc.car.01.001';
      //c = 'pvw.sc.car.01.002';
      //c = 'pvw.sc.car.01.003';
      //c = 'pvw.show.skeleton.01';
      //c = 'pvw.sc.house.01.scene';
   }
   // 创建画板
   var w = canvas = RClass.create(FE3dSceneCanvas);
   w.build(document);
   w.setPanel(document.body);
   w.load(c);
   w.addLoadListener(null, onSceneLoad);
   //RDump.dump(w, document.body);
}
</SCRIPT>
</HEAD>
<BODY scroll='no' style='overflow:hidden;' onload='onLoad()' onkeydown='onKeydown()'></BODY>
</HTML>
